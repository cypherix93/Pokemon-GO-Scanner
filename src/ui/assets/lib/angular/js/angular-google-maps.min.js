!function(t,e,i){"use strict";(function(){e.module("uiGmapgoogle-maps.providers",["nemLogging"]),e.module("uiGmapgoogle-maps.wrapped",[]),e.module("uiGmapgoogle-maps.extensions",["uiGmapgoogle-maps.wrapped","uiGmapgoogle-maps.providers"]),e.module("uiGmapgoogle-maps.directives.api.utils",["uiGmapgoogle-maps.extensions"]),e.module("uiGmapgoogle-maps.directives.api.managers",[]),e.module("uiGmapgoogle-maps.directives.api.options",["uiGmapgoogle-maps.directives.api.utils"]),e.module("uiGmapgoogle-maps.directives.api.options.builders",[]),e.module("uiGmapgoogle-maps.directives.api.models.child",["uiGmapgoogle-maps.directives.api.utils","uiGmapgoogle-maps.directives.api.options","uiGmapgoogle-maps.directives.api.options.builders"]),e.module("uiGmapgoogle-maps.directives.api.models.parent",["uiGmapgoogle-maps.directives.api.managers","uiGmapgoogle-maps.directives.api.models.child","uiGmapgoogle-maps.providers"]),e.module("uiGmapgoogle-maps.directives.api",["uiGmapgoogle-maps.directives.api.models.parent"]),e.module("uiGmapgoogle-maps",["uiGmapgoogle-maps.directives.api","uiGmapgoogle-maps.providers"])}).call(this),function(){e.module("uiGmapgoogle-maps.providers").factory("uiGmapMapScriptLoader",["$q","uiGmapuuid",function(i,n){var o,r,s,a,l;return a=void 0,l=void 0,o=function(t){return t.china?"http://maps.google.cn/maps/api/js?":"auto"===t.transport?"//maps.googleapis.com/maps/api/js?":t.transport+"://maps.googleapis.com/maps/api/js?"},r=function(t){var e,i,r,s;return e=["transport","isGoogleMapsForWork","china","preventLoad"],t.isGoogleMapsForWork&&e.push("key"),i=_.map(_.omit(t,e),function(t,e){return e+"="+t}),a&&(s=document.getElementById(a),s.parentNode.removeChild(s)),i=i.join("&"),r=document.createElement("script"),r.id=a="ui_gmap_map_load_"+n.generate(),r.type="text/javascript",r.src=o(t)+i,document.body.appendChild(r)},s=function(){return e.isDefined(t.google)&&e.isDefined(t.google.maps)},{load:function(e){var n,o;return n=i.defer(),s()?(n.resolve(t.google.maps),n.promise):(o=e.callback="onGoogleMapsReady"+Math.round(1e3*Math.random()),t[o]=function(){t[o]=null,n.resolve(t.google.maps)},t.navigator.connection&&t.Connection&&t.navigator.connection.type===t.Connection.NONE&&!e.preventLoad?document.addEventListener("online",function(){if(!s())return r(e)}):e.preventLoad||r(e),l=e,l.randomizedFunctionName=o,n.promise)},manualLoad:function(){var e;return e=l,s()?t[e.randomizedFunctionName]?t[e.randomizedFunctionName]():void 0:r(e)}}}]).provider("uiGmapGoogleMapApi",function(){return this.options={transport:"https",isGoogleMapsForWork:!1,china:!1,v:"3",libraries:"",language:"en",preventLoad:!1},this.configure=function(t){e.extend(this.options,t)},this.$get=["uiGmapMapScriptLoader",function(t){return function(e){return e.load(t.options)}}(this)],this}).service("uiGmapGoogleMapApiManualLoader",["uiGmapMapScriptLoader",function(t){return{load:function(){t.manualLoad()}}}])}.call(this),function(){var i=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function i(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},o={}.hasOwnProperty;e.module("uiGmapgoogle-maps.extensions").service("uiGmapExtendGWin",function(){return{init:_.once(function(){var e;if(google||("undefined"!=typeof google&&null!==google?google.maps:void 0)||null!=google.maps.InfoWindow)return google.maps.InfoWindow.prototype._open=google.maps.InfoWindow.prototype.open,google.maps.InfoWindow.prototype._close=google.maps.InfoWindow.prototype.close,google.maps.InfoWindow.prototype._isOpen=!1,google.maps.InfoWindow.prototype.open=function(t,e,i){null==i&&(this._isOpen=!0,this._open(t,e,!0))},google.maps.InfoWindow.prototype.close=function(t){null==t&&(this._isOpen=!1,this._close(!0))},google.maps.InfoWindow.prototype.isOpen=function(t){return null==t&&(t=void 0),null==t?this._isOpen:this._isOpen=t},t.InfoBox&&(t.InfoBox.prototype._open=t.InfoBox.prototype.open,t.InfoBox.prototype._close=t.InfoBox.prototype.close,t.InfoBox.prototype._isOpen=!1,t.InfoBox.prototype.open=function(t,e){this._isOpen=!0,this._open(t,e)},t.InfoBox.prototype.close=function(){this._isOpen=!1,this._close()},t.InfoBox.prototype.isOpen=function(t){return null==t&&(t=void 0),null==t?this._isOpen:this._isOpen=t},e=function(e){function o(e){this.getOrigCloseBoxImg_=i(this.getOrigCloseBoxImg_,this),this.getCloseBoxDiv_=i(this.getCloseBoxDiv_,this);var n;n=new t.InfoBox(e),_.extend(this,n),null!=e.closeBoxDiv&&(this.closeBoxDiv_=e.closeBoxDiv)}return n(o,e),o.prototype.getCloseBoxDiv_=function(){return this.closeBoxDiv_},o.prototype.getCloseBoxImg_=function(){var t,e;return t=this.getCloseBoxDiv_(),e=this.getOrigCloseBoxImg_(),t||e},o.prototype.getOrigCloseBoxImg_=function(){var t;return t="",""!==this.closeBoxURL_&&(t="<img",t+=" src='"+this.closeBoxURL_+"'",t+=" align=right",t+=" style='",t+=" position: relative;",t+=" cursor: pointer;",t+=" margin: "+this.closeBoxMargin_+";",t+="'>"),t},o}(t.InfoBox),t.uiGmapInfoBox=e),t.MarkerLabel_?t.MarkerLabel_.prototype.setContent=function(){var t;t=this.marker_.get("labelContent"),t&&!_.isEqual(this.oldContent,t)&&("undefined"==typeof(null!=t?t.nodeType:void 0)?(this.labelDiv_.innerHTML=t,this.eventDiv_.innerHTML=this.labelDiv_.innerHTML,this.oldContent=t):(this.labelDiv_.innerHTML="",this.labelDiv_.appendChild(t),t=t.cloneNode(!0),this.labelDiv_.innerHTML="",this.eventDiv_.appendChild(t),this.oldContent=t))}:void 0})}})}.call(this),function(){e.module("uiGmapgoogle-maps.extensions").service("uiGmapLodash",function(){var t,e,i,n,o,r,s,a;return r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,o=/\\(\\)?/g,i=function(t){var e,i,n;if(i=t.missingName,n=t.swapName,e=t.isProto,null==_[i]&&(_[i]=_[n],e))return _.prototype[i]=_[n]},[{missingName:"contains",swapName:"includes",isProto:!0},{missingName:"includes",swapName:"contains",isProto:!0},{missingName:"object",swapName:"zipObject"},{missingName:"zipObject",swapName:"object"},{missingName:"all",swapName:"every"},{missingName:"every",swapName:"all"},{missingName:"any",swapName:"some"},{missingName:"some",swapName:"any"},{missingName:"first",swapName:"head"},{missingName:"head",swapName:"first"}].forEach(function(t){return i(t)}),null==_.get&&(s=function(t){return _.isObject(t)?t:Object(t)},e=function(t){return null===t?"":t+""},a=function(t){var i;return _.isArray(t)?t:(i=[],e(t).replace(r,function(t,e,n,r){i.push(n?r.replace(o,"$1"):e||t)}),i)},t=function(t,e,i){var n,o;if(null!==t){void 0!==i&&i in s(t)&&(e=[i]),n=0,o=e.length;for(;!_.isUndefined(t)&&n<o;)t=t[e[n++]];return n&&n===o?t:void 0}},n=function(e,i,n){var o;return o=null===e?void 0:t(e,a(i),i+""),void 0===o?n:o},_.get=n),this.intersectionObjects=function(t,e,i){var n;return null==i&&(i=void 0),n=_.map(t,function(t){return _.find(e,function(e){return null!=i?i(t,e):_.isEqual(t,e)})}),_.filter(n,function(t){return null!=t})},this.containsObject=_.includeObject=function(t,e,i){return null==i&&(i=void 0),null!==t&&_.some(t,function(t){return null!=i?i(t,e):_.isEqual(t,e)})},this.differenceObjects=function(t,e,i){return null==i&&(i=void 0),_.filter(t,function(t){return function(n){return!t.containsObject(e,n,i)}}(this))},this.withoutObjects=this.differenceObjects,this.indexOfObject=function(t,e,i,n){var o,r;if(null==t)return-1;if(o=0,r=t.length,n){if("number"!=typeof n)return o=_.sortedIndex(t,e),t[o]===e?o:-1;o=n<0?Math.max(0,r+n):n}for(;o<r;){if(null!=i){if(i(t[o],e))return o}else if(_.isEqual(t[o],e))return o;o++}return-1},this.isNullOrUndefined=function(t){return _.isNull(t||_.isUndefined(t))},this})}.call(this),function(){e.module("uiGmapgoogle-maps.extensions").factory("uiGmapString",function(){return function(t){return this.contains=function(e,i){return t.indexOf(e,i)!==-1},this}})}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.utils").service("uiGmap_sync",[function(){return{fakePromise:function(){var t;return t=void 0,{then:function(e){return t=e},resolve:function(){return t.apply(void 0,arguments)}}}}}]).service("uiGmap_async",["$timeout","uiGmapPromise","uiGmapLogger","$q","uiGmapDataStructures","uiGmapGmapUtil",function(t,i,n,o,r,s){var a,l,u,p,h,c,d,g,f,m,v,y,b,w,M,k,x,C,G,D;return G=i.promiseTypes,y=i.isInProgress,C=i.promiseStatus,a=i.ExposedPromise,u=i.SniffedPromise,b=function(t,e){var i;return i=t.promise(),i.promiseType=t.promiseType,i.$$state&&n.debug("promiseType: "+i.promiseType+", state: "+C(i.$$state.status)),i.cancelCb=e,i},g=function(t,e){return t.promiseType===G.create&&e.promiseType!==G["delete"]&&e.promiseType!==G.init&&(n.debug("lastPromise.promiseType "+e.promiseType+", newPromiseType: "+t.promiseType+", SKIPPED MUST COME AFTER DELETE ONLY"),!0)},x=function(t,e,i){var o;if(e.promiseType===G["delete"]&&i.promiseType!==G["delete"]&&null!=i.cancelCb&&_.isFunction(i.cancelCb)&&y(i)&&(n.debug("promiseType: "+e.promiseType+", CANCELING LAST PROMISE type: "+i.promiseType),i.cancelCb("cancel safe"),o=t.peek(),null!=o&&y(o)))return o.hasOwnProperty("cancelCb")&&_.isFunction(o.cancelCb)?(n.debug("promiseType: "+o.promiseType+", CANCELING FIRST PROMISE type: "+o.promiseType),o.cancelCb("cancel safe")):n.warn("first promise was not cancelable")},l=function(t,e,i){var n,o;if(t.existingPieces){if(n=_.last(t.existingPieces._content),g(e,n))return;return x(t.existingPieces,e,n),o=a(n["finally"](function(){return b(e,i)})),o.cancelCb=i,o.promiseType=e.promiseType,t.existingPieces.enqueue(o),n["finally"](function(){return t.existingPieces.dequeue()})}return t.existingPieces=new r.Queue,t.existingPieces.enqueue(b(e,i))},M=function(t,e,i,o,r){var s;return null==i&&(i=""),s=function(t){if(n.debug(t+": "+t),null!=o&&_.isFunction(o))return o(t)},l(t,u(r,e),s)},c=80,m={value:null},D=function(t,e,i){var n,o;try{return t.apply(e,i)}catch(o){return n=o,m.value=n,m}},w=function(t,e,i,o){var r,s;return s=D(t,e,o),s===m&&(r="error within chunking iterator: "+m.value,n.error(r),i.reject(r)),"cancel safe"!==s},p=function(t,e,i){var n,o;return n=t===e,o=e[i],n?o:t[o]},h=["length","forEach","map"],v=function(t,i,n,o){var r,s,a;if(e.isArray(t))r=t;else if(i)r=i;else{r=[];for(s in t)a=t[s],t.hasOwnProperty(s)&&!_.includes(h,s)&&r.push(s)}return null==o&&(o=n),e.isArray(r)&&!(null!=r?r.length:void 0)&&o!==n?n():o(r,i)},d=function(i,n,o,r,s,a,l,u){return v(i,u,function(u,h){var c,g,f,m;for(c=n&&n<u.length?n:u.length,g=l,f=!0;f&&c--&&g<(u?u.length:g+1);)m=p(i,u,g),f=!!e.isFunction(m)||w(r,void 0,a,[m,g]),++g;if(u){if(!(f&&g<u.length))return a.resolve();if(l=g,n)return null!=s&&_.isFunction(s)&&w(s,void 0,a,[]),t(function(){return d(i,n,o,r,s,a,l,h)},o,!1)}})},f=function(t,e,o,r,s,a,l){var u,p,h;return null==o&&(o=c),null==s&&(s=0),null==a&&(a=1),h=void 0,p=i.defer(),h=p.promise,a?v(t,l,function(){return p.resolve(),h},function(i,n){return d(t,o,a,e,r,p,s,n),h}):(u="pause (delay) must be set from _async!",n.error(u),p.reject(u),h)},k=function(t,e,n,o,r,s,a){var l;return l=[],v(t,a,function(){return i.resolve(l)},function(i,a){return f(t,function(t){return l.push(e(t))},n,o,r,s,a).then(function(){return l})})},{each:f,map:k,managePromiseQueue:M,promiseLock:M,defaultChunkSize:c,getArrayAndKeys:v,chunkSizeFrom:function(t,e){return null==e&&(e=void 0),_.isNumber(t)&&(e=t),(s.isFalse(t)||t===!1)&&(e=!1),e}}}])}.call(this),function(){var t=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1};e.module("uiGmapgoogle-maps.directives.api.utils").factory("uiGmapBaseObject",function(){var e,i;return i=["extended","included"],e=function(){function e(){}return e.extend=function(e){var n,o,r;for(n in e)r=e[n],t.call(i,n)<0&&(this[n]=r);return null!=(o=e.extended)&&o.apply(this),this},e.include=function(e){var n,o,r;for(n in e)r=e[n],t.call(i,n)<0&&(this.prototype[n]=r);return null!=(o=e.included)&&o.apply(this),this},e}()})}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.utils").factory("uiGmapChildEvents",function(){return{onChildCreation:function(t){}}})}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.utils").service("uiGmapCtrlHandle",["$q",function(t){var e;return e={handle:function(i,n){return i.$on("$destroy",function(){return e.handle(i)}),i.deferred=t.defer(),{getScope:function(){return i}}},mapPromise:function(t,e){var i;return i=e.getScope(),i.deferred.promise.then(function(e){return t.map=e}),i.deferred.promise}}}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.utils").service("uiGmapEventsHelper",["uiGmapLogger",function(t){var i,n;return n=function(t){return e.isDefined(t.events)&&null!=t.events&&e.isObject(t.events)},i=function(t,e){return n(t)?t:n(e)?e:void 0},{setEvents:function(t,n,o,r){var s;if(s=i(n,o),null!=s)return _.compact(_.map(s.events,function(i,a){var l;if(r&&(l=_(r).includes(a)),s.events.hasOwnProperty(a)&&e.isFunction(s.events[a])&&!l)return google.maps.event.addListener(t,a,function(){return n.$evalAsync||(n.$evalAsync=function(){}),n.$evalAsync(i.apply(n,[t,a,o,arguments]))})}))},removeEvents:function(t){var e,i;if(t)for(e in t)i=t[e],i&&t.hasOwnProperty(e)&&google.maps.event.removeListener(i)}}}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.utils").service("uiGmapFitHelper",["uiGmapLogger","$timeout",function(t,e){return{fit:function(t,i){var n,o,r,s,a;if(i&&(null!=t?t.length:void 0)){n=new google.maps.LatLngBounds,o=!1;for(r in t)s=t[r],s&&(o||(o=!0),a=_.isFunction(s.getPosition)?s.getPosition():s),n.extend(a);if(o)return e(function(){return i.fitBounds(n)})}}}}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.utils").service("uiGmapGmapUtil",["uiGmapLogger","$compile",function(t,i){var n,o,r,s,a,l;return o=function(t,e,i){return t===e||i.indexOf(t)!==-1},n=function(t){return o(t,!1,["false","FALSE",0,"n","N","no","NO"])},s=function(t){return Array.isArray(t)&&2===t.length?t[1]:e.isDefined(t.type)&&"Point"===t.type?t.coordinates[1]:t.latitude},a=function(t){return Array.isArray(t)&&2===t.length?t[0]:e.isDefined(t.type)&&"Point"===t.type?t.coordinates[0]:t.longitude},r=function(t){if(t)return t instanceof google.maps.LatLng?t:Array.isArray(t)&&2===t.length?new google.maps.LatLng(t[1],t[0]):e.isDefined(t.type)&&"Point"===t.type?new google.maps.LatLng(t.coordinates[1],t.coordinates[0]):new google.maps.LatLng(t.latitude,t.longitude)},l=function(t){if(e.isUndefined(t))return!1;if(_.isArray(t)){if(2===t.length)return!0}else if(null!=t&&(null!=t?t.type:void 0)&&"Point"===t.type&&_.isArray(t.coordinates)&&2===t.coordinates.length)return!0;return!(!t||!e.isDefined((null!=t?t.latitude:void 0)&&e.isDefined(null!=t?t.longitude:void 0)))},{setCoordsFromEvent:function(t,i){if(t)return Array.isArray(t)&&2===t.length?(t[1]=i.lat(),t[0]=i.lng()):e.isDefined(t.type)&&"Point"===t.type?(t.coordinates[1]=i.lat(),t.coordinates[0]=i.lng()):(t.latitude=i.lat(),t.longitude=i.lng()),t},getLabelPositionPoint:function(t){var e,i;if(void 0!==t)return t=/^([-\d\.]+)\s([-\d\.]+)$/.exec(t),e=parseFloat(t[1]),i=parseFloat(t[2]),null!=e&&null!=i?new google.maps.Point(e,i):void 0},createWindowOptions:function(n,o,s,a){var l;return null!=s&&null!=a&&null!=i?(l=e.extend({},a,{content:this.buildContent(o,a,s),position:null!=a.position?a.position:e.isObject(n)?n.getPosition():r(o.coords)}),null!=n&&null==(null!=l?l.pixelOffset:void 0)&&(null==l.boxClass||(l.pixelOffset={height:0,width:-2})),l):a?a:(t.error("infoWindow defaults not defined"),s?void 0:t.error("infoWindow content not defined"))},buildContent:function(t,e,n){var o,r;return null!=e.content?r=e.content:null!=i?(n=n.replace(/^\s+|\s+$/g,""),o=""===n?"":i(n)(t),o.length>0&&(r=o[0])):r=n,r},defaultDelay:50,isTrue:function(t){return o(t,!0,["true","TRUE",1,"y","Y","yes","YES"])},isFalse:n,isFalsy:function(t){return o(t,!1,[void 0,null])||n(t)},getCoords:r,validateCoords:l,equalCoords:function(t,e){return s(t)===s(e)&&a(t)===a(e)},validatePath:function(t){var i,n,o,r;if(n=0,e.isUndefined(t.type)){if(!Array.isArray(t)||t.length<2)return!1;for(;n<t.length;){if(!(e.isDefined(t[n].latitude)&&e.isDefined(t[n].longitude)||"function"==typeof t[n].lat&&"function"==typeof t[n].lng))return!1;n++}return!0}if(e.isUndefined(t.coordinates))return!1;if("Polygon"===t.type){if(t.coordinates[0].length<4)return!1;i=t.coordinates[0]}else if("MultiPolygon"===t.type){if(r={max:0,index:0},_.forEach(t.coordinates,function(t,e){if(t[0].length>this.max)return this.max=t[0].length,this.index=e},r),o=t.coordinates[r.index],i=o[0],i.length<4)return!1}else{if("LineString"!==t.type)return!1;if(t.coordinates.length<2)return!1;i=t.coordinates}for(;n<i.length;){if(2!==i[n].length)return!1;n++}return!0},convertPathPoints:function(t){var i,n,o,r,s;if(n=0,r=new google.maps.MVCArray,e.isUndefined(t.type))for(;n<t.length;)e.isDefined(t[n].latitude)&&e.isDefined(t[n].longitude)?o=new google.maps.LatLng(t[n].latitude,t[n].longitude):"function"==typeof t[n].lat&&"function"==typeof t[n].lng&&(o=t[n]),r.push(o),n++;else for("Polygon"===t.type?i=t.coordinates[0]:"MultiPolygon"===t.type?(s={max:0,index:0},_.forEach(t.coordinates,function(t,e){if(t[0].length>this.max)return this.max=t[0].length,this.index=e},s),i=t.coordinates[s.index][0]):"LineString"===t.type&&(i=t.coordinates);n<i.length;)r.push(new google.maps.LatLng(i[n][1],i[n][0])),n++;return r},getPath:function(t,e){var i;return null!=e&&_.isString(e)?(i=t,_.each(e.split("."),function(t){if(i)return i=i[t]}),i):e},validateBoundPoints:function(t){return!(e.isUndefined(t.sw.latitude)||e.isUndefined(t.sw.longitude)||e.isUndefined(t.ne.latitude)||e.isUndefined(t.ne.longitude))},convertBoundPoints:function(t){var e;return e=new google.maps.LatLngBounds(new google.maps.LatLng(t.sw.latitude,t.sw.longitude),new google.maps.LatLng(t.ne.latitude,t.ne.longitude))},fitMapBounds:function(t,e){return t.fitBounds(e)}}}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.utils").service("uiGmapIsReady",["$q","$timeout",function(t,e){var i,n,o,r;return n=0,r=[],o=function(){return t.all(r)},i=function(t,r,s){return e(function(){return s<=0?void t.reject("Your maps are not found we have checked the maximum amount of times. :)"):void(n!==r?i(t,r,s-1):t.resolve(o()))},100)},{spawn:function(){var e;return e=t.defer(),r.push(e.promise),n+=1,{instance:n,deferred:e}},promises:o,instances:function(){return n},promise:function(e,n){var o;return null==e&&(e=1),null==n&&(n=50),o=t.defer(),i(o,e,n),o.promise},reset:function(){n=0,r.length=0},decrement:function(){n>0&&(n-=1),r.length&&(r.length-=1)}}}])}.call(this),function(){var t=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.utils").factory("uiGmapLinked",["uiGmapBaseObject",function(e){var i;return i=function(e){function i(t,e,i,n){this.scope=t,this.element=e,this.attrs=i,this.ctrls=n}return t(i,e),i}(e)}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.utils").service("uiGmapLogger",["nemSimpleLogger",function(t){return t.spawn()}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.utils").factory("uiGmapModelKey",["uiGmapBaseObject","uiGmapGmapUtil",function(n,o){return function(n){function r(e,i){this.scope=e,this["interface"]=null!=i?i:{scopeKeys:[]},this.modelsLength=t(this.modelsLength,this),this.updateChild=t(this.updateChild,this),this.destroy=t(this.destroy,this),this.setChildScope=t(this.setChildScope,this),this.getChanges=t(this.getChanges,this),this.getProp=t(this.getProp,this),this.setIdKey=t(this.setIdKey,this),this.modelKeyComparison=t(this.modelKeyComparison,this),r.__super__.constructor.call(this),this.defaultIdKey="id",this.idKey=void 0}return i(r,n),r.prototype.evalModelHandle=function(t,e){if(null!=t&&null!=e)return"self"===e?t:(_.isFunction(e)&&(e=e()),o.getPath(t,e))},r.prototype.modelKeyComparison=function(t,e){var i,n,r,s,a,l;if(r=this["interface"].scopeKeys.indexOf("coords")>=0,(r&&null!=this.scope.coords||!r)&&(a=this.scope),null==a)throw"No scope set!";return r&&(i=this.scopeOrModelVal("coords",a,t),n=this.scopeOrModelVal("coords",a,e),s=o.equalCoords(i,n),!s)?s:(l=_.without(this["interface"].scopeKeys,"coords"),s=_.every(l,function(i){return function(n){return i.scopeOrModelVal(a[n],a,t)===i.scopeOrModelVal(a[n],a,e)}}(this)))},r.prototype.setIdKey=function(t){return this.idKey=null!=t.idKey?t.idKey:this.defaultIdKey},r.prototype.setVal=function(t,e,i){return this.modelOrKey(t,e=i),t},r.prototype.modelOrKey=function(t,e){if(null!=e)return"self"!==e?o.getPath(t,e):t},r.prototype.getProp=function(t,e,i){return this.scopeOrModelVal(t,e,i)},r.prototype.getChanges=function(t,e,i){var n,o,r;i&&(e=_.pick(e,i),t=_.pick(t,i)),o={},r={},n={};for(r in t)e&&e[r]===t[r]||(_.isArray(t[r])?o[r]=t[r]:_.isObject(t[r])?(n=this.getChanges(t[r],e?e[r]:null),_.isEmpty(n)||(o[r]=n)):o[r]=t[r]);return o},r.prototype.scopeOrModelVal=function(t,e,i,n){var o,r,s,a;return null==n&&(n=!1),o=function(t,e,i){return null==i&&(i=!1),i?{isScope:t,value:e}:e},a=_.get(e,t),_.isFunction(a)?o(!0,a(i),n):_.isObject(a)?o(!0,a,n):_.isString(a)?(r=a,s=r?"self"===r?i:_.get(i,r):_.get(i,t),_.isFunction(s)?o(!1,s(),n):o(!1,s,n)):o(!0,a,n)},r.prototype.setChildScope=function(t,e,i){var n,o,r,s;for(o in t)r=t[o],n=this.scopeOrModelVal(r,e,i,!0),null!=(null!=n?n.value:void 0)&&(s=n.value,s!==e[r]&&(e[r]=s));return e.model=i},r.prototype.onDestroy=function(t){},r.prototype.destroy=function(t){var e;return null==t&&(t=!1),null==this.scope||(null!=(e=this.scope)?e.$$destroyed:void 0)||!this.needToManualDestroy&&!t?this.clean():this.scope.$destroy()},r.prototype.updateChild=function(t,e){return null==e[this.idKey]?void this.$log.error("Model has no id to assign a child to. This is required for performance. Please assign id, or redirect id to a different key."):t.updateModel(e)},r.prototype.modelsLength=function(t){var i,n;return null==t&&(t=void 0),i=0,n=t?t:this.scope.models,null==n?i:i=e.isArray(n)||null!=n.length?n.length:Object.keys(n).length},r}(n)}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.utils").factory("uiGmapModelsWatcher",["uiGmapLogger","uiGmap_async","$q","uiGmapPromise",function(t,e,i,n){return{didQueueInitPromise:function(t,i){return 0===i.models.length&&(e.promiseLock(t,n.promiseTypes.init,null,null,function(){return n.resolve()}),!0)},figureOutState:function(e,i,n,o,r){var s,a,l,u,p;return s=[],l={},u=[],p=[],i.models.forEach(function(r){var a;return null==r[e]?t.error(" id missing for model #{m.toString()},\ncan not use do comparison/insertion"):(l[r[e]]={},null==n.get(r[e])?s.push(r):(a=n.get(r[e]),o(r,a.clonedModel,i)?void 0:p.push({model:r,child:a})))}),a=n.values(),a.forEach(function(i){var n;return null==i?void t.error("child undefined in ModelsWatcher."):null==i.model?void t.error("child.model undefined in ModelsWatcher."):(n=i.model[e],null==l[n]?u.push(i):void 0)}),{adds:s,removals:u,updates:p}}}}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.utils").service("uiGmapPromise",["$q","$timeout","uiGmapLogger",function(t,e,i){var n,o,r,s,a,l,u,p,h,c,d;return h={create:"create",update:"update","delete":"delete",init:"init"},p={IN_PROGRESS:0,RESOLVED:1,REJECTED:2},d=function(){var t;return t={},t[""+p.IN_PROGRESS]="in-progress",t[""+p.RESOLVED]="resolved",t[""+p.REJECTED]="rejected",t}(),s=function(t){return t.$$state?t.$$state.status===p.IN_PROGRESS:!t.hasOwnProperty("$$v")||void 0},a=function(t){return t.$$state?t.$$state.status===p.RESOLVED:!!t.hasOwnProperty("$$v")||void 0},u=function(t){return d[t]||"done w error"},n=function(e){var i,n,o;return i=t.defer(),n=t.all([e,i.promise]),o=t.defer(),e.then(i.resolve,function(){},function(t){return i.notify(t),o.notify(t)}),n.then(function(t){return o.resolve(t[0]||t[1])},function(t){return o.reject(t)}),o.promise.cancel=function(t){return null==t&&(t="canceled"),i.reject(t)},o.promise.notify=function(t){if(null==t&&(t="cancel safe"),o.notify(t),e.hasOwnProperty("notify"))return e.notify(t)},null!=e.promiseType&&(o.promise.promiseType=e.promiseType),o.promise},o=function(t,e){return{promise:t,promiseType:e}},r=function(){return t.defer()},c=function(){var e;return e=t.defer(),e.resolve.apply(void 0,arguments),e.promise},l=function(n){var o;return _.isFunction(n)?(o=t.defer(),e(function(){var t;return t=n(),o.resolve(t)}),o.promise):void i.error("uiGmapPromise.promise() only accepts functions")},{defer:r,promise:l,resolve:c,promiseTypes:h,isInProgress:s,isResolved:a,promiseStatus:u,ExposedPromise:n,SniffedPromise:o}}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.module("uiGmapgoogle-maps.directives.api.utils").factory("uiGmapPropMap",function(){var e;return e=function(){function e(){this.removeAll=t(this.removeAll,this),this.slice=t(this.slice,this),this.push=t(this.push,this),this.keys=t(this.keys,this),this.values=t(this.values,this),this.remove=t(this.remove,this),this.put=t(this.put,this),this.stateChanged=t(this.stateChanged,this),this.get=t(this.get,this),this.length=0,this.dict={},this.didValsStateChange=!1,this.didKeysStateChange=!1,this.allVals=[],this.allKeys=[]}return e.prototype.get=function(t){return this.dict[t]},e.prototype.stateChanged=function(){return this.didValsStateChange=!0,this.didKeysStateChange=!0},e.prototype.put=function(t,e){return null==this.get(t)&&this.length++,this.stateChanged(),this.dict[t]=e},e.prototype.remove=function(t,e){var i;if(null==e&&(e=!1),!e||this.get(t))return i=this.dict[t],delete this.dict[t],this.length--,this.stateChanged(),i},e.prototype.valuesOrKeys=function(t){var e,i;return null==t&&(t="Keys"),this["did"+t+"StateChange"]?(i=[],e=[],_.each(this.dict,function(t,n){return i.push(t),e.push(n)}),this.didKeysStateChange=!1,this.didValsStateChange=!1,this.allVals=i,this.allKeys=e,this["all"+t]):this["all"+t]},e.prototype.values=function(){return this.valuesOrKeys("Vals")},e.prototype.keys=function(){return this.valuesOrKeys()},e.prototype.push=function(t,e){return null==e&&(e="key"),this.put(t[e],t)},e.prototype.slice=function(){return this.keys().map(function(t){return function(e){return t.remove(e)}}(this))},e.prototype.removeAll=function(){return this.slice()},e.prototype.each=function(t){return _.each(this.dict,function(e,i){return t(e)})},e.prototype.map=function(t){return _.map(this.dict,function(e,i){return t(e)})},e}()})}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.utils").factory("uiGmapPropertyAction",["uiGmapLogger",function(t){var e;return e=function(t){return this.setIfChange=function(e){return function(i,n){if(!_.isEqual(n,i))return t(e,i)}},this.sic=this.setIfChange,this}}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.module("uiGmapgoogle-maps.directives.api.managers").factory("uiGmapClustererMarkerManager",["uiGmapLogger","uiGmapFitHelper","uiGmapPropMap","uiGmapEventsHelper",function(i,n,o,r){var s;return s=function(){function s(e,n,r,a){null==n&&(n={}),this.opt_options=null!=r?r:{},this.opt_events=a,this.checkSync=t(this.checkSync,this),this.getGMarkers=t(this.getGMarkers,this),this.fit=t(this.fit,this),this.destroy=t(this.destroy,this),this.attachEvents=t(this.attachEvents,this),this.clear=t(this.clear,this),this.draw=t(this.draw,this),this.removeMany=t(this.removeMany,this),this.remove=t(this.remove,this),this.addMany=t(this.addMany,this),this.update=t(this.update,this),this.add=t(this.add,this),this.type=s.type,this.clusterer=new NgMapMarkerClusterer(e,n,this.opt_options),this.propMapGMarkers=new o,this.attachEvents(this.opt_events,"opt_events"),this.clusterer.setIgnoreHidden(!0),this.noDrawOnSingleAddRemoves=!0,i.info(this)}return s.type="ClustererMarkerManager",s.prototype.checkKey=function(t){var e;if(null==t.key)return e="gMarker.key undefined and it is REQUIRED!!",i.error(e)},s.prototype.add=function(t){return this.checkKey(t),this.clusterer.addMarker(t,this.noDrawOnSingleAddRemoves),this.propMapGMarkers.put(t.key,t),this.checkSync()},s.prototype.update=function(t){return this.remove(t),this.add(t)},s.prototype.addMany=function(t){return t.forEach(function(t){return function(e){return t.add(e)}}(this))},s.prototype.remove=function(t){var e;return this.checkKey(t),e=this.propMapGMarkers.get(t.key),e&&(this.clusterer.removeMarker(t,this.noDrawOnSingleAddRemoves),this.propMapGMarkers.remove(t.key)),this.checkSync()},s.prototype.removeMany=function(t){return t.forEach(function(t){return function(e){return t.remove(e)}}(this))},s.prototype.draw=function(){return this.clusterer.repaint()},s.prototype.clear=function(){return this.removeMany(this.getGMarkers()),this.clusterer.repaint()},s.prototype.attachEvents=function(t,n){var o,r,s;if(this.listeners=[],e.isDefined(t)&&null!=t&&e.isObject(t)){s=[];for(r in t)o=t[r],t.hasOwnProperty(r)&&e.isFunction(t[r])?(i.info(n+": Attaching event: "+r+" to clusterer"),s.push(this.listeners.push(google.maps.event.addListener(this.clusterer,r,t[r])))):s.push(void 0);return s}},s.prototype.clearEvents=function(){return r.removeEvents(this.listeners),this.listeners=[]},s.prototype.destroy=function(){return this.clearEvents(),this.clear()},s.prototype.fit=function(){return n.fit(this.getGMarkers(),this.clusterer.getMap())},s.prototype.getGMarkers=function(){return this.clusterer.getMarkers().values()},s.prototype.checkSync=function(){},s}()}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.managers").service("uiGmapGoogleMapObjectManager",[function(){var t,i;return t=[],i=[],{createMapInstance:function(n,o){var r;return r=null,0===t.length?(r=new google.maps.Map(n,o),i.push(r)):(r=t.pop(),e.element(n).append(r.getDiv()),r.setOptions(o),i.push(r)),r},recycleMapInstance:function(e){var n;if(n=i.indexOf(e),n<0)throw new Error("Expected map instance to be a previously used instance");return i.splice(n,1),t.push(e)}}}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.module("uiGmapgoogle-maps.directives.api.managers").factory("uiGmapMarkerManager",["uiGmapLogger","uiGmapFitHelper","uiGmapPropMap",function(e,i,n){var o;return o=function(){function o(i,r,s){this.getGMarkers=t(this.getGMarkers,this),this.fit=t(this.fit,this),this.handleOptDraw=t(this.handleOptDraw,this),this.clear=t(this.clear,this),this.destroy=t(this.destroy,this),this.draw=t(this.draw,this),this.removeMany=t(this.removeMany,this),this.remove=t(this.remove,this),this.addMany=t(this.addMany,this),this.update=t(this.update,this),this.add=t(this.add,this),this.type=o.type,this.gMap=i,this.gMarkers=new n,this.$log=e,this.$log.info(this)}return o.type="MarkerManager",o.prototype.add=function(t,i){var n,o;if(null==i&&(i=!0),null==t.key)throw o="gMarker.key undefined and it is REQUIRED!!",e.error(o),o;if(n=this.gMarkers.get(t.key),!n)return this.handleOptDraw(t,i,!0),this.gMarkers.put(t.key,t)},o.prototype.update=function(t,e){return null==e&&(e=!0),this.remove(t,e),this.add(t,e)},o.prototype.addMany=function(t){return t.forEach(function(t){return function(e){return t.add(e)}}(this))},o.prototype.remove=function(t,e){if(null==e&&(e=!0),this.handleOptDraw(t,e,!1),this.gMarkers.get(t.key))return this.gMarkers.remove(t.key)},o.prototype.removeMany=function(t){return t.forEach(function(t){return function(e){return t.remove(e)}}(this))},o.prototype.draw=function(){var t;return t=[],this.gMarkers.each(function(e){return function(i){if(!i.isDrawn)return i.doAdd?(i.setMap(e.gMap),i.isDrawn=!0):t.push(i)}}(this)),t.forEach(function(t){return function(e){return e.isDrawn=!1,t.remove(e,!0)}}(this))},o.prototype.destroy=function(){return this.clear()},o.prototype.clear=function(){
return this.gMarkers.each(function(t){return t.setMap(null)}),delete this.gMarkers,this.gMarkers=new n},o.prototype.handleOptDraw=function(t,e,i){return e===!0?(i?t.setMap(this.gMap):t.setMap(null),t.isDrawn=!0):(t.isDrawn=!1,t.doAdd=i)},o.prototype.fit=function(){return i.fit(this.getGMarkers(),this.gMap)},o.prototype.getGMarkers=function(){return this.gMarkers.values()},o}()}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.module("uiGmapgoogle-maps.directives.api.managers").factory("uiGmapSpiderfierMarkerManager",["uiGmapLogger","uiGmapFitHelper","uiGmapPropMap","uiGmapMarkerSpiderfier",function(i,n,o,r){var s;return s=function(){function s(e,n,a,l,u){null==n&&(n={}),this.opt_options=null!=a?a:{},this.opt_events=l,this.scope=u,this.checkSync=t(this.checkSync,this),this.isSpiderfied=t(this.isSpiderfied,this),this.getGMarkers=t(this.getGMarkers,this),this.fit=t(this.fit,this),this.destroy=t(this.destroy,this),this.attachEvents=t(this.attachEvents,this),this.clear=t(this.clear,this),this.draw=t(this.draw,this),this.removeMany=t(this.removeMany,this),this.remove=t(this.remove,this),this.addMany=t(this.addMany,this),this.update=t(this.update,this),this.add=t(this.add,this),this.type=s.type,this.markerSpiderfier=new r(e,this.opt_options),this.propMapGMarkers=new o,this.attachEvents(this.opt_events,"opt_events"),this.noDrawOnSingleAddRemoves=!0,i.info(this)}return s.type="SpiderfierMarkerManager",s.prototype.checkKey=function(t){var e;if(null==t.key)return e="gMarker.key undefined and it is REQUIRED!!",i.error(e)},s.prototype.add=function(t){return t.setMap(this.markerSpiderfier.map),this.checkKey(t),this.markerSpiderfier.addMarker(t,this.noDrawOnSingleAddRemoves),this.propMapGMarkers.put(t.key,t),this.checkSync()},s.prototype.update=function(t){return this.remove(t),this.add(t)},s.prototype.addMany=function(t){return t.forEach(function(t){return function(e){return t.add(e)}}(this))},s.prototype.remove=function(t){var e;return this.checkKey(t),e=this.propMapGMarkers.get(t.key),e&&(t.setMap(null),this.markerSpiderfier.removeMarker(t,this.noDrawOnSingleAddRemoves),this.propMapGMarkers.remove(t.key)),this.checkSync()},s.prototype.removeMany=function(t){return t.forEach(function(t){return function(e){return t.remove(e)}}(this))},s.prototype.draw=function(){},s.prototype.clear=function(){return this.removeMany(this.getGMarkers())},s.prototype.attachEvents=function(t,n){if(e.isDefined(t)&&null!=t&&e.isObject(t))return _.each(t,function(o){return function(r,s){if(t.hasOwnProperty(s)&&e.isFunction(t[s]))return i.info(n+": Attaching event: "+s+" to markerSpiderfier"),o.markerSpiderfier.addListener(s,function(){return"spiderfy"===s||"unspiderfy"===s?o.scope.$evalAsync(t[s].apply(t,arguments)):o.scope.$evalAsync(t[s].apply(t,[arguments[0],s,arguments[0].model,arguments]))})}}(this))},s.prototype.clearEvents=function(t,n){var o,r;if(e.isDefined(t)&&null!=t&&e.isObject(t))for(r in t)o=t[r],t.hasOwnProperty(r)&&e.isFunction(t[r])&&(i.info(n+": Clearing event: "+r+" to markerSpiderfier"),this.markerSpiderfier.clearListeners(r))},s.prototype.destroy=function(){return this.clearEvents(this.opt_events,"opt_events"),this.clear()},s.prototype.fit=function(){return n.fit(this.getGMarkers(),this.markerSpiderfier.map)},s.prototype.getGMarkers=function(){return this.markerSpiderfier.getMarkers()},s.prototype.isSpiderfied=function(){return _.find(this.getGMarkers(),function(t){return null!=(null!=t?t._omsData:void 0)})},s.prototype.checkSync=function(){},s}()}])}.call(this),function(){e.module("uiGmapgoogle-maps").factory("uiGmapadd-events",["$timeout",function(t){var i,n;return i=function(e,i,n){return google.maps.event.addListener(e,i,function(){return n.apply(this,arguments),t(function(){},!0)})},n=function(t,n,o){var r;return o?i(t,n,o):(r=[],e.forEach(n,function(e,n){return r.push(i(t,n,e))}),function(){return e.forEach(r,function(t){return google.maps.event.removeListener(t)}),r=null})}}])}.call(this),function(){e.module("uiGmapgoogle-maps").factory("uiGmaparray-sync",["uiGmapadd-events",function(t){return function(i,n,o,r){var s,a,l,u,p,h,c,d,g;return u=!1,d=n.$eval(o),n["static"]||(p={set_at:function(t){var e;if(!u&&(e=i.getAt(t)))return e.lng&&e.lat?(d[t].latitude=e.lat(),d[t].longitude=e.lng()):d[t]=e},insert_at:function(t){var e;if(!u&&(e=i.getAt(t)))return e.lng&&e.lat?d.splice(t,0,{latitude:e.lat(),longitude:e.lng()}):d.splice(t,0,e)},remove_at:function(t){if(!u)return d.splice(t,1)}},"Polygon"===d.type?s=d.coordinates[0]:"LineString"===d.type&&(s=d.coordinates),a={set_at:function(t){var e;if(!u&&(e=i.getAt(t),e&&e.lng&&e.lat))return s[t][1]=e.lat(),s[t][0]=e.lng()},insert_at:function(t){var e;if(!u&&(e=i.getAt(t),e&&e.lng&&e.lat))return s.splice(t,0,[e.lng(),e.lat()])},remove_at:function(t){if(!u)return s.splice(t,1)}},c=t(i,e.isUndefined(d.type)?p:a)),h=function(t){var e,n,o,s,a,l,p,h;if(u=!0,l=i,e=!1,t){for(n=0,p=l.getLength(),s=t.length,o=Math.min(p,s),a=void 0;n<o;)h=l.getAt(n),a=t[n],"function"==typeof a.equals?a.equals(h)||(l.setAt(n,a),e=!0):h.lat()===a.latitude&&h.lng()===a.longitude||(l.setAt(n,new google.maps.LatLng(a.latitude,a.longitude)),e=!0),n++;for(;n<s;)a=t[n],"function"==typeof a.lat&&"function"==typeof a.lng?l.push(a):l.push(new google.maps.LatLng(a.latitude,a.longitude)),e=!0,n++;for(;n<p;)l.pop(),e=!0,n++}if(u=!1,e)return r(l)},l=function(t){var e,n,o,s,a,l,p,h,c;if(u=!0,p=i,n=!1,t){for("Polygon"===d.type?e=t.coordinates[0]:"LineString"===d.type&&(e=t.coordinates),o=0,h=p.getLength(),a=e.length,s=Math.min(h,a),l=void 0;o<s;)c=p.getAt(o),l=e[o],c.lat()===l[1]&&c.lng()===l[0]||(p.setAt(o,new google.maps.LatLng(l[1],l[0])),n=!0),o++;for(;o<a;)l=e[o],p.push(new google.maps.LatLng(l[1],l[0])),n=!0,o++;for(;o<h;)p.pop(),n=!0,o++}if(u=!1,n)return r(p)},n["static"]||(g=e.isUndefined(d.type)?n.$watchCollection(o,h):n.$watch(o,l,!0)),function(){if(c&&(c(),c=null),g)return g(),g=null}}}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.utils").factory("uiGmapChromeFixes",["$timeout",function(t){return{maybeRepaint:function(e){if(e)return e.style.opacity=.9,t(function(){return e.style.opacity=1})}}}])}.call(this),function(){e.module("uiGmapgoogle-maps").service("uiGmapObjectIterators",function(){var t,e,i,n;return t=["length","forEach","map"],e=[],i=function(e){return e.forEach=function(i){return _.each(_.omit(e,t),function(t){if(!_.isFunction(t))return i(t)})},e},e.push(i),n=function(e){return e.map=function(i){return _.map(_.omit(e,t),function(t){if(!_.isFunction(t))return i(t)})},e},e.push(n),{slapMap:n,slapForEach:i,slapAll:function(t){return e.forEach(function(e){return e(t)}),t}}})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.options.builders").service("uiGmapCommonOptionsBuilder",["uiGmapBaseObject","uiGmapLogger","uiGmapModelKey",function(n,o,r){var s;return s=function(n){function r(){return this.watchProps=t(this.watchProps,this),this.buildOpts=t(this.buildOpts,this),r.__super__.constructor.apply(this,arguments)}return i(r,n),r.prototype.props=["clickable","draggable","editable","visible",{prop:"stroke",isColl:!0}],r.prototype.getCorrectModel=function(t){return e.isDefined(null!=t?t.model:void 0)?t.model:t},r.prototype.buildOpts=function(t,i,n){var r,s,a;return null==t&&(t={}),null==n&&(n={}),this.scope?this.gMap?(r=this.getCorrectModel(this.scope),a=this.scopeOrModelVal("stroke",this.scope,r),s=e.extend(t,this.DEFAULTS,{map:this.gMap,strokeColor:null!=a?a.color:void 0,strokeOpacity:null!=a?a.opacity:void 0,strokeWeight:null!=a?a.weight:void 0}),e.forEach(e.extend(n,{clickable:!0,draggable:!1,editable:!1,"static":!1,fit:!1,visible:!0,zIndex:0,icons:[]}),function(t){return function(n,o){var a;return a=i?i[o]:t.scopeOrModelVal(o,t.scope,r),e.isUndefined(a)?s[o]=n:s[o]=r[o]}}(this)),s["static"]&&(s.editable=!1),s):void o.error("this.map not defined in CommonOptionsBuilder can not buildOpts"):void o.error("this.scope not defined in CommonOptionsBuilder can not buildOpts")},r.prototype.watchProps=function(t){return null==t&&(t=this.props),t.forEach(function(t){return function(e){if(null!=t.attrs[e]||null!=t.attrs[null!=e?e.prop:void 0])return(null!=e?e.isColl:void 0)?t.scope.$watchCollection(e.prop,t.setMyOptions):t.scope.$watch(e,t.setMyOptions)}}(this))},r}(r)}])}.call(this),function(){var t=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.options.builders").factory("uiGmapPolylineOptionsBuilder",["uiGmapCommonOptionsBuilder",function(e){var i;return i=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.buildOpts=function(t,e){return i.__super__.buildOpts.call(this,{path:t},e,{geodesic:!1})},i}(e)}]).factory("uiGmapShapeOptionsBuilder",["uiGmapCommonOptionsBuilder",function(i){var n;return n=function(i){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,i),n.prototype.buildOpts=function(t,i,o){var r,s;return s=this.getCorrectModel(this.scope),r=i?i.fill:this.scopeOrModelVal("fill",this.scope,s),t=e.extend(t,{fillColor:null!=r?r.color:void 0,fillOpacity:null!=r?r.opacity:void 0}),n.__super__.buildOpts.call(this,t,i,o)},n}(i)}]).factory("uiGmapPolygonOptionsBuilder",["uiGmapShapeOptionsBuilder",function(e){var i;return i=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.buildOpts=function(t,e){return i.__super__.buildOpts.call(this,{path:t},e,{geodesic:!1})},i}(e)}]).factory("uiGmapRectangleOptionsBuilder",["uiGmapShapeOptionsBuilder",function(e){var i;return i=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.buildOpts=function(t,e){return i.__super__.buildOpts.call(this,{bounds:t},e)},i}(e)}]).factory("uiGmapCircleOptionsBuilder",["uiGmapShapeOptionsBuilder",function(e){var i;return i=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.buildOpts=function(t,e,n){return i.__super__.buildOpts.call(this,{center:t,radius:e},n)},i}(e)}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.options").service("uiGmapMarkerOptions",["uiGmapLogger","uiGmapGmapUtil",function(t,i){return _.extend(i,{createOptions:function(t,n,o,r){var s;return null==o&&(o={}),s=e.extend({},o,{position:null!=o.position?o.position:i.getCoords(t),visible:null!=o.visible?o.visible:i.validateCoords(t)}),null==o.icon&&null==n||(s=e.extend(s,{icon:null!=o.icon?o.icon:n})),null!=r&&(s.map=r),s},isLabel:function(t){return null!=t&&(null!=t.labelContent||null!=t.labelAnchor||null!=t.labelClass||null!=t.labelStyle||null!=t.labelVisible)}})}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapBasePolyChildModel",["uiGmapLogger","$timeout","uiGmaparray-sync","uiGmapGmapUtil","uiGmapEventsHelper",function(n,o,r,s,a){return function(n,o){var l;return l=function(n){function l(i){var n,s,l;this.scope=i.scope,this.attrs=i.attrs,this.gMap=i.gMap,this.defaults=i.defaults,this.model=i.model,s=i.gObjectChangeCb,this.isScopeModel=null!=(l=i.isScopeModel)&&l,this.clean=t(this.clean,this),this.isScopeModel&&(this.clonedModel=_.clone(this.model,!0)),this.isDragging=!1,this.internalEvents={dragend:function(t){return function(){return _.defer(function(){return t.isDragging=!1})}}(this),dragstart:function(t){return function(){return t.isDragging=!0}}(this)},n=function(t){return function(){var i;if(!t.isDragging)return t.pathPoints=t.convertPathPoints(t.scope.path),null!=t.gObject&&t.clean(),null!=t.scope.model&&(i=t.scope),t.pathPoints.length>0&&(t.gObject=o(t.buildOpts(t.pathPoints,i))),t.gObject?(r(t.gObject.getPath(),t.scope,"path",function(e){if(t.pathPoints=e,null!=s)return s()}),e.isDefined(t.scope.events)&&e.isObject(t.scope.events)&&(t.listeners=t.model?a.setEvents(t.gObject,t.scope,t.model):a.setEvents(t.gObject,t.scope,t.scope)),t.internalListeners=t.model?a.setEvents(t.gObject,{events:t.internalEvents},t.model):a.setEvents(t.gObject,{events:t.internalEvents},t.scope)):void 0}}(this),n(),this.scope.$watch("path",function(t){return function(e,i){if(!_.isEqual(e,i)||!t.gObject)return n()}}(this),!0),!this.scope["static"]&&e.isDefined(this.scope.editable)&&this.scope.$watch("editable",function(t){return function(e,i){var n;if(e!==i)return e=!t.isFalse(e),null!=(n=t.gObject)?n.setEditable(e):void 0}}(this),!0),e.isDefined(this.scope.draggable)&&this.scope.$watch("draggable",function(t){return function(e,i){var n;if(e!==i)return e=!t.isFalse(e),null!=(n=t.gObject)?n.setDraggable(e):void 0}}(this),!0),e.isDefined(this.scope.visible)&&this.scope.$watch("visible",function(t){return function(e,i){var n;return e!==i&&(e=!t.isFalse(e)),null!=(n=t.gObject)?n.setVisible(e):void 0}}(this),!0),e.isDefined(this.scope.geodesic)&&this.scope.$watch("geodesic",function(t){return function(e,i){var n;if(e!==i)return e=!t.isFalse(e),null!=(n=t.gObject)?n.setOptions(t.buildOpts(t.gObject.getPath())):void 0}}(this),!0),e.isDefined(this.scope.stroke)&&e.isDefined(this.scope.stroke.weight)&&this.scope.$watch("stroke.weight",function(t){return function(e,i){var n;if(e!==i)return null!=(n=t.gObject)?n.setOptions(t.buildOpts(t.gObject.getPath())):void 0}}(this),!0),e.isDefined(this.scope.stroke)&&e.isDefined(this.scope.stroke.color)&&this.scope.$watch("stroke.color",function(t){return function(e,i){var n;if(e!==i)return null!=(n=t.gObject)?n.setOptions(t.buildOpts(t.gObject.getPath())):void 0}}(this),!0),e.isDefined(this.scope.stroke)&&e.isDefined(this.scope.stroke.opacity)&&this.scope.$watch("stroke.opacity",function(t){return function(e,i){var n;if(e!==i)return null!=(n=t.gObject)?n.setOptions(t.buildOpts(t.gObject.getPath())):void 0}}(this),!0),e.isDefined(this.scope.icons)&&this.scope.$watch("icons",function(t){return function(e,i){var n;if(e!==i)return null!=(n=t.gObject)?n.setOptions(t.buildOpts(t.gObject.getPath())):void 0}}(this),!0),this.scope.$on("$destroy",function(t){return function(){return t.clean(),t.scope=null}}(this)),e.isDefined(this.scope.fill)&&e.isDefined(this.scope.fill.color)&&this.scope.$watch("fill.color",function(t){return function(e,i){if(e!==i)return t.gObject.setOptions(t.buildOpts(t.gObject.getPath()))}}(this)),e.isDefined(this.scope.fill)&&e.isDefined(this.scope.fill.opacity)&&this.scope.$watch("fill.opacity",function(t){return function(e,i){if(e!==i)return t.gObject.setOptions(t.buildOpts(t.gObject.getPath()))}}(this)),e.isDefined(this.scope.zIndex)&&this.scope.$watch("zIndex",function(t){return function(e,i){if(e!==i)return t.gObject.setOptions(t.buildOpts(t.gObject.getPath()))}}(this))}return i(l,n),l.include(s),l.prototype.clean=function(){var t;return a.removeEvents(this.listeners),a.removeEvents(this.internalListeners),null!=(t=this.gObject)&&t.setMap(null),this.gObject=null},l}(n)}}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.models.child").factory("uiGmapDrawFreeHandChildModel",["uiGmapLogger","$q",function(t,e){var i,n;return i=function(t,e,i){var n,o;o=new google.maps.Polyline({map:t,clickable:!1}),n=google.maps.event.addListener(t,"mousemove",function(t){return o.getPath().push(t.latLng)}),google.maps.event.addListenerOnce(t,"mouseup",function(r){var s;return google.maps.event.removeListener(n),s=o.getPath(),o.setMap(null),e.push(new google.maps.Polygon({map:t,path:s})),o=null,google.maps.event.clearListeners(t.getDiv(),"mousedown"),i()})},n=function(n,o){var r,s;return this.map=n,r=function(e){return function(){var i;return i={draggable:!1,disableDefaultUI:!0,scrollwheel:!1,disableDoubleClickZoom:!1},t.info("disabling map move"),e.map.setOptions(i)}}(this),s=function(t){return function(){var e,i;return e={draggable:!0,disableDefaultUI:!1,scrollwheel:!0,disableDoubleClickZoom:!0},null!=(i=t.deferred)&&i.resolve(),_.defer(function(){return t.map.setOptions(_.extend(e,o.options))})}}(this),this.engage=function(n){return function(o){return n.polys=o,n.deferred=e.defer(),r(),t.info("DrawFreeHandChildModel is engaged (drawing)."),google.maps.event.addDomListener(n.map.getDiv(),"mousedown",function(t){return i(n.map,n.polys,s)}),n.deferred.promise}}(this),this}}])}.call(this),function(){var i=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function i(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},o={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.models.child").factory("uiGmapMarkerChildModel",["uiGmapModelKey","uiGmapGmapUtil","uiGmapLogger","uiGmapEventsHelper","uiGmapPropertyAction","uiGmapMarkerOptions","uiGmapIMarker","uiGmapMarkerManager","uiGmapPromise",function(o,r,s,a,l,u,p,h,c){var d;return d=function(o){function d(t){this.internalEvents=i(this.internalEvents,this),this.setLabelOptions=i(this.setLabelOptions,this),this.setOptions=i(this.setOptions,this),this.setIcon=i(this.setIcon,this),this.setCoords=i(this.setCoords,this),this.isNotValid=i(this.isNotValid,this),this.maybeSetScopeValue=i(this.maybeSetScopeValue,this),this.createMarker=i(this.createMarker,this),this.setMyScope=i(this.setMyScope,this),this.updateModel=i(this.updateModel,this),this.handleModelChanges=i(this.handleModelChanges,this),this.destroy=i(this.destroy,this);var e,n,o,r,a,u,p;p=t.scope,this.model=t.model,this.keys=t.keys,this.gMap=t.gMap,this.defaults=null!=(n=t.defaults)?n:{},this.doClick=t.doClick,this.gManager=t.gManager,this.doDrawSelf=null==(o=t.doDrawSelf)||o,this.trackModel=null==(r=t.trackModel)||r,this.needRedraw=null!=(a=t.needRedraw)&&a,this.isScopeModel=null!=(u=t.isScopeModel)&&u,this.isScopeModel&&(this.clonedModel=_.clone(this.model,!0)),this.deferred=c.defer(),_.each(this.keys,function(t){return function(e,i){var n;if(n=t.keys[i],null!=n&&!_.isFunction(n)&&_.isString(n))return t[i+"Key"]=n}}(this)),this.idKey=this.idKeyKey||"id",null!=this.model[this.idKey]&&(this.id=this.model[this.idKey]),d.__super__.constructor.call(this,p),this.scope.getGMarker=function(t){return function(){return t.gObject}}(this),this.firstTime=!0,this.trackModel?(this.scope.model=this.model,this.scope.$watch("model",function(t){return function(e,i){if(e!==i)return t.handleModelChanges(e,i)}}(this),!0)):(e=new l(function(t){return function(e){if(_.isFunction(e)&&(e="all"),!t.firstTime)return t.setMyScope(e,p)}}(this),(!1)),_.each(this.keys,function(t,i){return p.$watch(i,e.sic(i),!0)})),this.scope.$on("$destroy",function(t){return function(){return g(t)}}(this)),this.createMarker(this.model),s.info(this)}var g;return n(d,o),d.include(r),d.include(a),d.include(u),g=function(t){if(null!=(null!=t?t.gObject:void 0)&&(t.removeEvents(t.externalListeners),t.removeEvents(t.internalListeners),null!=t?t.gObject:void 0))return t.removeFromManager&&t.gManager.remove(t.gObject),t.gObject.setMap(null),t.gObject=null},d.prototype.destroy=function(t){return null==t&&(t=!0),this.removeFromManager=t,this.scope.$destroy()},d.prototype.handleModelChanges=function(t,e){var i,n,o;if(i=this.getChanges(t,e,p.keys),!this.firstTime)return n=0,o=_.keys(i).length,_.each(i,function(i){return function(r,s){var a;return n+=1,a=o===n,i.setMyScope(s,t,e,!1,!0,a),i.needRedraw=!0}}(this))},d.prototype.updateModel=function(t){return this.isScopeModel&&(this.clonedModel=_.clone(t,!0)),this.setMyScope("all",t,this.model)},d.prototype.renderGMarker=function(e,i){var n,o,r;if(null==e&&(e=!0),n=this.getProp("coords",this.scope,this.model),null!=(null!=(r=this.gManager)?r.isSpiderfied:void 0)&&(o=this.gManager.isSpiderfied()),null!=n){if(!this.validateCoords(n))return void s.debug("MarkerChild does not have coords yet. They may be defined later.");if(null!=i&&i(),e&&this.gObject&&this.gManager.add(this.gObject),o)return this.gManager.markerSpiderfier.spiderListener(this.gObject,t.event)}else if(e&&this.gObject)return this.gManager.remove(this.gObject)},d.prototype.setMyScope=function(t,e,i,n,o){var r;switch(null==i&&(i=void 0),null==n&&(n=!1),null==o&&(o=!0),null==e?e=this.model:this.model=e,this.gObject||(this.setOptions(this.scope,o),r=!0),t){case"all":return _.each(this.keys,function(t){return function(r,s){return t.setMyScope(s,e,i,n,o)}}(this));case"icon":return this.maybeSetScopeValue({gSetter:this.setIcon,doDraw:o});case"coords":return this.maybeSetScopeValue({gSetter:this.setCoords,doDraw:o});case"options":if(!r)return this.createMarker(e,i,n,o)}},d.prototype.createMarker=function(t,e,i,n){return null==e&&(e=void 0),null==i&&(i=!1),null==n&&(n=!0),this.maybeSetScopeValue({gSetter:this.setOptions,doDraw:n}),this.firstTime=!1},d.prototype.maybeSetScopeValue=function(t){var e,i,n;if(i=t.gSetter,e=null==(n=t.doDraw)||n,null!=i&&i(this.scope,e),this.doDrawSelf&&e)return this.gManager.draw()},d.prototype.isNotValid=function(t,e){var i,n;return null==e&&(e=!0),n=!!e&&void 0===this.gObject,i=!this.trackModel&&t.$id!==this.scope.$id,i||n},d.prototype.setCoords=function(t,e){if(null==e&&(e=!0),!this.isNotValid(t)&&null!=this.gObject)return this.renderGMarker(e,function(e){return function(){var i,n,o;if(n=e.getProp("coords",t,e.model),i=e.getCoords(n),o=e.gObject.getPosition(),null==o||null==i||i.lng()!==o.lng()||i.lat()!==o.lat())return e.gObject.setPosition(i),e.gObject.setVisible(e.validateCoords(n))}}(this))},d.prototype.setIcon=function(t,e){if(null==e&&(e=!0),!this.isNotValid(t)&&null!=this.gObject)return this.renderGMarker(e,function(e){return function(){var i,n,o;if(o=e.gObject.getIcon(),n=e.getProp("icon",t,e.model),o!==n)return e.gObject.setIcon(n),i=e.getProp("coords",t,e.model),e.gObject.setPosition(e.getCoords(i)),e.gObject.setVisible(e.validateCoords(i))}}(this))},d.prototype.setOptions=function(t,e){var i;if(null==e&&(e=!0),!this.isNotValid(t,!1)){if(this.renderGMarker(e,function(e){return function(){var i,n,o;if(n=e.getProp("coords",t,e.model),o=e.getProp("icon",t,e.model),i=e.getProp("options",t,e.model),e.opts=e.createOptions(n,o,i),e.isLabel(e.gObject)!==e.isLabel(e.opts)&&null!=e.gObject&&(e.gManager.remove(e.gObject),e.gObject=void 0),null!=e.gObject&&e.gObject.setOptions(e.setLabelOptions(e.opts)),e.gObject||(e.isLabel(e.opts)?e.gObject=new MarkerWithLabel(e.setLabelOptions(e.opts)):e.opts.content?(e.gObject=new RichMarker(e.opts),e.gObject.getIcon=e.gObject.getContent,e.gObject.setIcon=e.gObject.setContent):e.gObject=new google.maps.Marker(e.opts),_.extend(e.gObject,{model:e.model})),e.externalListeners&&e.removeEvents(e.externalListeners),e.internalListeners&&e.removeEvents(e.internalListeners),e.externalListeners=e.setEvents(e.gObject,e.scope,e.model,["dragend"]),e.internalListeners=e.setEvents(e.gObject,{events:e.internalEvents(),$evalAsync:function(){}},e.model),null!=e.id)return e.gObject.key=e.id}}(this)),this.gObject&&(this.gObject.getMap()||this.gManager.type!==h.type))this.deferred.resolve(this.gObject);else{if(!this.gObject)return this.deferred.reject("gObject is null");null!=(i=this.gObject)&&i.getMap()&&this.gManager.type===h.type||(s.debug("gObject has no map yet"),this.deferred.resolve(this.gObject))}return this.model[this.fitKey]?this.gManager.fit():void 0}},d.prototype.setLabelOptions=function(t){return t.labelAnchor&&(t.labelAnchor=this.getLabelPositionPoint(t.labelAnchor)),t},d.prototype.internalEvents=function(){return{dragend:function(t){return function(e,i,n,o){var r,s,a;return s=t.trackModel?t.scope.model:t.model,a=t.setCoordsFromEvent(t.modelOrKey(s,t.coordsKey),t.gObject.getPosition()),s=t.setVal(n,t.coordsKey,a),r=t.scope.events,null!=(null!=r?r.dragend:void 0)&&r.dragend(e,i,s,o),t.scope.$apply()}}(this),click:function(t){return function(i,n,o,r){var s;if(s=t.getProp("click",t.scope,t.model),t.doClick&&e.isFunction(s))return t.scope.$evalAsync(s(i,n,t.model,r))}}(this)}},d}(o)}])}.call(this),function(){var t=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapPolygonChildModel",["uiGmapBasePolyChildModel","uiGmapPolygonOptionsBuilder",function(e,i){var n,o,r;return r=function(t){return new google.maps.Polygon(t)},o=new e(i,r),n=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i}(o)}])}.call(this),function(){var t=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapPolylineChildModel",["uiGmapBasePolyChildModel","uiGmapPolylineOptionsBuilder",function(e,i){var n,o,r;return r=function(t){return new google.maps.Polyline(t)},o=e(i,r),n=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i}(o)}])}.call(this),function(){var i=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function i(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},o={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.models.child").factory("uiGmapWindowChildModel",["uiGmapBaseObject","uiGmapGmapUtil","uiGmapLogger","$compile","$http","$templateCache","uiGmapChromeFixes","uiGmapEventsHelper",function(o,r,s,a,l,u,p,h){var c;return c=function(o){function c(t){this.updateModel=i(this.updateModel,this),this.destroy=i(this.destroy,this),this.remove=i(this.remove,this),this.getLatestPosition=i(this.getLatestPosition,this),this.hideWindow=i(this.hideWindow,this),this.showWindow=i(this.showWindow,this),this.handleClick=i(this.handleClick,this),this.watchOptions=i(this.watchOptions,this),this.watchCoords=i(this.watchCoords,this),this.createGWin=i(this.createGWin,this),this.watchElement=i(this.watchElement,this),this.watchAndDoShow=i(this.watchAndDoShow,this),this.doShow=i(this.doShow,this);var e,n,o,r,a;this.model=null!=(n=t.model)?n:{},this.scope=t.scope,this.opts=t.opts,this.isIconVisibleOnClick=t.isIconVisibleOnClick,this.gMap=t.gMap,this.markerScope=t.markerScope,this.element=t.element,this.needToManualDestroy=null!=(o=t.needToManualDestroy)&&o,this.markerIsVisibleAfterWindowClose=null==(r=t.markerIsVisibleAfterWindowClose)||r,this.isScopeModel=null!=(a=t.isScopeModel)&&a,this.isScopeModel&&(this.clonedModel=_.clone(this.model,!0)),this.getGmarker=function(){var t,e;if(null!=(null!=(t=this.markerScope)?t.getGMarker:void 0))return null!=(e=this.markerScope)?e.getGMarker():void 0},this.listeners=[],this.createGWin(),e=this.getGmarker(),null!=e&&e.setClickable(!0),this.watchElement(),this.watchOptions(),this.watchCoords(),this.watchAndDoShow(),this.scope.$on("$destroy",function(t){return function(){return t.destroy()}}(this)),s.info(this)}return n(c,o),c.include(r),c.include(h),c.prototype.doShow=function(t){return this.scope.show===!0||t?this.showWindow():this.hideWindow()},c.prototype.watchAndDoShow=function(){return null!=this.model.show&&(this.scope.show=this.model.show),this.scope.$watch("show",this.doShow,!0),this.doShow()},c.prototype.watchElement=function(){return this.scope.$watch(function(t){return function(){var e,i;if(t.element||t.html)return t.html!==t.element.html()&&t.gObject?(null!=(e=t.opts)&&(e.content=void 0),i=t.gObject.isOpen(),t.remove(),t.createGWin(i)):void 0}}(this))},c.prototype.createGWin=function(e){var i,n,o,r,s;if(null==e&&(e=!1),o=this.getGmarker(),n={},null!=this.opts&&(this.scope.coords&&(this.opts.position=this.getCoords(this.scope.coords)),n=this.opts),this.element&&(this.html=_.isObject(this.element)?this.element.html():this.element),i=this.scope.options?this.scope.options:n,this.opts=this.createWindowOptions(o,this.markerScope||this.scope,this.html,i),null!=this.opts)return this.gObject||(this.opts.boxClass&&t.InfoBox&&"function"==typeof t.InfoBox?this.gObject=new t.InfoBox(this.opts):this.gObject=new google.maps.InfoWindow(this.opts),this.listeners.push(google.maps.event.addListener(this.gObject,"domready",function(){return p.maybeRepaint(this.content)})),this.listeners.push(google.maps.event.addListener(this.gObject,"closeclick",function(t){return function(){return o&&(o.setAnimation(t.oldMarkerAnimation),t.markerIsVisibleAfterWindowClose&&_.delay(function(){return o.setVisible(!1),o.setVisible(t.markerIsVisibleAfterWindowClose)},250)),t.gObject.close(),t.model.show=!1,null!=t.scope.closeClick?t.scope.$evalAsync(t.scope.closeClick()):t.scope.$evalAsync()}}(this)))),this.gObject.setContent(this.opts.content),this.handleClick((null!=(r=this.scope)&&null!=(s=r.options)?s.forceClick:void 0)||e),this.doShow(this.gObject.isOpen())},c.prototype.watchCoords=function(){var t;return t=null!=this.markerScope?this.markerScope:this.scope,t.$watch("coords",function(t){return function(e,i){var n;if(e!==i){if(null==e)t.hideWindow();else if(!t.validateCoords(e))return void s.error("WindowChildMarker cannot render marker as scope.coords as no position on marker: "+JSON.stringify(t.model));if(n=t.getCoords(e),t.doShow(),t.gObject.setPosition(n),t.opts)return t.opts.position=n}}}(this),!0)},c.prototype.watchOptions=function(){return this.scope.$watch("options",function(t){return function(e,i){if(e!==i&&(t.opts=e,null!=t.gObject)){if(t.gObject.setOptions(t.opts),null!=t.opts.visible&&t.opts.visible)return t.showWindow();if(null!=t.opts.visible)return t.hideWindow()}}}(this),!0)},c.prototype.handleClick=function(t){var e,i;if(null!=this.gObject)return i=this.getGmarker(),e=function(t){return function(){if(null==t.gObject&&t.createGWin(),t.showWindow(),null!=i)return t.initialMarkerVisibility=i.getVisible(),t.oldMarkerAnimation=i.getAnimation(),i.setVisible(t.isIconVisibleOnClick)}}(this),t&&e(),i?this.listeners=this.listeners.concat(this.setEvents(i,{events:{click:e}},this.model)):void 0},c.prototype.showWindow=function(){var t,i,n;if(null!=this.gObject)return n=null,i=function(t){return function(){var e,i,n;if(!t.gObject.isOpen()){if(i=t.getGmarker(),null!=t.gObject&&null!=t.gObject.getPosition&&(n=t.gObject.getPosition()),i&&(n=i.getPosition()),!n)return;if(t.gObject.open(t.gMap,i),e=t.gObject.isOpen(),t.model.show!==e)return t.model.show=e}}}(this),this.scope.templateUrl?l.get(this.scope.templateUrl,{cache:u}).then(function(t){return function(o){var r;return n=t.scope.$new(),e.isDefined(t.scope.templateParameter)&&(n.parameter=t.scope.templateParameter),r=a(o.data)(n),t.gObject.setContent(r[0]),i()}}(this)):this.scope.template?(n=this.scope.$new(),e.isDefined(this.scope.templateParameter)&&(n.parameter=this.scope.templateParameter),t=a(this.scope.template)(n),this.gObject.setContent(t[0]),i()):i(),this.scope.$on("destroy",function(){return n.$destroy()})},c.prototype.hideWindow=function(){if(null!=this.gObject&&this.gObject.isOpen())return this.gObject.close()},c.prototype.getLatestPosition=function(t){var e;return e=this.getGmarker(),null==this.gObject||null==e||t?t?this.gObject.setPosition(t):void 0:this.gObject.setPosition(e.getPosition())},c.prototype.remove=function(){return this.hideWindow(),this.removeEvents(this.listeners),this.listeners.length=0,delete this.gObject,delete this.opts},c.prototype.destroy=function(t){var e;if(null==t&&(t=!1),this.remove(),null!=this.scope&&!(null!=(e=this.scope)?e.$$destroyed:void 0)&&(this.needToManualDestroy||t))return this.scope.$destroy()},c.prototype.updateModel=function(t){
return this.isScopeModel&&(this.clonedModel=_.clone(t,!0)),_.extend(this.model,this.clonedModel||t)},c}(o)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapBasePolysParentModel",["$timeout","uiGmapLogger","uiGmapModelKey","uiGmapModelsWatcher","uiGmapPropMap","uiGmap_async","uiGmapPromise","uiGmapFitHelper",function(n,o,r,s,a,l,u,p){return function(n,h,c){var d;return d=function(r){function d(e,i,r,s,l){this.element=i,this.attrs=r,this.gMap=s,this.defaults=l,this.maybeFit=t(this.maybeFit,this),this.createChild=t(this.createChild,this),this.pieceMeal=t(this.pieceMeal,this),this.createAllNew=t(this.createAllNew,this),this.watchIdKey=t(this.watchIdKey,this),this.createChildScopes=t(this.createChildScopes,this),this.watchDestroy=t(this.watchDestroy,this),this.onDestroy=t(this.onDestroy,this),this.rebuildAll=t(this.rebuildAll,this),this.doINeedToWipe=t(this.doINeedToWipe,this),this.watchModels=t(this.watchModels,this),d.__super__.constructor.call(this,e),this["interface"]=n,this.$log=o,this.plurals=new a,_.each(n.scopeKeys,function(t){return function(e){return t[e+"Key"]=void 0}}(this)),this.models=void 0,this.firstTime=!0,this.$log.info(this),this.createChildScopes()}return i(d,r),d.include(s),d.prototype.watchModels=function(t){return t.$watch("models",function(e){return function(i,n){if(i!==n)return e.doINeedToWipe(i)||t.doRebuildAll?e.rebuildAll(t,!0,!0):e.createChildScopes(!1)}}(this),!0)},d.prototype.doINeedToWipe=function(t){var e;return e=null==t||0===t.length,this.plurals.length>0&&e},d.prototype.rebuildAll=function(t,e,i){return this.onDestroy(i).then(function(t){return function(){if(e)return t.createChildScopes()}}(this))},d.prototype.onDestroy=function(){return d.__super__.onDestroy.call(this,this.scope),l.promiseLock(this,u.promiseTypes["delete"],void 0,void 0,function(t){return function(){return l.each(t.plurals.values(),function(t){return t.destroy(!0)},l.chunkSizeFrom(t.scope.cleanchunk,!1)).then(function(){var e;return null!=(e=t.plurals)?e.removeAll():void 0})}}(this))},d.prototype.watchDestroy=function(t){return t.$on("$destroy",function(e){return function(){return e.rebuildAll(t,!1,!0)}}(this))},d.prototype.createChildScopes=function(t){return null==t&&(t=!0),e.isUndefined(this.scope.models)?void this.$log.error("No models to create "+c+"s from! I Need direct models!"):null!=this.gMap&&null!=this.scope.models?(this.watchIdKey(this.scope),t?this.createAllNew(this.scope,!1):this.pieceMeal(this.scope,!1)):void 0},d.prototype.watchIdKey=function(t){return this.setIdKey(t),t.$watch("idKey",function(e){return function(i,n){if(i!==n&&null==i)return e.idKey=i,e.rebuildAll(t,!0,!0)}}(this))},d.prototype.createAllNew=function(t,e){var i;if(null==e&&(e=!1),this.models=t.models,this.firstTime&&(this.watchModels(t),this.watchDestroy(t)),!this.didQueueInitPromise(this,t))return i=null,l.promiseLock(this,u.promiseTypes.create,"createAllNew",function(t){return i=t},function(e){return function(){return l.map(t.models,function(t){var n;return n=e.createChild(t,e.gMap),i&&(o.debug("createNew should fall through safely"),n.isEnabled=!1),n.pathPoints.getArray()},l.chunkSizeFrom(t.chunk)).then(function(t){return e.maybeFit(t),e.firstTime=!1})}}(this))},d.prototype.pieceMeal=function(t,e){var i,n;if(null==e&&(e=!0),!t.$$destroyed)return i=null,n=null,this.models=t.models,null!=t&&this.modelsLength()&&this.plurals.length?l.promiseLock(this,u.promiseTypes.update,"pieceMeal",function(t){return i=t},function(e){return function(){return u.promise(function(){return e.figureOutState(e.idKey,t,e.plurals,e.modelKeyComparison)}).then(function(o){return n=o,n.updates.length&&l.each(n.updates,function(t){return _.extend(t.child.scope,t.model),t.child.model=t.model}),l.each(n.removals,function(t){if(null!=t)return t.destroy(),e.plurals.remove(t.model[e.idKey]),i},l.chunkSizeFrom(t.chunk))}).then(function(){return l.each(n.adds,function(t){return i&&o.debug("pieceMeal should fall through safely"),e.createChild(t,e.gMap),i},l.chunkSizeFrom(t.chunk)).then(function(){return e.maybeFit()})})}}(this)):(this.inProgress=!1,this.rebuildAll(this.scope,!0,!0))},d.prototype.createChild=function(t,e){var i,o;return o=this.scope.$new(!1),this.setChildScope(n.scopeKeys,o,t),o.$watch("model",function(t){return function(e,i){if(e!==i)return t.setChildScope(o,e)}}(this),!0),o["static"]=this.scope["static"],i=new h({isScopeModel:!0,scope:o,attrs:this.attrs,gMap:e,defaults:this.defaults,model:t,gObjectChangeCb:function(t){return function(){return t.maybeFit()}}(this)}),null==t[this.idKey]?void this.$log.error(c+" model has no id to assign a child to.\nThis is required for performance. Please assign id,\nor redirect id to a different key."):(this.plurals.put(t[this.idKey],i),i)},d.prototype.maybeFit=function(t){if(null==t&&(t=this.plurals.map(function(t){return t.pathPoints})),this.scope.fit)return t=_.flatten(t),p.fit(t,this.gMap)},d}(r)}}])}.call(this),function(){var t=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapCircleParentModel",["uiGmapLogger","$timeout","uiGmapGmapUtil","uiGmapEventsHelper","uiGmapCircleOptionsBuilder",function(i,n,o,r,s){var a,l;return l=function(t,e){return t.settingFromDirective=!0,e(),n(function(){return t.settingFromDirective=!1})},a=function(n){function s(t,n,r,s,a){var u,p,h;this.attrs=r,this.gMap=s,this.DEFAULTS=a,this.scope=t,h=null,u=function(t){return function(){if(h=null,null!=t.listeners)return t.removeEvents(t.listeners),t.listeners=void 0}}(this),p=new google.maps.Circle(this.buildOpts(o.getCoords(t.center),t.radius)),this.setMyOptions=function(e){return function(i,n){if(!t.settingFromDirective)return!_.isEqual(i,n)||i!==n||null!=i&&null!=n&&i.coordinates!==n.coordinates?p.setOptions(e.buildOpts(o.getCoords(t.center),t.radius)):void 0}}(this),this.props=this.props.concat([{prop:"center",isColl:!0},{prop:"fill",isColl:!0},"radius","zIndex"]),this.watchProps(),null!=this.scope.control&&(this.scope.control.getCircle=function(){return p}),u(),this.listeners=this.setEvents(p,t,t,["radius_changed"])||[],this.listeners.push(google.maps.event.addListener(p,"radius_changed",function(){var i,n;if(i=p.getRadius(),i!==h)return h=i,n=function(){return l(t,function(){var e,n;if(i!==t.radius&&(t.radius=i),(null!=(e=t.events)?e.radius_changed:void 0)&&_.isFunction(null!=(n=t.events)?n.radius_changed:void 0))return t.events.radius_changed(p,"radius_changed",t,arguments)})},e.mock?n():t.$evalAsync(function(){return n()})})),this.listeners.push(google.maps.event.addListener(p,"center_changed",function(){return t.$evalAsync(function(){return l(t,function(){return e.isDefined(t.center.type)?(t.center.coordinates[1]=p.getCenter().lat(),t.center.coordinates[0]=p.getCenter().lng()):(t.center.latitude=p.getCenter().lat(),t.center.longitude=p.getCenter().lng())})})})),t.$on("$destroy",function(){return u(),p.setMap(null)}),i.info(this)}return t(s,n),s.include(o),s.include(r),s}(s)}])}.call(this),function(){var t=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapDrawingManagerParentModel",["uiGmapLogger","$timeout","uiGmapBaseObject","uiGmapEventsHelper",function(e,i,n,o){var r;return r=function(e){function i(t,e,i,n){var o,r;this.scope=t,this.attrs=i,this.map=n,o=new google.maps.drawing.DrawingManager(this.scope.options),o.setMap(this.map),r=void 0,null!=this.scope.control&&(this.scope.control.getDrawingManager=function(){return o}),!this.scope["static"]&&this.scope.options&&this.scope.$watch("options",function(t){return null!=o?o.setOptions(t):void 0},!0),null!=this.scope.events&&(r=this.setEvents(o,this.scope,this.scope),this.scope.$watch("events",function(t){return function(e,i){if(!_.isEqual(e,i))return null!=r&&t.removeEvents(r),r=t.setEvents(o,t.scope,t.scope)}}(this))),this.scope.$on("$destroy",function(t){return function(){return null!=r&&t.removeEvents(r),o.setMap(null),o=null}}(this))}return t(i,e),i.include(o),i}(n)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapIMarkerParentModel",["uiGmapModelKey","uiGmapLogger",function(n,o){var r;return r=function(n){function r(i,n,s,a){if(this.scope=i,this.element=n,this.attrs=s,this.map=a,this.onWatch=t(this.onWatch,this),this.watch=t(this.watch,this),this.validateScope=t(this.validateScope,this),r.__super__.constructor.call(this,this.scope),this.$log=o,!this.validateScope(this.scope))throw new String("Unable to construct IMarkerParentModel due to invalid scope");this.doClick=e.isDefined(this.attrs.click),null!=this.scope.options&&(this.DEFAULTS=this.scope.options),this.watch("coords",this.scope),this.watch("icon",this.scope),this.watch("options",this.scope),this.scope.$on("$destroy",function(t){return function(){return t.onDestroy(t.scope)}}(this))}return i(r,n),r.prototype.DEFAULTS={},r.prototype.validateScope=function(t){var e;return null==t?(this.$log.error(this.constructor.name+": invalid scope used"),!1):(e=null!=t.coords,e?e:(this.$log.error(this.constructor.name+": no valid coords attribute found"),!1))},r.prototype.watch=function(t,e,i){return null==i&&(i=!0),e.$watch(t,function(i){return function(n,o){if(!_.isEqual(n,o))return i.onWatch(t,e,n,o)}}(this),i)},r.prototype.onWatch=function(t,e,i,n){},r}(n)}])}.call(this),function(){var t=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapIWindowParentModel",["uiGmapModelKey","uiGmapGmapUtil","uiGmapLogger",function(e,i,n){var o;return o=function(e){function o(t,e,i,r,s,a,l,u){o.__super__.constructor.call(this,t),this.$log=n,this.$timeout=s,this.$compile=a,this.$http=l,this.$templateCache=u,this.DEFAULTS={},null!=t.options&&(this.DEFAULTS=t.options)}return t(o,e),o.include(i),o.prototype.getItem=function(t,e,i){return"models"===e?t[e][i]:t[e].get(i)},o}(e)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapLayerParentModel",["uiGmapBaseObject","uiGmapLogger","$timeout",function(n,o,r){var s;return s=function(n){function r(i,n,r,s,a,l){return this.scope=i,this.element=n,this.attrs=r,this.gMap=s,this.onLayerCreated=null!=a?a:void 0,this.$log=null!=l?l:o,this.createGoogleLayer=t(this.createGoogleLayer,this),null==this.attrs.type?void this.$log.info("type attribute for the layer directive is mandatory. Layer creation aborted!!"):(this.createGoogleLayer(),this.doShow=!0,e.isDefined(this.attrs.show)&&(this.doShow=this.scope.show),this.doShow&&null!=this.gMap&&this.gObject.setMap(this.gMap),this.scope.$watch("show",function(t){return function(e,i){if(e!==i)return t.doShow=e,e?t.gObject.setMap(t.gMap):t.gObject.setMap(null)}}(this),!0),this.scope.$watch("options",function(t){return function(e,i){if(e!==i&&t.doShow)return t.gObject.setOptions(e)}}(this),!0),void this.scope.$on("$destroy",function(t){return function(){return t.gObject.setMap(null)}}(this)))}return i(r,n),r.prototype.createGoogleLayer=function(){var t;if(null==this.attrs.options?this.gObject=void 0===this.attrs.namespace?new google.maps[this.attrs.type]:new google.maps[this.attrs.namespace][this.attrs.type]:this.gObject=void 0===this.attrs.namespace?new google.maps[this.attrs.type](this.scope.options):new google.maps[this.attrs.namespace][this.attrs.type](this.scope.options),null!=this.gObject&&this.doShow&&this.gObject.setMap(this.gMap),null!=this.gObject&&null!=this.onLayerCreated)return"function"==typeof(t=this.onLayerCreated(this.scope,this.gObject))?t(this.gObject):void 0},r}(n)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapMapTypeParentModel",["uiGmapBaseObject","uiGmapLogger",function(n,o){var r;return r=function(n){function r(i,n,r,s,a){return this.scope=i,this.element=n,this.attrs=r,this.gMap=s,this.$log=null!=a?a:o,this.hideOverlay=t(this.hideOverlay,this),this.showOverlay=t(this.showOverlay,this),this.refreshMapType=t(this.refreshMapType,this),this.createMapType=t(this.createMapType,this),null==this.attrs.options?void this.$log.info("options attribute for the map-type directive is mandatory. Map type creation aborted!!"):(this.id=this.gMap.overlayMapTypesCount=this.gMap.overlayMapTypesCount+1||0,this.doShow=!0,this.createMapType(),e.isDefined(this.attrs.show)&&(this.doShow=this.scope.show),this.doShow&&null!=this.gMap&&this.showOverlay(),this.scope.$watch("show",function(t){return function(e,i){if(e!==i)return t.doShow=e,e?t.showOverlay():t.hideOverlay()}}(this),!0),this.scope.$watchCollection("options",function(t){return function(e,i){var n,o;if(!_.isEqual(e,i)&&(o=["tileSize","maxZoom","minZoom","name","alt"],n=_.some(o,function(t){return!i||!e||!_.isEqual(e[t],i[t])})))return t.refreshMapType()}}(this)),e.isDefined(this.attrs.refresh)&&this.scope.$watch("refresh",function(t){return function(e,i){if(!_.isEqual(e,i))return t.refreshMapType()}}(this),!0),void this.scope.$on("$destroy",function(t){return function(){return t.hideOverlay(),t.mapType=null}}(this)))}return i(r,n),r.prototype.createMapType=function(){if(null!=this.scope.options.getTile)this.mapType=this.scope.options;else{if(null==this.scope.options.getTileUrl)return void this.$log.info("options should provide either getTile or getTileUrl methods. Map type creation aborted!!");this.mapType=new google.maps.ImageMapType(this.scope.options)}return this.attrs.id&&this.scope.id&&(this.gMap.mapTypes.set(this.scope.id,this.mapType),e.isDefined(this.attrs.show)||(this.doShow=!1)),this.mapType.layerId=this.id},r.prototype.refreshMapType=function(){if(this.hideOverlay(),this.mapType=null,this.createMapType(),this.doShow&&null!=this.gMap)return this.showOverlay()},r.prototype.showOverlay=function(){return this.gMap.overlayMapTypes.push(this.mapType)},r.prototype.hideOverlay=function(){var t;return t=!1,this.gMap.overlayMapTypes.forEach(function(e){return function(i,n){t||i.layerId!==e.id||(t=!0,e.gMap.overlayMapTypes.removeAt(n))}}(this))},r}(n)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapMarkersParentModel",["uiGmapIMarkerParentModel","uiGmapModelsWatcher","uiGmapPropMap","uiGmapMarkerChildModel","uiGmap_async","uiGmapClustererMarkerManager","uiGmapMarkerManager","$timeout","uiGmapIMarker","uiGmapPromise","uiGmapGmapUtil","uiGmapLogger","uiGmapSpiderfierMarkerManager",function(n,o,r,s,a,l,u,p,h,c,d,g,f){var m,v;return v=function(t,e){return e.plurals=new r,e.scope.plurals=e.plurals,e},m=function(n){function p(e,i,n,o){this.maybeExecMappedEvent=t(this.maybeExecMappedEvent,this),this.onDestroy=t(this.onDestroy,this),this.newChildMarker=t(this.newChildMarker,this),this.pieceMeal=t(this.pieceMeal,this),this.rebuildAll=t(this.rebuildAll,this),this.createAllNew=t(this.createAllNew,this),this.bindToTypeEvents=t(this.bindToTypeEvents,this),this.createChildScopes=t(this.createChildScopes,this),this.validateScope=t(this.validateScope,this),this.onWatch=t(this.onWatch,this),p.__super__.constructor.call(this,e,i,n,o),this["interface"]=h,v(new r,this),this.scope.pluralsUpdate={updateCtr:0},this.$log.info(this),this.doRebuildAll=null!=this.scope.doRebuildAll&&this.scope.doRebuildAll,this.setIdKey(this.scope),this.scope.$watch("doRebuildAll",function(t){return function(e,i){if(e!==i)return t.doRebuildAll=e}}(this)),this.modelsLength()||(this.modelsRendered=!1),this.scope.$watch("models",function(t){return function(e,i){if(!_.isEqual(e,i)||!t.modelsRendered){if(0===e.length&&0===i.length)return;return t.modelsRendered=!0,t.onWatch("models",t.scope,e,i)}}}(this),!this.isTrue(n.modelsbyref)),this.watch("doCluster",this.scope),this.watch("type",this.scope),this.watch("clusterOptions",this.scope),this.watch("clusterEvents",this.scope),this.watch("typeOptions",this.scope),this.watch("typeEvents",this.scope),this.watch("fit",this.scope),this.watch("idKey",this.scope),this.gManager=void 0,this.createAllNew(this.scope)}return i(p,n),p.include(d),p.include(o),p.prototype.onWatch=function(t,e,i,n){return"idKey"===t&&i!==n&&(this.idKey=i),this.doRebuildAll||"doCluster"===t||"type"===t?this.rebuildAll(e):this.pieceMeal(e)},p.prototype.validateScope=function(t){var i;return i=e.isUndefined(t.models)||void 0===t.models,i&&this.$log.error(this.constructor.name+": no valid models attribute found"),p.__super__.validateScope.call(this,t)||i},p.prototype.createChildScopes=function(t){if(null!=this.gMap&&null!=this.scope.models)return t?this.createAllNew(this.scope,!1):this.pieceMeal(this.scope,!1)},p.prototype.bindToTypeEvents=function(t,i){var n,o;return null==i&&(i=["click","mouseout","mouseover"]),o=this,this.origTypeEvents?e.extend(t,this.origTypeEvents):(this.origTypeEvents={},_.each(i,function(e){return function(i){return e.origTypeEvents[i]=null!=t?t[i]:void 0}}(this))),n={},_.each(i,function(t){return n[t]=function(e){return o.maybeExecMappedEvent(e,t)}}),e.extend(t,n)},p.prototype.createAllNew=function(t){var e,i,n,o;if(null!=this.gManager&&(this.gManager instanceof f&&(e=this.gManager.isSpiderfied()),this.gManager.clear(),delete this.gManager),n=t.typeEvents||t.clusterEvents,o=t.typeOptions||t.clusterOptions,t.doCluster||"cluster"===t.type?(null!=n&&this.bindToTypeEvents(n),this.gManager=new l(this.map,(void 0),o,n)):"spider"===t.type?(null!=n&&this.bindToTypeEvents(n,["spiderfy","unspiderfy"]),this.gManager=new f(this.map,(void 0),o,n,this.scope),e&&this.gManager.spiderfy()):this.gManager=new u(this.map),!this.didQueueInitPromise(this,t))return i=null,a.promiseLock(this,c.promiseTypes.create,"createAllNew",function(t){return i=t},function(e){return function(){return a.each(t.models,function(n){return e.newChildMarker(n,t),i},a.chunkSizeFrom(t.chunk)).then(function(){return e.modelsRendered=!0,t.fit&&e.gManager.fit(),e.gManager.draw(),e.scope.pluralsUpdate.updateCtr+=1},a.chunkSizeFrom(t.chunk))}}(this))},p.prototype.rebuildAll=function(t){var e;if(t.doRebuild||void 0===t.doRebuild)return(null!=(e=this.scope.plurals)?e.length:void 0)?this.onDestroy(t).then(function(e){return function(){return e.createAllNew(t)}}(this)):this.createAllNew(t)},p.prototype.pieceMeal=function(t){var e,i;if(!t.$$destroyed)return e=null,i=null,this.modelsLength()&&this.scope.plurals.length?a.promiseLock(this,c.promiseTypes.update,"pieceMeal",function(t){return e=t},function(n){return function(){return c.promise(function(){return n.figureOutState(n.idKey,t,n.scope.plurals,n.modelKeyComparison)}).then(function(o){return i=o,a.each(i.removals,function(t){if(null!=t)return null!=t.destroy&&t.destroy(),n.scope.plurals.remove(t.id),e},a.chunkSizeFrom(t.chunk))}).then(function(){return a.each(i.adds,function(i){return n.newChildMarker(i,t),e},a.chunkSizeFrom(t.chunk))}).then(function(){return a.each(i.updates,function(t){return n.updateChild(t.child,t.model),e},a.chunkSizeFrom(t.chunk))}).then(function(){return(i.adds.length>0||i.removals.length>0||i.updates.length>0)&&(t.plurals=n.scope.plurals,t.fit&&n.gManager.fit(),n.gManager.draw()),n.scope.pluralsUpdate.updateCtr+=1})}}(this)):(this.inProgress=!1,this.rebuildAll(t))},p.prototype.newChildMarker=function(t,e){var i,n,o;if(!t)throw"model undefined";return null==t[this.idKey]?void this.$log.error("Marker model has no id to assign a child to. This is required for performance. Please assign id, or redirect id to a different key."):(this.$log.info("child",i,"markers",this.scope.markerModels),n=e.$new(!1),n.events=e.events,o={},h.scopeKeys.forEach(function(t){return o[t]=e[t]}),i=new s({scope:n,model:t,keys:o,gMap:this.map,defaults:this.DEFAULTS,doClick:this.doClick,gManager:this.gManager,doDrawSelf:!1,isScopeModel:!0}),this.scope.plurals.put(t[this.idKey],i),i)},p.prototype.onDestroy=function(t){return p.__super__.onDestroy.call(this,t),a.promiseLock(this,c.promiseTypes["delete"],void 0,void 0,function(t){return function(){return a.each(t.scope.plurals.values(),function(t){if(null!=t)return t.destroy(!1)},a.chunkSizeFrom(t.scope.cleanchunk,!1)).then(function(){return null!=t.gManager&&t.gManager.destroy(),t.plurals.removeAll(),t.plurals!==t.scope.plurals&&console.error("plurals out of sync for MarkersParentModel"),t.scope.pluralsUpdate.updateCtr+=1})}}(this))},p.prototype.maybeExecMappedEvent=function(t,e){var i,n;if(!this.scope.$$destroyed)return n=this.scope.typeEvents||this.scope.clusterEvents,_.isFunction(null!=n?n[e]:void 0)&&(i=this.mapTypeToPlurals(t),this.origTypeEvents[e])?this.origTypeEvents[e](i.group,i.mapped):void 0},p.prototype.mapTypeToPlurals=function(t){var e,i,n;return _.isArray(t)?e=t:_.isFunction(t.getMarkers)&&(e=t.getMarkers()),null==e?void g.error("Unable to map event as we cannot find the array group to map"):(i=(null!=(n=this.scope.plurals.values())?n.length:void 0)?e.map(function(t){return function(e){return t.scope.plurals.get(e.key).model}}(this)):[],{cluster:t,mapped:i,group:t})},p.prototype.getItem=function(t,e,i){return"models"===e?t[e][i]:t[e].get(i)},p}(n)}])}.call(this),function(){["Polygon","Polyline"].forEach(function(t){return e.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmap"+t+"sParentModel",["uiGmapBasePolysParentModel","uiGmap"+t+"ChildModel","uiGmapI"+t,function(e,i,n){return e(n,i,t)}])})}.call(this),function(){var t=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapRectangleParentModel",["uiGmapLogger","uiGmapGmapUtil","uiGmapEventsHelper","uiGmapRectangleOptionsBuilder",function(e,i,n,o){var r;return r=function(o){function r(t,i,n,o,r){var s,a,l,u,p,h,c,d,g,f,m;this.scope=t,this.attrs=n,this.gMap=o,this.DEFAULTS=r,s=void 0,u=!1,g=[],d=void 0,p=function(t){return function(){if(t.isTrue(t.attrs.fit))return t.fitMapBounds(t.gMap,s)}}(this),l=function(t){return function(){var i,n,o;return null!=t.scope.bounds&&null!=(null!=(i=t.scope.bounds)?i.sw:void 0)&&null!=(null!=(n=t.scope.bounds)?n.ne:void 0)&&t.validateBoundPoints(t.scope.bounds)?(s=t.convertBoundPoints(t.scope.bounds),e.info("new new bounds created: "+JSON.stringify(s))):null!=t.scope.bounds.getNorthEast&&null!=t.scope.bounds.getSouthWest?s=t.scope.bounds:null!=t.scope.bounds?e.error("Invalid bounds for newValue: "+JSON.stringify(null!=(o=t.scope)?o.bounds:void 0)):void 0}}(this),l(),h=new google.maps.Rectangle(this.buildOpts(s)),e.info("gObject (rectangle) created: "+h),f=!1,m=function(t){return function(){var e,i,n;if(e=h.getBounds(),i=e.getNorthEast(),n=e.getSouthWest(),!f)return t.scope.$evalAsync(function(t){if(null!=t.bounds&&null!=t.bounds.sw&&null!=t.bounds.ne&&(t.bounds.ne={latitude:i.lat(),longitude:i.lng()},t.bounds.sw={latitude:n.lat(),longitude:n.lng()}),null!=t.bounds.getNorthEast&&null!=t.bounds.getSouthWest)return t.bounds=e})}}(this),c=function(t){return function(){return p(),t.removeEvents(g),g.push(google.maps.event.addListener(h,"dragstart",function(){return u=!0})),g.push(google.maps.event.addListener(h,"dragend",function(){return u=!1,m()})),g.push(google.maps.event.addListener(h,"bounds_changed",function(){if(!u)return m()}))}}(this),a=function(t){return function(){return t.removeEvents(g),null!=d&&t.removeEvents(d),h.setMap(null)}}(this),null!=s&&c(),this.scope.$watch("bounds",function(t,e){var i;if(!(_.isEqual(t,e)&&null!=s||u))return f=!0,null==t?void a():(null==s?i=!0:p(),l(),h.setBounds(s),f=!1,i&&null!=s?c():void 0)},!0),this.setMyOptions=function(t){return function(e,i){if(!_.isEqual(e,i)&&null!=s&&null!=e)return h.setOptions(t.buildOpts(s))}}(this),this.props.push("bounds"),this.watchProps(this.props),null!=this.attrs.events&&(d=this.setEvents(h,this.scope,this.scope),this.scope.$watch("events",function(t){return function(e,i){if(!_.isEqual(e,i))return null!=d&&t.removeEvents(d),d=t.setEvents(h,t.scope,t.scope)}}(this))),this.scope.$on("$destroy",function(){return a()}),e.info(this)}return t(r,o),r.include(i),r.include(n),r}(o)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapSearchBoxParentModel",["uiGmapBaseObject","uiGmapLogger","uiGmapEventsHelper",function(n,o,r){var s;return s=function(n){function s(i,n,r,s,a,l,u){var p;return this.scope=i,this.element=n,this.attrs=r,this.gMap=s,this.ctrlPosition=a,this.template=l,this.$log=null!=u?u:o,this.setVisibility=t(this.setVisibility,this),this.getBounds=t(this.getBounds,this),this.setBounds=t(this.setBounds,this),this.createSearchBox=t(this.createSearchBox,this),this.addToParentDiv=t(this.addToParentDiv,this),this.addAsMapControl=t(this.addAsMapControl,this),this.init=t(this.init,this),null==this.attrs.template?void this.$log.error("template attribute for the search-box directive is mandatory. Places Search Box creation aborted!!"):(e.isUndefined(this.scope.options)&&(this.scope.options={},this.scope.options.visible=!0),e.isUndefined(this.scope.options.visible)&&(this.scope.options.visible=!0),e.isUndefined(this.scope.options.autocomplete)&&(this.scope.options.autocomplete=!1),this.visible=this.scope.options.visible,this.autocomplete=this.scope.options.autocomplete,p=e.element("<div></div>"),p.append(this.template),this.input=p.find("input")[0],void this.init())}return i(s,n),s.include(r),s.prototype.init=function(){return this.createSearchBox(),this.scope.$watch("options",function(t){return function(i,n){if(e.isObject(i)&&(null!=i.bounds&&t.setBounds(i.bounds),null!=i.visible&&t.visible!==i.visible))return t.setVisibility(i.visible)}}(this),!0),null!=this.attrs.parentdiv?this.addToParentDiv():this.addAsMapControl(),this.visible||this.setVisibility(this.visible),this.autocomplete?this.listener=google.maps.event.addListener(this.gObject,"place_changed",function(t){return function(){return t.places=t.gObject.getPlace()}}(this)):this.listener=google.maps.event.addListener(this.gObject,"places_changed",function(t){return function(){return t.places=t.gObject.getPlaces()}}(this)),this.listeners=this.setEvents(this.gObject,this.scope,this.scope),this.$log.info(this),this.scope.$on("$stateChangeSuccess",function(t){return function(){if(null!=t.attrs.parentdiv)return t.addToParentDiv()}}(this)),this.scope.$on("$destroy",function(t){return function(){return t.gObject=null}}(this))},s.prototype.addAsMapControl=function(){return this.gMap.controls[google.maps.ControlPosition[this.ctrlPosition]].push(this.input)},s.prototype.addToParentDiv=function(){var t;if(this.parentDiv=e.element(document.getElementById(this.scope.parentdiv)),null!=(t=this.parentDiv)?t.length:void 0)return this.parentDiv.append(this.input)},s.prototype.createSearchBox=function(){return this.autocomplete?this.gObject=new google.maps.places.Autocomplete(this.input,this.scope.options):this.gObject=new google.maps.places.SearchBox(this.input,this.scope.options)},s.prototype.setBounds=function(t){if(e.isUndefined(t.isEmpty))this.$log.error("Error: SearchBoxParentModel setBounds. Bounds not an instance of LatLngBounds.");else if(t.isEmpty()===!1&&null!=this.gObject)return this.gObject.setBounds(t)},s.prototype.getBounds=function(){return this.gObject.getBounds()},s.prototype.setVisibility=function(t){return null!=this.attrs.parentdiv?t===!1?this.parentDiv.addClass("ng-hide"):this.parentDiv.removeClass("ng-hide"):t===!1?this.gMap.controls[google.maps.ControlPosition[this.ctrlPosition]].clear():this.gMap.controls[google.maps.ControlPosition[this.ctrlPosition]].push(this.input),this.visible=t},s}(n)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapWindowsParentModel",["uiGmapIWindowParentModel","uiGmapModelsWatcher","uiGmapPropMap","uiGmapWindowChildModel","uiGmapLinked","uiGmap_async","uiGmapLogger","$timeout","$compile","$http","$templateCache","$interpolate","uiGmapPromise","uiGmapIWindow","uiGmapGmapUtil",function(n,o,r,s,a,l,u,p,h,c,d,g,f,m,v){var y;return y=function(n){function y(e,i,n,o,s,l){this.gMap=s,this.markersScope=l,this.modelKeyComparison=t(this.modelKeyComparison,this),this.interpolateContent=t(this.interpolateContent,this),this.setChildScope=t(this.setChildScope,this),this.createWindow=t(this.createWindow,this),this.setContentKeys=t(this.setContentKeys,this),this.pieceMeal=t(this.pieceMeal,this),this.createAllNew=t(this.createAllNew,this),this.watchIdKey=t(this.watchIdKey,this),this.createChildScopes=t(this.createChildScopes,this),this.watchOurScope=t(this.watchOurScope,this),this.watchDestroy=t(this.watchDestroy,this),this.onDestroy=t(this.onDestroy,this),this.rebuildAll=t(this.rebuildAll,this),this.doINeedToWipe=t(this.doINeedToWipe,this),this.watchModels=t(this.watchModels,this),this.go=t(this.go,this),y.__super__.constructor.call(this,e,i,n,o,p,h,c,d),this["interface"]=m,this.plurals=new r,_.each(m.scopeKeys,function(t){return function(e){return t[e+"Key"]=void 0}}(this)),this.linked=new a(e,i,n,o),this.contentKeys=void 0,this.isIconVisibleOnClick=void 0,this.firstTime=!0,this.firstWatchModels=!0,this.$log.info(self),this.parentScope=void 0,this.go(e)}return i(y,n),y.include(o),y.prototype.go=function(t){return this.watchOurScope(t),this.doRebuildAll=null!=this.scope.doRebuildAll&&this.scope.doRebuildAll,t.$watch("doRebuildAll",function(t){return function(e,i){if(e!==i)return t.doRebuildAll=e}}(this)),this.createChildScopes()},y.prototype.watchModels=function(t){var e;return e=null!=this.markersScope?"pluralsUpdate":"models",t.$watch(e,function(e){return function(i,n){var o;if(!_.isEqual(i,n)||e.firstWatchModels)return e.firstWatchModels=!1,e.doRebuildAll||e.doINeedToWipe(t.models)?e.rebuildAll(t,!0,!0):(o=0===e.plurals.length,null!=e.existingPieces?_.last(e.existingPieces._content).then(function(){return e.createChildScopes(o)}):e.createChildScopes(o))}}(this),!0)},y.prototype.doINeedToWipe=function(t){var e;return e=null==t||0===t.length,
this.plurals.length>0&&e},y.prototype.rebuildAll=function(t,e,i){return this.onDestroy(i).then(function(t){return function(){if(e)return t.createChildScopes()}}(this))},y.prototype.onDestroy=function(t){return y.__super__.onDestroy.call(this,this.scope),l.promiseLock(this,f.promiseTypes["delete"],void 0,void 0,function(t){return function(){return l.each(t.plurals.values(),function(t){return t.destroy(!0)},l.chunkSizeFrom(t.scope.cleanchunk,!1)).then(function(){var e;return null!=(e=t.plurals)?e.removeAll():void 0})}}(this))},y.prototype.watchDestroy=function(t){return t.$on("$destroy",function(e){return function(){return e.firstWatchModels=!0,e.firstTime=!0,e.rebuildAll(t,!1,!0)}}(this))},y.prototype.watchOurScope=function(t){return _.each(m.scopeKeys,function(e){return function(i){var n;return n=i+"Key",e[n]="function"==typeof t[i]?t[i]():t[i]}}(this))},y.prototype.createChildScopes=function(t){var i,n,o;return null==t&&(t=!0),this.isIconVisibleOnClick=!0,e.isDefined(this.linked.attrs.isiconvisibleonclick)&&(this.isIconVisibleOnClick=this.linked.scope.isIconVisibleOnClick),i=e.isUndefined(this.linked.scope.models),!i||void 0!==this.markersScope&&void 0!==(null!=(n=this.markersScope)?n.plurals:void 0)&&void 0!==(null!=(o=this.markersScope)?o.models:void 0)?null!=this.gMap?null!=this.linked.scope.models?(this.watchIdKey(this.linked.scope),t?this.createAllNew(this.linked.scope,!1):this.pieceMeal(this.linked.scope,!1)):(this.parentScope=this.markersScope,this.watchIdKey(this.parentScope),t?this.createAllNew(this.markersScope,!0,"plurals",!1):this.pieceMeal(this.markersScope,!0,"plurals",!1)):void 0:void this.$log.error("No models to create windows from! Need direct models or models derived from markers!")},y.prototype.watchIdKey=function(t){return this.setIdKey(t),t.$watch("idKey",function(e){return function(i,n){if(i!==n&&null==i)return e.idKey=i,e.rebuildAll(t,!0,!0)}}(this))},y.prototype.createAllNew=function(t,e,i,n){var o;if(null==i&&(i="models"),null==n&&(n=!1),this.firstTime&&(this.watchModels(t),this.watchDestroy(t)),this.setContentKeys(t.models),!this.didQueueInitPromise(this,t))return o=null,l.promiseLock(this,f.promiseTypes.create,"createAllNew",function(t){return o=t},function(n){return function(){return l.each(t.models,function(r){var s,a;return s=e&&null!=(a=n.getItem(t,i,r[n.idKey]))?a.gObject:void 0,o||(!s&&n.markersScope&&u.error("Unable to get gMarker from markersScope!"),n.createWindow(r,s,n.gMap)),o},l.chunkSizeFrom(t.chunk)).then(function(){return n.firstTime=!1})}}(this))},y.prototype.pieceMeal=function(t,e,i,n){var o,r;if(null==i&&(i="models"),null==n&&(n=!0),!t.$$destroyed)return o=null,r=null,null!=t&&this.modelsLength()&&this.plurals.length?l.promiseLock(this,f.promiseTypes.update,"pieceMeal",function(t){return o=t},function(e){return function(){return f.promise(function(){return e.figureOutState(e.idKey,t,e.plurals,e.modelKeyComparison)}).then(function(i){return r=i,l.each(r.removals,function(t){if(null!=t)return e.plurals.remove(t.id),null!=t.destroy&&t.destroy(!0),o},l.chunkSizeFrom(t.chunk))}).then(function(){return l.each(r.adds,function(n){var r,s;if(r=null!=(s=e.getItem(t,i,n[e.idKey]))?s.gObject:void 0,!r)throw"Gmarker undefined";return e.createWindow(n,r,e.gMap),o})}).then(function(){return l.each(r.updates,function(t){return e.updateChild(t.child,t.model),o},l.chunkSizeFrom(t.chunk))})}}(this)):(u.debug("pieceMeal: rebuildAll"),this.rebuildAll(this.scope,!0,!0))},y.prototype.setContentKeys=function(t){if(this.modelsLength(t))return this.contentKeys=Object.keys(t[0])},y.prototype.createWindow=function(t,e,i){var n,o,r,a,l,u;return o=this.linked.scope.$new(!1),this.setChildScope(o,t),o.$watch("model",function(t){return function(e,i){if(e!==i)return t.setChildScope(o,e)}}(this),!0),r={html:function(e){return function(){return e.interpolateContent(e.linked.element.html(),t)}}(this)},this.DEFAULTS=this.scopeOrModelVal(this.optionsKey,this.scope,t)||{},a=this.createWindowOptions(e,o,r.html(),this.DEFAULTS),n=new s({model:t,scope:o,opts:a,isIconVisibleOnClick:this.isIconVisibleOnClick,gMap:i,markerScope:null!=(l=this.markersScope)&&null!=(u=l.plurals.get(t[this.idKey]))?u.scope:void 0,element:r,needToManualDestroy:!1,markerIsVisibleAfterWindowClose:!0,isScopeModel:!0}),null==t[this.idKey]?void this.$log.error("Window model has no id to assign a child to. This is required for performance. Please assign id, or redirect id to a different key."):(this.plurals.put(t[this.idKey],n),n)},y.prototype.setChildScope=function(t,e){return _.each(m.scopeKeys,function(i){return function(n){var o,r;if(o=n+"Key",r="self"===i[o]?e:e[i[o]],r!==t[n])return t[n]=r}}(this)),t.model=e},y.prototype.interpolateContent=function(t,e){var i,n,o,r,s,a;if(void 0!==this.contentKeys&&0!==this.contentKeys.length){for(i=g(t),o={},a=this.contentKeys,n=0,s=a.length;n<s;n++)r=a[n],o[r]=e[r];return i(o)}},y.prototype.modelKeyComparison=function(t,e){var i,n;if(n=null!=this.scope.coords?this.scope:this.parentScope,null==n)throw"No scope or parentScope set!";return(i=v.equalCoords(this.evalModelHandle(t,n.coords),this.evalModelHandle(e,n.coords)))?i=_.every(_.without(this["interface"].scopeKeys,"coords"),function(i){return function(o){return i.evalModelHandle(t,n[o])===i.evalModelHandle(e,n[o])}}(this)):i},y}(n)}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapCircle",["uiGmapICircle","uiGmapCircleParentModel",function(t,e){return _.extend(t,{link:function(t,i,n,o){return o.getScope().deferred.promise.then(function(o){return new e(t,i,n,o)})}})}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapControl",["uiGmapIControl","$http","$templateCache","$compile","$controller","uiGmapGoogleMapApi",function(n,o,r,s,a,l){var u;return u=function(u){function p(){this.link=t(this.link,this),p.__super__.constructor.call(this)}return i(p,u),p.prototype.transclude=!0,p.prototype.link=function(t,i,u,p,h){return l.then(function(i){return function(l){var u,c,d,g;return g=h(),u=h().length>0,!u&&e.isUndefined(t.template)?void i.$log.error("mapControl: could not find a valid template property or elements for transclusion"):(c=e.isDefined(t.index&&!isNaN(parseInt(t.index)))?parseInt(t.index):void 0,d=e.isDefined(t.position)?t.position.toUpperCase().replace(/-/g,"_"):"TOP_CENTER",l.ControlPosition[d]?n.mapPromise(t,p).then(function(n){var l,p,g;return l=void 0,p=e.element("<div></div>"),g=function(t,e,i){return i&&(e[0].index=i),t.controls[google.maps.ControlPosition[d]].push(e[0])},u?h(function(t){return p.append(t),g(n,p,c)}):o.get(t.template,{cache:r}).success(function(i){var n,o;return o=t.$new(),p.append(i),e.isDefined(t.controller)&&(n=a(t.controller,{$scope:o}),p.children().data("$ngControllerController",n)),l=s(p.children())(o)}).error(function(t){return i.$log.error("mapControl: template could not be found")}).then(function(){return g(n,l,c)})}):void i.$log.error("mapControl: invalid position property"))}}(this))},p}(n)}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api").service("uiGmapDragZoom",["uiGmapCtrlHandle","uiGmapPropertyAction",function(t,e){return{restrict:"EMA",transclude:!0,template:'<div class="angular-google-map-dragzoom" ng-transclude style="display: none"></div>',require:"^uiGmapGoogleMap",scope:{keyboardkey:"=",options:"=",spec:"="},controller:["$scope","$element",function(e,i){return e.ctrlType="uiGmapDragZoom",_.extend(this,t.handle(e,i))}],link:function(i,n,o,r){return t.mapPromise(i,r).then(function(t){var n,o,r;return n=function(e){return t.enableKeyDragZoom(e)},o=new e(function(t,e){return e?n({key:e}):n()}),r=new e(function(t,e){if(e)return n(e)}),i.$watch("keyboardkey",o.sic("keyboardkey")),o.sic(i.keyboardkey),i.$watch("options",r.sic("options")),r.sic(i.options)})}}}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapDrawingManager",["uiGmapIDrawingManager","uiGmapDrawingManagerParentModel",function(t,e){return _.extend(t,{link:function(t,i,n,o){return o.getScope().deferred.promise.then(function(o){return new e(t,i,n,o)})}})}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapApiFreeDrawPolygons",["uiGmapLogger","uiGmapBaseObject","uiGmapCtrlHandle","uiGmapDrawFreeHandChildModel","uiGmapLodash",function(e,n,o,r,s){var a;return a=function(n){function a(){return this.link=t(this.link,this),a.__super__.constructor.apply(this,arguments)}return i(a,n),a.include(o),a.prototype.restrict="EMA",a.prototype.replace=!0,a.prototype.require="^uiGmapGoogleMap",a.prototype.scope={polygons:"=",draw:"="},a.prototype.link=function(t,i,n,o){return this.mapPromise(t,o).then(function(i){return function(i){var n,a;return t.polygons?_.isArray(t.polygons)?(n=new r(i,o.getScope()),a=void 0,t.draw=function(){return"function"==typeof a&&a(),n.engage(t.polygons).then(function(){var e;return e=!0,a=t.$watchCollection("polygons",function(t,i){var n;return e||t===i?void(e=!1):(n=s.differenceObjects(i,t),n.forEach(function(t){return t.setMap(null)}))})})}):e.error("Free Draw Polygons must be of type Array!"):e.error("No polygons to bind to!")}}(this))},a}(n)}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api").service("uiGmapICircle",[function(){var t;return t={},{restrict:"EA",replace:!0,require:"^uiGmapGoogleMap",scope:{center:"=center",radius:"=radius",stroke:"=stroke",fill:"=fill",clickable:"=",draggable:"=",editable:"=",geodesic:"=",icons:"=icons",visible:"=",events:"=",control:"=",zIndex:"=zindex"}}}])}.call(this),function(){var t=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapIControl",["uiGmapBaseObject","uiGmapLogger","uiGmapCtrlHandle",function(e,i,n){var o;return o=function(e){function o(){this.restrict="EA",this.replace=!0,this.require="^uiGmapGoogleMap",this.scope={template:"@template",position:"@position",controller:"@controller",index:"@index"},this.$log=i}return t(o,e),o.extend(n),o.prototype.link=function(t,e,i,n){throw new Exception("Not implemented!!")},o}(e)}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api").service("uiGmapIDrawingManager",[function(){return{restrict:"EA",replace:!0,require:"^uiGmapGoogleMap",scope:{"static":"@",control:"=",options:"=",events:"="}}}])}.call(this),function(){var t=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapIMarker",["uiGmapBaseObject","uiGmapCtrlHandle",function(e,i){var n;return n=function(e){function n(){this.restrict="EMA",this.require="^uiGmapGoogleMap",this.priority=-1,this.transclude=!0,this.replace=!0,this.scope=_.extend(this.scope||{},n.scope)}return t(n,e),n.scope={coords:"=coords",icon:"=icon",click:"&click",options:"=options",events:"=events",fit:"=fit",idKey:"=idkey",control:"=control"},n.scopeKeys=_.keys(n.scope),n.keys=n.scopeKeys,n.extend(i),n}(e)}])}.call(this),function(){var t=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapIPolygon",["uiGmapGmapUtil","uiGmapBaseObject","uiGmapLogger","uiGmapCtrlHandle",function(e,i,n,o){var r;return r=function(i){function r(){}return t(r,i),r.scope={path:"=path",stroke:"=stroke",clickable:"=",draggable:"=",editable:"=",geodesic:"=",fill:"=",icons:"=icons",visible:"=","static":"=",events:"=",zIndex:"=zindex",fit:"=",control:"=control"},r.scopeKeys=_.keys(r.scope),r.include(e),r.extend(o),r.prototype.restrict="EMA",r.prototype.replace=!0,r.prototype.require="^uiGmapGoogleMap",r.prototype.scope=r.scope,r.prototype.DEFAULTS={},r.prototype.$log=n,r}(i)}])}.call(this),function(){var t=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapIPolyline",["uiGmapGmapUtil","uiGmapBaseObject","uiGmapLogger","uiGmapCtrlHandle",function(e,i,n,o){var r;return r=function(i){function r(){}return t(r,i),r.scope={path:"=",stroke:"=",clickable:"=",draggable:"=",editable:"=",geodesic:"=",icons:"=",visible:"=","static":"=",fit:"=",events:"=",zIndex:"=zindex"},r.scopeKeys=_.keys(r.scope),r.include(e),r.extend(o),r.prototype.restrict="EMA",r.prototype.replace=!0,r.prototype.require="^uiGmapGoogleMap",r.prototype.scope=r.scope,r.prototype.DEFAULTS={},r.prototype.$log=n,r}(i)}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api").service("uiGmapIRectangle",[function(){var t;return t={},{restrict:"EMA",require:"^uiGmapGoogleMap",replace:!0,scope:{bounds:"=",stroke:"=",clickable:"=",draggable:"=",editable:"=",fill:"=",visible:"=",events:"="}}}])}.call(this),function(){var t=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapIWindow",["uiGmapBaseObject","uiGmapChildEvents","uiGmapCtrlHandle",function(e,i,n){var o;return o=function(e){function o(){this.restrict="EMA",this.template=void 0,this.transclude=!0,this.priority=-100,this.require="^uiGmapGoogleMap",this.replace=!0,this.scope=_.extend(this.scope||{},o.scope)}return t(o,e),o.scope={coords:"=coords",template:"=template",templateUrl:"=templateurl",templateParameter:"=templateparameter",isIconVisibleOnClick:"=isiconvisibleonclick",closeClick:"&closeclick",options:"=options",control:"=control",show:"=show"},o.scopeKeys=_.keys(o.scope),o.include(i),o.extend(n),o}(e)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapMap",["$timeout","$q","$log","uiGmapGmapUtil","uiGmapBaseObject","uiGmapCtrlHandle","uiGmapIsReady","uiGmapuuid","uiGmapExtendGWin","uiGmapExtendMarkerClusterer","uiGmapGoogleMapsUtilV3","uiGmapGoogleMapApi","uiGmapEventsHelper","uiGmapGoogleMapObjectManager",function(n,o,r,s,a,l,u,p,h,c,d,g,f,m){var v,y,b;return v=void 0,b=[d,h,c],y=function(o){function a(){this.link=t(this.link,this);var e;e=function(t){var e,i;return i=void 0,t.$on("$destroy",function(){return u.decrement()}),e=l.handle(t),t.ctrlType="Map",t.deferred.promise.then(function(){return b.forEach(function(t){return t.init()})}),e.getMap=function(){return t.map},i=_.extend(this,e)},this.controller=["$scope",e]}return i(a,o),a.include(s),a.prototype.restrict="EMA",a.prototype.transclude=!0,a.prototype.replace=!1,a.prototype.template='<div class="angular-google-map"><div class="angular-google-map-container">\n</div><div ng-transclude style="display: none"></div></div>',a.prototype.scope={center:"=",zoom:"=",dragging:"=",control:"=",options:"=",events:"=",eventOpts:"=",styles:"=",bounds:"=",update:"="},a.prototype.link=function(t,i,o){var s;return s=[],t.$on("$destroy",function(){if(f.removeEvents(s),"true"===o.recycleMapInstance&&t.map)return m.recycleMapInstance(t.map),t.map=null}),t.idleAndZoomChanged=!1,g.then(function(a){return function(l){var h,c,d,g,y,b,w,M,k,x,C,G,D,P,L,O,S;if(v={mapTypeId:l.MapTypeId.ROADMAP},P=u.spawn(),G=function(){return P.deferred.resolve({instance:P.instance,map:h})},!e.isDefined(t.center)&&!e.isDefined(t.bounds))return void r.error("angular-google-maps: a center or bounds property is required");if(e.isDefined(t.center)||(t.center=new google.maps.LatLngBounds(a.getCoords(t.bounds.southwest),a.getCoords(t.bounds.northeast)).getCenter()),e.isDefined(t.zoom)||(t.zoom=10),y=e.element(i),y.addClass("angular-google-map"),x={options:{}},o.options&&(x.options=t.options),o.styles&&(x.styles=t.styles),o.type&&(L=o.type.toUpperCase(),google.maps.MapTypeId.hasOwnProperty(L)?x.mapTypeId=google.maps.MapTypeId[o.type.toUpperCase()]:r.error("angular-google-maps: invalid map type '"+o.type+"'")),M=e.extend({},v,x,{center:a.getCoords(t.center),zoom:t.zoom,bounds:t.bounds}),h="true"===o.recycleMapInstance?m.createMapInstance(y.find("div")[1],M):new google.maps.Map(y.find("div")[1],M),h.uiGmap_id=p.generate(),g=!1,s.push(google.maps.event.addListenerOnce(h,"idle",function(){return t.deferred.resolve(h),G()})),d=o.events&&null!=(null!=(C=t.events)?C.blacklist:void 0)?t.events.blacklist:[],_.isString(d)&&(d=[d]),k=function(e,i,n){if(!_.includes(d,e))return n&&n(),s.push(google.maps.event.addListener(h,e,function(){var e;if(!(null!=(e=t.update)?e.lazy:void 0))return i()}))},_.includes(d,"all")||(k("dragstart",function(){return g=!0,t.$evalAsync(function(t){if(null!=t.dragging)return t.dragging=g})}),k("dragend",function(){return g=!1,t.$evalAsync(function(t){if(null!=t.dragging)return t.dragging=g})}),O=function(e,i){if(null==e&&(e=h.center),null==i&&(i=t),_.includes(d,"center")&&(i.center.latitude!==e.lat()&&(i.center.latitude=e.lat()),i.center.longitude!==e.lng()))return i.center.longitude=e.lng()},D=!1,k("idle",function(){var e,i,n;return e=h.getBounds(),i=e.getNorthEast(),n=e.getSouthWest(),D=!0,t.$evalAsync(function(e){return O(),_.isUndefined(e.bounds)||_.includes(d,"bounds")||(e.bounds.northeast={latitude:i.lat(),longitude:i.lng()},e.bounds.southwest={latitude:n.lat(),longitude:n.lng()}),_.includes(d,"zoom")||(e.zoom=h.zoom,t.idleAndZoomChanged=!t.idleAndZoomChanged),D=!1})})),e.isDefined(t.events)&&null!==t.events&&e.isObject(t.events)){w=function(e){return function(){return t.events[e].apply(t,[h,e,arguments])}},c=[];for(b in t.events)t.events.hasOwnProperty(b)&&e.isFunction(t.events[b])&&c.push(google.maps.event.addListener(h,b,w(b)));s.concat(c)}return h.getOptions=function(){return M},t.map=h,null!=o.control&&null!=t.control&&(t.control.refresh=function(t){var e,i,n;if(null!=h)return null!=("undefined"!=typeof google&&null!==google&&null!=(i=google.maps)&&null!=(n=i.event)?n.trigger:void 0)&&null!=h&&google.maps.event.trigger(h,"resize"),null!=(null!=t?t.latitude:void 0)&&null!=(null!=t?t.longitude:void 0)?(e=a.getCoords(t),a.isTrue(o.pan)?h.panTo(e):h.setCenter(e)):void 0},t.control.getGMap=function(){return h},t.control.getMapOptions=function(){return M},t.control.getCustomEventListeners=function(){return c},t.control.removeEvents=function(t){return f.removeEvents(t)}),t.$watch("center",function(e,i){var n;if(e!==i&&!D&&(n=a.getCoords(t.center),n.lat()!==h.center.lat()||n.lng()!==h.center.lng()))return g?void 0:(a.validateCoords(e)||r.error("Invalid center for newValue: "+JSON.stringify(e)),a.isTrue(o.pan)&&t.zoom===h.zoom?h.panTo(n):h.setCenter(n))},!0),S=null,t.$watch("zoom",function(e,i){var o,r;if(null!=e&&!_.isEqual(e,i)&&(null!=h?h.getZoom():void 0)!==(null!=t?t.zoom:void 0)&&!D)return null!=S&&n.cancel(S),S=n(function(){return h.setZoom(e)},(null!=(o=t.eventOpts)&&null!=(r=o.debounce)?r.zoomMs:void 0)+20,!1)}),t.$watch("bounds",function(t,e){var i,n,o,s,a,l,u;if(t!==e)return null==(null!=t&&null!=(o=t.northeast)?o.latitude:void 0)||null==(null!=t&&null!=(s=t.northeast)?s.longitude:void 0)||null==(null!=t&&null!=(a=t.southwest)?a.latitude:void 0)||null==(null!=t&&null!=(l=t.southwest)?l.longitude:void 0)?void r.error("Invalid map bounds for new value: "+JSON.stringify(t)):(n=new google.maps.LatLng(t.northeast.latitude,t.northeast.longitude),u=new google.maps.LatLng(t.southwest.latitude,t.southwest.longitude),i=new google.maps.LatLngBounds(u,n),h.fitBounds(i))}),["options","styles"].forEach(function(e){return t.$watch(e,function(t,i){if(!_.isEqual(t,i))return"options"===e?x.options=t:x.options[e]=t,null!=h?h.setOptions(x):void 0},!0)})}}(this))},a}(a)}])}.call(this),function(){var t=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapMarker",["uiGmapIMarker","uiGmapMarkerChildModel","uiGmapMarkerManager","uiGmapLogger",function(e,i,n,o){var r;return r=function(r){function s(){s.__super__.constructor.call(this),this.template='<span class="angular-google-map-marker" ng-transclude></span>',o.info(this)}return t(s,r),s.prototype.controller=["$scope","$element",function(t,i){return t.ctrlType="Marker",_.extend(this,e.handle(t,i))}],s.prototype.link=function(t,o,r,s){var a;return a=e.mapPromise(t,s),a.then(function(o){var r,s,a;if(r=new n(o),s=_.object(e.keys,e.keys),a=new i({scope:t,model:t,keys:s,gMap:o,doClick:!0,gManager:r,doDrawSelf:!1,trackModel:!1}),a.deferred.promise.then(function(e){return t.deferred.resolve(e)}),null!=t.control)return t.control.getGMarkers=r.getGMarkers}),t.$on("$destroy",function(){var t;return"undefined"!=typeof t&&null!==t&&t.clear(),t=null})},s}(e)}])}.call(this),function(){var t=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapMarkers",["uiGmapIMarker","uiGmapPlural","uiGmapMarkersParentModel","uiGmap_sync","uiGmapLogger",function(e,i,n,o,r){var s;return s=function(o){function s(){s.__super__.constructor.call(this),this.template='<span class="angular-google-map-markers" ng-transclude></span>',i.extend(this,{doCluster:"=?docluster",clusterOptions:"=clusteroptions",clusterEvents:"=clusterevents",modelsByRef:"=modelsbyref",type:"=?type",typeOptions:"=?typeoptions",typeEvents:"=?typeevents"}),r.info(this)}return t(s,o),s.prototype.controller=["$scope","$element",function(t,i){return t.ctrlType="Markers",_.extend(this,e.handle(t,i))}],s.prototype.link=function(t,o,r,s){var a,l;return a=void 0,l=function(){return t.deferred.resolve()},e.mapPromise(t,s).then(function(e){var u;return u=s.getScope(),u.$watch("idleAndZoomChanged",function(){return _.defer(a.gManager.draw)}),a=new n(t,o,r,e),i.link(t,a),null!=t.control&&(t.control.getGMarkers=function(){var t;return null!=(t=a.gManager)?t.getGMarkers():void 0},t.control.getChildMarkers=function(){return a.plurals}),_.last(a.existingPieces._content).then(function(){return l()})})},s}(e)}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api").service("uiGmapPlural",[function(){var t;return t=function(t,e){if(null!=t.control)return t.control.updateModels=function(i){return t.models=i,e.createChildScopes(!1)},t.control.newModels=function(i){return t.models=i,e.rebuildAll(t,!0,!0)},t.control.clean=function(){return e.rebuildAll(t,!1,!0)},t.control.getPlurals=function(){return e.plurals},t.control.getManager=function(){return e.gManager},t.control.hasManager=function(){return null!=e.gManager==!0},t.control.managerDraw=function(){var e;if(t.control.hasManager())return null!=(e=t.control.getManager())?e.draw():void 0}},{extend:function(t,e){return _.extend(t.scope||{},e||{},{idKey:"=idkey",doRebuildAll:"=dorebuildall",models:"=models",chunk:"=chunk",cleanchunk:"=cleanchunk",control:"=control"})},link:function(e,i){return t(e,i)}}}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapPolygon",["uiGmapIPolygon","$timeout","uiGmapPolygonChildModel",function(e,n,o){var r;return r=function(n){function r(){return this.link=t(this.link,this),r.__super__.constructor.apply(this,arguments)}return i(r,n),r.prototype.link=function(t,i,n,r){var s,a;return s=[],a=e.mapPromise(t,r),null!=t.control&&(t.control.getInstance=this,t.control.polygons=s,t.control.promise=a),a.then(function(e){return function(i){return s.push(new o({scope:t,attrs:n,gMap:i,defaults:e.DEFAULTS}))}}(this))},r}(e)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapPolygons",["uiGmapIPolygon","$timeout","uiGmapPolygonsParentModel","uiGmapPlural",function(n,o,r,s){var a;return a=function(n){function o(){this.link=t(this.link,this),o.__super__.constructor.call(this),s.extend(this),this.$log.info(this)}return i(o,n),o.prototype.link=function(t,i,n,o){return o.getScope().deferred.promise.then(function(o){return function(a){return(e.isUndefined(t.path)||null===t.path)&&o.$log.warn("polygons: no valid path attribute found"),t.models||o.$log.warn("polygons: no models found to create from"),s.link(t,new r(t,i,n,a,o.DEFAULTS))}}(this))},o}(n)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapPolyline",["uiGmapIPolyline","$timeout","uiGmapPolylineChildModel",function(n,o,r){var s;return s=function(o){function s(){return this.link=t(this.link,this),s.__super__.constructor.apply(this,arguments)}return i(s,o),s.prototype.link=function(t,i,o,s){return n.mapPromise(t,s).then(function(i){return function(n){return!e.isUndefined(t.path)&&null!==t.path&&i.validatePath(t.path)||i.$log.warn("polyline: no valid path attribute found"),new r({scope:t,attrs:o,gMap:n,defaults:i.DEFAULTS})}}(this))},s}(n)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapPolylines",["uiGmapIPolyline","$timeout","uiGmapPolylinesParentModel","uiGmapPlural",function(n,o,r,s){var a;return a=function(n){function o(){this.link=t(this.link,this),o.__super__.constructor.call(this),s.extend(this),this.$log.info(this)}return i(o,n),o.prototype.link=function(t,i,n,o){return o.getScope().deferred.promise.then(function(o){return function(a){return(e.isUndefined(t.path)||null===t.path)&&o.$log.warn("polylines: no valid path attribute found"),t.models||o.$log.warn("polylines: no models found to create from"),s.link(t,new r(t,i,n,a,o.DEFAULTS))}}(this))},o}(n)}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapRectangle",["uiGmapLogger","uiGmapGmapUtil","uiGmapIRectangle","uiGmapRectangleParentModel",function(t,e,i,n){return _.extend(i,{link:function(t,e,i,o){return o.getScope().deferred.promise.then(function(o){return new n(t,e,i,o)})}})}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapWindow",["uiGmapIWindow","uiGmapGmapUtil","uiGmapWindowChildModel","uiGmapLodash","uiGmapLogger",function(n,o,r,s,a){var l;return l=function(l){function u(){this.link=t(this.link,this),u.__super__.constructor.call(this),this.require=["^uiGmapGoogleMap","^?uiGmapMarker"],this.template='<span class="angular-google-maps-window" ng-transclude></span>',a.debug(this),this.childWindows=[]}return i(u,l),u.include(o),u.prototype.link=function(t,i,o,r){var s,a;return s=r.length>1&&null!=r[1]?r[1]:void 0,a=null!=s?s.getScope():void 0,this.mapPromise=n.mapPromise(t,r[0]),this.mapPromise.then(function(n){return function(r){var l;return l=!0,e.isDefined(o.isiconvisibleonclick)&&(l=t.isIconVisibleOnClick),s?a.deferred.promise.then(function(e){return n.init(t,i,l,r,a)}):void n.init(t,i,l,r)}}(this))},u.prototype.init=function(t,e,i,n,o){var a,l,u,p,h;if(l=null!=t.options?t.options:{},p=null!=t&&this.validateCoords(t.coords),null!=(null!=o?o.getGMarker:void 0)&&(u=o.getGMarker()),h=p?this.createWindowOptions(u,t,e.html(),l):l,null!=n&&(a=new r({scope:t,opts:h,isIconVisibleOnClick:i,gMap:n,markerScope:o,element:e}),this.childWindows.push(a),t.$on("$destroy",function(t){return function(){return t.childWindows=s.withoutObjects(t.childWindows,[a],function(t,e){return t.scope.$id===e.scope.$id}),t.childWindows.length=0}}(this))),null!=t.control&&(t.control.getGWindows=function(t){return function(){return t.childWindows.map(function(t){return t.gObject})}}(this),t.control.getChildWindows=function(t){return function(){return t.childWindows}}(this),t.control.getPlurals=t.control.getChildWindows,t.control.showWindow=function(t){return function(){return t.childWindows.map(function(t){return t.showWindow()})}}(this),t.control.hideWindow=function(t){return function(){return t.childWindows.map(function(t){return t.hideWindow()})}}(this)),null!=this.onChildCreation&&null!=a)return this.onChildCreation(a)},u}(n)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapWindows",["uiGmapIWindow","uiGmapPlural","uiGmapWindowsParentModel","uiGmapPromise","uiGmapLogger",function(e,n,o,r,s){var a;return a=function(e){function a(){this.link=t(this.link,this),a.__super__.constructor.call(this),this.require=["^uiGmapGoogleMap","^?uiGmapMarkers"],this.template='<span class="angular-google-maps-windows" ng-transclude></span>',n.extend(this),s.debug(this)}return i(a,e),a.prototype.link=function(t,e,i,n){var o,s,a;return o=n[0].getScope(),s=n.length>1&&null!=n[1]?n[1]:void 0,a=null!=s?s.getScope():void 0,o.deferred.promise.then(function(o){return function(s){var l,u;return l=(null!=a&&null!=(u=a.deferred)?u.promise:void 0)||r.resolve(),l.then(function(){var r,l;return r=null!=(l=o.parentModel)?l.existingPieces:void 0,r?r.then(function(){return o.init(t,e,i,n,s,a)}):o.init(t,e,i,n,s,a)})}}(this))},a.prototype.init=function(t,e,i,r,s,a){var l;if(l=new o(t,e,i,r,s,a),n.link(t,l),null!=t.control)return t.control.getGWindows=function(){return l.plurals.map(function(t){return t.gObject})},t.control.getChildWindows=function(){return l.plurals}},a}(e)}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapGoogleMap",["uiGmapMap",function(t){return new t}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapMarker",["$timeout","uiGmapMarker",function(t,e){return new e(t)}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapMarkers",["$timeout","uiGmapMarkers",function(t,e){return new e(t)}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapPolygon",["uiGmapPolygon",function(t){return new t;
}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapCircle",["uiGmapCircle",function(t){return t}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapPolyline",["uiGmapPolyline",function(t){return new t}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapPolylines",["uiGmapPolylines",function(t){return new t}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapRectangle",["uiGmapLogger","uiGmapRectangle",function(t,e){return e}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapWindow",["$timeout","$compile","$http","$templateCache","uiGmapWindow",function(t,e,i,n,o){return new o(t,e,i,n)}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapWindows",["$timeout","$compile","$http","$templateCache","$interpolate","uiGmapWindows",function(t,e,i,n,o,r){return new r(t,e,i,n,o)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.module("uiGmapgoogle-maps").directive("uiGmapLayer",["$timeout","uiGmapLogger","uiGmapLayerParentModel",function(e,i,n){var o;return new(o=function(){function e(){this.link=t(this.link,this),this.$log=i,this.restrict="EMA",this.require="^uiGmapGoogleMap",this.priority=-1,this.transclude=!0,this.template="<span class='angular-google-map-layer' ng-transclude></span>",this.replace=!0,this.scope={show:"=show",type:"=type",namespace:"=namespace",options:"=options",onCreated:"&oncreated"}}return e.prototype.link=function(t,e,i,o){return o.getScope().deferred.promise.then(function(o){return function(o){return null!=t.onCreated?new n(t,e,i,o,t.onCreated):new n(t,e,i,o)}}(this))},e}())}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapMapControl",["uiGmapControl",function(t){return new t}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapDragZoom",["uiGmapDragZoom",function(t){return t}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapDrawingManager",["uiGmapDrawingManager",function(t){return t}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapFreeDrawPolygons",["uiGmapApiFreeDrawPolygons",function(t){return new t}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.module("uiGmapgoogle-maps").directive("uiGmapMapType",["$timeout","uiGmapLogger","uiGmapMapTypeParentModel",function(e,i,n){var o;return new(o=function(){function e(){this.link=t(this.link,this),this.$log=i,this.restrict="EMA",this.require="^uiGmapGoogleMap",this.priority=-1,this.transclude=!0,this.template='<span class="angular-google-map-layer" ng-transclude></span>',this.replace=!0,this.scope={show:"=show",options:"=options",refresh:"=refresh",id:"@"}}return e.prototype.link=function(t,e,i,o){return o.getScope().deferred.promise.then(function(o){return function(o){return new n(t,e,i,o)}}(this))},e}())}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapPolygons",["uiGmapPolygons",function(t){return new t}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.module("uiGmapgoogle-maps").directive("uiGmapSearchBox",["uiGmapGoogleMapApi","uiGmapLogger","uiGmapSearchBoxParentModel","$http","$templateCache","$compile",function(i,n,o,r,s,a){var l;return new(l=function(){function l(){this.link=t(this.link,this),this.$log=n,this.restrict="EMA",this.require="^uiGmapGoogleMap",this.priority=-1,this.transclude=!0,this.template="<span class='angular-google-map-search' ng-transclude></span>",this.replace=!0,this.scope={template:"=template",events:"=events",position:"=?position",options:"=?options",parentdiv:"=?parentdiv",ngModel:"=?"}}return l.prototype.require="ngModel",l.prototype.link=function(t,n,l,u){return i.then(function(i){return function(p){return null==t.template&&(s.put("uigmap-searchbox-default.tpl.html",'<input type="text">'),t.template="uigmap-searchbox-default.tpl.html"),r.get(t.template,{cache:s}).success(function(r){return e.isUndefined(t.events)?void i.$log.error("searchBox: the events property is required"):u.getScope().deferred.promise.then(function(s){var u;return u=e.isDefined(t.position)?t.position.toUpperCase().replace(/-/g,"_"):"TOP_LEFT",p.ControlPosition[u]?new o(t,n,l,s,u,a(r)(t)):void i.$log.error("searchBox: invalid position property")})})}}(this))},l}())}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapShow",["$animate","uiGmapLogger",function(t,i){return{scope:{uiGmapShow:"=",uiGmapAfterShow:"&",uiGmapAfterHide:"&"},link:function(n,o){var r,s,a;return r=function(e,i){return t[e](o,"ng-hide").then(function(){return i()})},s=function(e,i){return t[e](o,"ng-hide",i)},a=function(t,n){return e.version.major>1?i.error("uiGmapShow is not supported for Angular Major greater than 1.\nYour Major is "+e.version.major+'"'):1===e.version.major&&e.version.minor<3?s(t,n):r(t,n)},n.$watch("uiGmapShow",function(t){if(t&&a("removeClass",n.uiGmapAfterShow),!t)return a("addClass",n.uiGmapAfterHide)})}}}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapStreetViewPanorama",["uiGmapGoogleMapApi","uiGmapLogger","uiGmapGmapUtil","uiGmapEventsHelper",function(t,i,n,o){var r;return r="uiGmapStreetViewPanorama",{restrict:"EMA",template:'<div class="angular-google-map-street-view-panorama"></div>',replace:!0,scope:{focalcoord:"=",radius:"=?",events:"=?",options:"=?",control:"=?",povoptions:"=?",imagestatus:"="},link:function(s,a,l){return t.then(function(t){return function(t){var l,u,p,h,c,d,g,f,m,v;return f=void 0,v=void 0,p=!1,d=void 0,g=null,m=null,l=function(){if(o.removeEvents(d),null!=f&&(f.unbind("position"),f.setVisible(!1)),null!=v)return null!=(null!=v?v.setVisible:void 0)&&v.setVisible(!1),v=void 0},c=function(t,i){var n;return n=google.maps.geometry.spherical.computeHeading(t,i),p=!0,s.radius=s.radius||50,m=e.extend({heading:n,zoom:1,pitch:0},s.povoptions||{}),g=g=e.extend({navigationControl:!1,addressControl:!1,linksControl:!1,position:t,pov:m,visible:!0},s.options||{}),p=!1},u=function(){var t;return s.focalcoord?s.radius?(l(),null==v&&(v=new google.maps.StreetViewService),s.events&&(d=o.setEvents(v,s,s)),t=n.getCoords(s.focalcoord),v.getPanoramaByLocation(t,s.radius,function(e,i){var n,o,r;if(null!=s.imagestatus&&(s.imagestatus=i),null!=(null!=(r=s.events)?r.image_status_changed:void 0)&&s.events.image_status_changed(v,"image_status_changed",s,i),"OK"===i)return o=e.location.latLng,c(o,t),n=a[0],f=new google.maps.StreetViewPanorama(n,g)})):void i.error(r+": needs a radius to set the camera view from its focal target."):void i.error(r+": focalCoord needs to be defined")},null!=s.control&&(s.control.getOptions=function(){return g},s.control.getPovOptions=function(){return m},s.control.getGObject=function(){return v},s.control.getGPano=function(){return f}),s.$watch("options",function(t,e){if(t!==e&&t!==g&&!p)return u()}),h=!0,s.$watch("focalcoord",function(t,e){if((t!==e||h)&&null!=t)return h=!1,u()}),s.$on("$destroy",function(){return l()})}}(this))}}}])}.call(this),e.module("uiGmapgoogle-maps.wrapped").service("uiGmapuuid",function(){function t(){}return t.generate=function(){var e=t._gri,i=t._ha;return i(e(32),8)+"-"+i(e(16),4)+"-"+i(16384|e(12),4)+"-"+i(32768|e(14),4)+"-"+i(e(48),12)},t._gri=function(t){return 0>t?NaN:30>=t?0|Math.random()*(1<<t):53>=t?(0|1073741824*Math.random())+1073741824*(0|Math.random()*(1<<t-30)):NaN},t._ha=function(t,e){for(var i=t.toString(16),n=e-i.length,o="0";0<n;n>>>=1,o+=o)1&n&&(i=o+i);return i},t}),e.module("uiGmapgoogle-maps.wrapped").service("uiGmapGoogleMapsUtilV3",function(){return{init:_.once(function(){+function(){function e(t,i){t.getMarkerClusterer().extend(e,google.maps.OverlayView),this.cluster_=t,this.className_=t.getMarkerClusterer().getClusterClass(),this.styles_=i,this.center_=null,this.div_=null,this.sums_=null,this.visible_=!1,this.setMap(t.getMap())}function n(t){this.markerClusterer_=t,this.map_=t.getMap(),this.gridSize_=t.getGridSize(),this.minClusterSize_=t.getMinimumClusterSize(),this.averageCenter_=t.getAverageCenter(),this.hideLabel_=t.getHideLabel(),this.markers_=[],this.center_=null,this.bounds_=null,this.clusterIcon_=new e(this,t.getStyles())}function o(t,e,i){this.extend(o,google.maps.OverlayView),e=e||[],i=i||{},this.markers_=[],this.clusters_=[],this.listeners_=[],this.activeMap_=null,this.ready_=!1,this.gridSize_=i.gridSize||60,this.minClusterSize_=i.minimumClusterSize||2,this.maxZoom_=i.maxZoom||null,this.styles_=i.styles||[],this.title_=i.title||"",this.zoomOnClick_=!0,void 0!==i.zoomOnClick&&(this.zoomOnClick_=i.zoomOnClick),this.averageCenter_=!1,void 0!==i.averageCenter&&(this.averageCenter_=i.averageCenter),this.ignoreHidden_=!1,void 0!==i.ignoreHidden&&(this.ignoreHidden_=i.ignoreHidden),this.enableRetinaIcons_=!1,void 0!==i.enableRetinaIcons&&(this.enableRetinaIcons_=i.enableRetinaIcons),this.hideLabel_=!1,void 0!==i.hideLabel&&(this.hideLabel_=i.hideLabel),this.imagePath_=i.imagePath||o.IMAGE_PATH,this.imageExtension_=i.imageExtension||o.IMAGE_EXTENSION,this.imageSizes_=i.imageSizes||o.IMAGE_SIZES,this.calculator_=i.calculator||o.CALCULATOR,this.batchSize_=i.batchSize||o.BATCH_SIZE,this.batchSizeIE_=i.batchSizeIE||o.BATCH_SIZE_IE,this.clusterClass_=i.clusterClass||"cluster",-1!==navigator.userAgent.toLowerCase().indexOf("msie")&&(this.batchSize_=this.batchSizeIE_),this.setupStyles_(),this.addMarkers(e,!0),this.setMap(t)}function r(t){t=t||{},google.maps.OverlayView.apply(this,arguments),this.content_=t.content||"",this.disableAutoPan_=t.disableAutoPan||!1,this.maxWidth_=t.maxWidth||0,this.pixelOffset_=t.pixelOffset||new google.maps.Size(0,0),this.position_=t.position||new google.maps.LatLng(0,0),this.zIndex_=t.zIndex||null,this.boxClass_=t.boxClass||"infoBox",this.boxStyle_=t.boxStyle||{},this.closeBoxMargin_=t.closeBoxMargin||"2px",this.closeBoxURL_=t.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",""===t.closeBoxURL&&(this.closeBoxURL_=""),this.infoBoxClearance_=t.infoBoxClearance||new google.maps.Size(1,1),"undefined"==typeof t.visible&&("undefined"==typeof t.isHidden?t.visible=!0:t.visible=!t.isHidden),this.isHidden_=!t.visible,this.alignBottom_=t.alignBottom||!1,this.pane_=t.pane||"floatPane",this.enableEventPropagation_=t.enableEventPropagation||!1,this.div_=null,this.closeListener_=null,this.moveListener_=null,this.contextListener_=null,this.eventListeners_=null,this.fixedWidthSet_=null}function s(t,e){function i(){}i.prototype=e.prototype,t.superClass_=e.prototype,t.prototype=new i,t.prototype.constructor=t}function a(t,e,i){this.marker_=t,this.handCursorURL_=t.handCursorURL,this.labelDiv_=document.createElement("div"),this.labelDiv_.style.cssText="position: absolute; overflow: hidden;",this.eventDiv_=document.createElement("div"),this.eventDiv_.style.cssText=this.labelDiv_.style.cssText,this.eventDiv_.setAttribute("onselectstart","return false;"),this.eventDiv_.setAttribute("ondragstart","return false;"),this.crossDiv_=a.getSharedCross(e)}function l(t){t=t||{},t.labelContent=t.labelContent||"",t.labelAnchor=t.labelAnchor||new google.maps.Point(0,0),t.labelClass=t.labelClass||"markerLabels",t.labelStyle=t.labelStyle||{},t.labelInBackground=t.labelInBackground||!1,"undefined"==typeof t.labelVisible&&(t.labelVisible=!0),"undefined"==typeof t.raiseOnDrag&&(t.raiseOnDrag=!0),"undefined"==typeof t.clickable&&(t.clickable=!0),"undefined"==typeof t.draggable&&(t.draggable=!1),"undefined"==typeof t.optimized&&(t.optimized=!1),t.crossImage=t.crossImage||"http"+("https:"===document.location.protocol?"s":"")+"://maps.gstatic.com/intl/en_us/mapfiles/drag_cross_67_16.png",t.handCursor=t.handCursor||"http"+("https:"===document.location.protocol?"s":"")+"://maps.gstatic.com/intl/en_us/mapfiles/closedhand_8_8.cur",t.optimized=!1,this.label=new a(this,t.crossImage,t.handCursor),google.maps.Marker.apply(this,arguments)}function u(t){var e=t||{};this.ready_=!1,this.dragging_=!1,t.visible==i&&(t.visible=!0),t.shadow==i&&(t.shadow="7px -3px 5px rgba(88,88,88,0.7)"),t.anchor==i&&(t.anchor=p.BOTTOM),this.setValues(e)}e.prototype.onAdd=function(){var t,e,i=this;this.div_=document.createElement("div"),this.div_.className=this.className_,this.visible_&&this.show(),this.getPanes().overlayMouseTarget.appendChild(this.div_),this.boundsChangedListener_=google.maps.event.addListener(this.getMap(),"bounds_changed",function(){e=t}),google.maps.event.addDomListener(this.div_,"mousedown",function(){t=!0,e=!1}),google.maps.event.addDomListener(this.div_,"click",function(n){if(t=!1,!e){var o,r,s=i.cluster_.getMarkerClusterer();google.maps.event.trigger(s,"click",i.cluster_),google.maps.event.trigger(s,"clusterclick",i.cluster_),s.getZoomOnClick()&&(r=s.getMaxZoom(),o=i.cluster_.getBounds(),s.getMap().fitBounds(o),setTimeout(function(){s.getMap().fitBounds(o),null!==r&&s.getMap().getZoom()>r&&s.getMap().setZoom(r+1)},100)),n.cancelBubble=!0,n.stopPropagation&&n.stopPropagation()}}),google.maps.event.addDomListener(this.div_,"mouseover",function(){var t=i.cluster_.getMarkerClusterer();google.maps.event.trigger(t,"mouseover",i.cluster_)}),google.maps.event.addDomListener(this.div_,"mouseout",function(){var t=i.cluster_.getMarkerClusterer();google.maps.event.trigger(t,"mouseout",i.cluster_)})},e.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),google.maps.event.removeListener(this.boundsChangedListener_),google.maps.event.clearInstanceListeners(this.div_),this.div_.parentNode.removeChild(this.div_),this.div_=null)},e.prototype.draw=function(){if(this.visible_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.top=t.y+"px",this.div_.style.left=t.x+"px"}},e.prototype.hide=function(){this.div_&&(this.div_.style.display="none"),this.visible_=!1},e.prototype.show=function(){if(this.div_){var t="",e=this.backgroundPosition_.split(" "),i=parseInt(e[0].trim(),10),n=parseInt(e[1].trim(),10),o=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(o),t="<img src='"+this.url_+"' style='position: absolute; top: "+n+"px; left: "+i+"px; ",t+=this.cluster_.getMarkerClusterer().enableRetinaIcons_?"width: "+this.width_+"px;height: "+this.height_+"px;":"clip: rect("+-1*n+"px, "+(-1*i+this.width_)+"px, "+(-1*n+this.height_)+"px, "+-1*i+"px);",t+="'>",this.div_.innerHTML=t+"<div style='position: absolute;top: "+this.anchorText_[0]+"px;left: "+this.anchorText_[1]+"px;color: "+this.textColor_+";font-size: "+this.textSize_+"px;font-family: "+this.fontFamily_+";font-weight: "+this.fontWeight_+";font-style: "+this.fontStyle_+";text-decoration: "+this.textDecoration_+";text-align: center;width: "+this.width_+"px;line-height:"+this.height_+"px;'>"+(this.cluster_.hideLabel_?" ":this.sums_.text)+"</div>",this.div_.title="undefined"==typeof this.sums_.title||""===this.sums_.title?this.cluster_.getMarkerClusterer().getTitle():this.sums_.title,this.div_.style.display=""}this.visible_=!0},e.prototype.useStyle=function(t){this.sums_=t;var e=Math.max(0,t.index-1);e=Math.min(this.styles_.length-1,e);var i=this.styles_[e];this.url_=i.url,this.height_=i.height,this.width_=i.width,this.anchorText_=i.anchorText||[0,0],this.anchorIcon_=i.anchorIcon||[parseInt(this.height_/2,10),parseInt(this.width_/2,10)],this.textColor_=i.textColor||"black",this.textSize_=i.textSize||11,this.textDecoration_=i.textDecoration||"none",this.fontWeight_=i.fontWeight||"bold",this.fontStyle_=i.fontStyle||"normal",this.fontFamily_=i.fontFamily||"Arial,sans-serif",this.backgroundPosition_=i.backgroundPosition||"0 0"},e.prototype.setCenter=function(t){this.center_=t},e.prototype.createCss=function(t){var e=[];return e.push("cursor: pointer;"),e.push("position: absolute; top: "+t.y+"px; left: "+t.x+"px;"),e.push("width: "+this.width_+"px; height: "+this.height_+"px;"),e.join("")},e.prototype.getPosFromLatLng_=function(t){var e=this.getProjection().fromLatLngToDivPixel(t);return e.x-=this.anchorIcon_[1],e.y-=this.anchorIcon_[0],e.x=parseInt(e.x,10),e.y=parseInt(e.y,10),e},n.prototype.getSize=function(){return this.markers_.length},n.prototype.getMarkers=function(){return this.markers_},n.prototype.getCenter=function(){return this.center_},n.prototype.getMap=function(){return this.map_},n.prototype.getMarkerClusterer=function(){return this.markerClusterer_},n.prototype.getBounds=function(){var t,e=new google.maps.LatLngBounds(this.center_,this.center_),i=this.getMarkers();for(t=0;t<i.length;t++)e.extend(i[t].getPosition());return e},n.prototype.remove=function(){this.clusterIcon_.setMap(null),this.markers_=[],delete this.markers_},n.prototype.addMarker=function(t){var e,i,n;if(this.isMarkerAlreadyAdded_(t))return!1;if(this.center_){if(this.averageCenter_){var o=this.markers_.length+1,r=(this.center_.lat()*(o-1)+t.getPosition().lat())/o,s=(this.center_.lng()*(o-1)+t.getPosition().lng())/o;this.center_=new google.maps.LatLng(r,s),this.calculateBounds_()}}else this.center_=t.getPosition(),this.calculateBounds_();if(t.isAdded=!0,this.markers_.push(t),i=this.markers_.length,n=this.markerClusterer_.getMaxZoom(),null!==n&&this.map_.getZoom()>n)t.getMap()!==this.map_&&t.setMap(this.map_);else if(i<this.minClusterSize_)t.getMap()!==this.map_&&t.setMap(this.map_);else if(i===this.minClusterSize_)for(e=0;i>e;e++)this.markers_[e].setMap(null);else t.setMap(null);return!0},n.prototype.isMarkerInClusterBounds=function(t){return this.bounds_.contains(t.getPosition())},n.prototype.calculateBounds_=function(){var t=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(t)},n.prototype.updateIcon_=function(){var t=this.markers_.length,e=this.markerClusterer_.getMaxZoom();if(null!==e&&this.map_.getZoom()>e)return void this.clusterIcon_.hide();if(t<this.minClusterSize_)return void this.clusterIcon_.hide();var i=this.markerClusterer_.getStyles().length,n=this.markerClusterer_.getCalculator()(this.markers_,i);this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.useStyle(n),this.clusterIcon_.show()},n.prototype.isMarkerAlreadyAdded_=function(t){for(var e=0,i=this.markers_.length;i>e;e++)if(t===this.markers_[e])return!0;return!1},o.prototype.onAdd=function(){var t=this;this.activeMap_=this.getMap(),this.ready_=!0,this.repaint(),this.listeners_=[google.maps.event.addListener(this.getMap(),"zoom_changed",function(){t.resetViewport_(!1),(this.getZoom()===(this.get("minZoom")||0)||this.getZoom()===this.get("maxZoom"))&&google.maps.event.trigger(this,"idle")}),google.maps.event.addListener(this.getMap(),"idle",function(){t.redraw_()})]},o.prototype.onRemove=function(){var t;for(t=0;t<this.markers_.length;t++)this.markers_[t].getMap()!==this.activeMap_&&this.markers_[t].setMap(this.activeMap_);for(t=0;t<this.clusters_.length;t++)this.clusters_[t].remove();for(this.clusters_=[],t=0;t<this.listeners_.length;t++)google.maps.event.removeListener(this.listeners_[t]);this.listeners_=[],this.activeMap_=null,this.ready_=!1},o.prototype.draw=function(){},o.prototype.setupStyles_=function(){var t,e;if(!(this.styles_.length>0))for(t=0;t<this.imageSizes_.length;t++)e=this.imageSizes_[t],this.styles_.push({url:this.imagePath_+(t+1)+"."+this.imageExtension_,height:e,width:e})},o.prototype.fitMapToMarkers=function(){var t,e=this.getMarkers(),i=new google.maps.LatLngBounds;for(t=0;t<e.length;t++)i.extend(e[t].getPosition());this.getMap().fitBounds(i)},o.prototype.getGridSize=function(){return this.gridSize_},o.prototype.setGridSize=function(t){this.gridSize_=t},o.prototype.getMinimumClusterSize=function(){return this.minClusterSize_},o.prototype.setMinimumClusterSize=function(t){this.minClusterSize_=t},o.prototype.getMaxZoom=function(){return this.maxZoom_},o.prototype.setMaxZoom=function(t){this.maxZoom_=t},o.prototype.getStyles=function(){return this.styles_},o.prototype.setStyles=function(t){this.styles_=t},o.prototype.getTitle=function(){return this.title_},o.prototype.setTitle=function(t){this.title_=t},o.prototype.getZoomOnClick=function(){return this.zoomOnClick_},o.prototype.setZoomOnClick=function(t){this.zoomOnClick_=t},o.prototype.getAverageCenter=function(){return this.averageCenter_},o.prototype.setAverageCenter=function(t){this.averageCenter_=t},o.prototype.getIgnoreHidden=function(){return this.ignoreHidden_},o.prototype.setIgnoreHidden=function(t){this.ignoreHidden_=t},o.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons_},o.prototype.setEnableRetinaIcons=function(t){this.enableRetinaIcons_=t},o.prototype.getImageExtension=function(){return this.imageExtension_},o.prototype.setImageExtension=function(t){this.imageExtension_=t},o.prototype.getImagePath=function(){return this.imagePath_},o.prototype.setImagePath=function(t){this.imagePath_=t},o.prototype.getImageSizes=function(){return this.imageSizes_},o.prototype.setImageSizes=function(t){this.imageSizes_=t},o.prototype.getCalculator=function(){return this.calculator_},o.prototype.setCalculator=function(t){this.calculator_=t},o.prototype.setHideLabel=function(t){this.hideLabel_=t},o.prototype.getHideLabel=function(){return this.hideLabel_},o.prototype.getBatchSizeIE=function(){return this.batchSizeIE_},o.prototype.setBatchSizeIE=function(t){this.batchSizeIE_=t},o.prototype.getClusterClass=function(){return this.clusterClass_},o.prototype.setClusterClass=function(t){this.clusterClass_=t},o.prototype.getMarkers=function(){return this.markers_},o.prototype.getTotalMarkers=function(){return this.markers_.length},o.prototype.getClusters=function(){return this.clusters_},o.prototype.getTotalClusters=function(){return this.clusters_.length},o.prototype.addMarker=function(t,e){this.pushMarkerTo_(t),e||this.redraw_()},o.prototype.addMarkers=function(t,e){var i;for(i in t)t.hasOwnProperty(i)&&this.pushMarkerTo_(t[i]);e||this.redraw_()},o.prototype.pushMarkerTo_=function(t){if(t.getDraggable()){var e=this;google.maps.event.addListener(t,"dragend",function(){e.ready_&&(this.isAdded=!1,e.repaint())})}t.isAdded=!1,this.markers_.push(t)},o.prototype.removeMarker=function(t,e,i){var n=!i,o=this.removeMarker_(t,n);return!e&&o&&this.repaint(),o},o.prototype.removeMarkers=function(t,e,i){var n,o,r=!1,s=!i;for(n=0;n<t.length;n++)o=this.removeMarker_(t[n],s),r=r||o;return!e&&r&&this.repaint(),r},o.prototype.removeMarker_=function(t,e){var i,n=-1;if(this.markers_.indexOf)n=this.markers_.indexOf(t);else for(i=0;i<this.markers_.length;i++)if(t===this.markers_[i]){n=i;break}return-1!==n&&(e&&t.setMap(null),this.markers_.splice(n,1),!0)},o.prototype.clearMarkers=function(){this.resetViewport_(!0),this.markers_=[]},o.prototype.repaint=function(){var t=this.clusters_.slice();this.clusters_=[],this.resetViewport_(!1),this.redraw_(),setTimeout(function(){var e;for(e=0;e<t.length;e++)t[e].remove()},0)},o.prototype.getExtendedBounds=function(t){var e=this.getProjection(),i=new google.maps.LatLng(t.getNorthEast().lat(),t.getNorthEast().lng()),n=new google.maps.LatLng(t.getSouthWest().lat(),t.getSouthWest().lng()),o=e.fromLatLngToDivPixel(i);o.x+=this.gridSize_,o.y-=this.gridSize_;var r=e.fromLatLngToDivPixel(n);r.x-=this.gridSize_,r.y+=this.gridSize_;var s=e.fromDivPixelToLatLng(o),a=e.fromDivPixelToLatLng(r);return t.extend(s),t.extend(a),t},o.prototype.redraw_=function(){this.createClusters_(0)},o.prototype.resetViewport_=function(t){var e,i;for(e=0;e<this.clusters_.length;e++)this.clusters_[e].remove();for(this.clusters_=[],e=0;e<this.markers_.length;e++)i=this.markers_[e],i.isAdded=!1,t&&i.setMap(null)},o.prototype.distanceBetweenPoints_=function(t,e){var i=6371,n=(e.lat()-t.lat())*Math.PI/180,o=(e.lng()-t.lng())*Math.PI/180,r=Math.sin(n/2)*Math.sin(n/2)+Math.cos(t.lat()*Math.PI/180)*Math.cos(e.lat()*Math.PI/180)*Math.sin(o/2)*Math.sin(o/2),s=2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r)),a=i*s;return a},o.prototype.isMarkerInBounds_=function(t,e){return e.contains(t.getPosition())},o.prototype.addToClosestCluster_=function(t){var e,i,o,r,s=4e4,a=null;for(e=0;e<this.clusters_.length;e++)o=this.clusters_[e],r=o.getCenter(),r&&(i=this.distanceBetweenPoints_(r,t.getPosition()),s>i&&(s=i,a=o));a&&a.isMarkerInClusterBounds(t)?a.addMarker(t):(o=new n(this),o.addMarker(t),this.clusters_.push(o))},o.prototype.createClusters_=function(t){var e,i,n,o=this;if(this.ready_){0===t&&(google.maps.event.trigger(this,"clusteringbegin",this),"undefined"!=typeof this.timerRefStatic&&(clearTimeout(this.timerRefStatic),delete this.timerRefStatic)),n=this.getMap().getZoom()>3?new google.maps.LatLngBounds(this.getMap().getBounds().getSouthWest(),this.getMap().getBounds().getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,(-178.48388434375)),new google.maps.LatLng((-85.08136444384544),178.00048865625));var r=this.getExtendedBounds(n),s=Math.min(t+this.batchSize_,this.markers_.length);for(e=t;s>e;e++)i=this.markers_[e],!i.isAdded&&this.isMarkerInBounds_(i,r)&&(!this.ignoreHidden_||this.ignoreHidden_&&i.getVisible())&&this.addToClosestCluster_(i);if(s<this.markers_.length)this.timerRefStatic=setTimeout(function(){o.createClusters_(s)},0);else for(delete this.timerRefStatic,google.maps.event.trigger(this,"clusteringend",this),e=0;e<this.clusters_.length;e++)this.clusters_[e].updateIcon_()}},o.prototype.extend=function(t,e){return function(t){var e;for(e in t.prototype)this.prototype[e]=t.prototype[e];return this}.apply(t,[e])},o.CALCULATOR=function(t,e){for(var i=0,n="",o=t.length.toString(),r=o;0!==r;)r=parseInt(r/10,10),i++;return i=Math.min(i,e),{text:o,index:i,title:n}},o.BATCH_SIZE=2e3,o.BATCH_SIZE_IE=500,o.IMAGE_PATH="//cdn.rawgit.com/mahnunchik/markerclustererplus/master/images/m",o.IMAGE_EXTENSION="png",o.IMAGE_SIZES=[53,56,66,78,90],"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),r.prototype=new google.maps.OverlayView,r.prototype.createInfoBoxDiv_=function(){var t,e,i,n=this,o=function(t){t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()},r=function(t){t.returnValue=!1,t.preventDefault&&t.preventDefault(),n.enableEventPropagation_||o(t)};if(!this.div_){if(this.div_=document.createElement("div"),this.setBoxStyle_(),"undefined"==typeof this.content_.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+this.content_:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(this.content_)),this.getPanes()[this.pane_].appendChild(this.div_),this.addClickHandler_(),this.div_.style.width?this.fixedWidthSet_=!0:0!==this.maxWidth_&&this.div_.offsetWidth>this.maxWidth_?(this.div_.style.width=this.maxWidth_,this.div_.style.overflow="auto",this.fixedWidthSet_=!0):(i=this.getBoxWidths_(),this.div_.style.width=this.div_.offsetWidth-i.left-i.right+"px",this.fixedWidthSet_=!1),this.panBox_(this.disableAutoPan_),!this.enableEventPropagation_){for(this.eventListeners_=[],e=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"],t=0;t<e.length;t++)this.eventListeners_.push(google.maps.event.addDomListener(this.div_,e[t],o));this.eventListeners_.push(google.maps.event.addDomListener(this.div_,"mouseover",function(t){this.style.cursor="default"}))}this.contextListener_=google.maps.event.addDomListener(this.div_,"contextmenu",r),google.maps.event.trigger(this,"domready")}},r.prototype.getCloseBoxImg_=function(){var t="";return""!==this.closeBoxURL_&&(t="<img",t+=" src='"+this.closeBoxURL_+"'",t+=" align=right",t+=" style='",t+=" position: relative;",t+=" cursor: pointer;",t+=" margin: "+this.closeBoxMargin_+";",t+="'>"),t},r.prototype.addClickHandler_=function(){var t;""!==this.closeBoxURL_?(t=this.div_.firstChild,this.closeListener_=google.maps.event.addDomListener(t,"click",this.getCloseClickHandler_())):this.closeListener_=null},r.prototype.getCloseClickHandler_=function(){var t=this;return function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),google.maps.event.trigger(t,"closeclick"),t.close()}},r.prototype.panBox_=function(t){var e,i,n=0,o=0;if(!t&&(e=this.getMap(),e instanceof google.maps.Map)){e.getBounds().contains(this.position_)||e.setCenter(this.position_),i=e.getBounds();var r=e.getDiv(),s=r.offsetWidth,a=r.offsetHeight,l=this.pixelOffset_.width,u=this.pixelOffset_.height,p=this.div_.offsetWidth,h=this.div_.offsetHeight,c=this.infoBoxClearance_.width,d=this.infoBoxClearance_.height,g=this.getProjection().fromLatLngToContainerPixel(this.position_);if(g.x<-l+c?n=g.x+l-c:g.x+p+l+c>s&&(n=g.x+p+l+c-s),this.alignBottom_?g.y<-u+d+h?o=g.y+u-d-h:g.y+u+d>a&&(o=g.y+u+d-a):g.y<-u+d?o=g.y+u-d:g.y+h+u+d>a&&(o=g.y+h+u+d-a),0!==n||0!==o){e.getCenter();e.panBy(n,o)}}},r.prototype.setBoxStyle_=function(){var t,e;if(this.div_){this.div_.className=this.boxClass_,this.div_.style.cssText="",e=this.boxStyle_;for(t in e)e.hasOwnProperty(t)&&(this.div_.style[t]=e[t]);this.div_.style.WebkitTransform="translateZ(0)","undefined"!=typeof this.div_.style.opacity&&""!==this.div_.style.opacity&&(this.div_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(Opacity='+100*this.div_.style.opacity+')"',this.div_.style.filter="alpha(opacity="+100*this.div_.style.opacity+")"),this.div_.style.position="absolute",this.div_.style.visibility="hidden",null!==this.zIndex_&&(this.div_.style.zIndex=this.zIndex_)}},r.prototype.getBoxWidths_=function(){var t,e={top:0,bottom:0,left:0,right:0},i=this.div_;return document.defaultView&&document.defaultView.getComputedStyle?(t=i.ownerDocument.defaultView.getComputedStyle(i,""),t&&(e.top=parseInt(t.borderTopWidth,10)||0,e.bottom=parseInt(t.borderBottomWidth,10)||0,e.left=parseInt(t.borderLeftWidth,10)||0,e.right=parseInt(t.borderRightWidth,10)||0)):document.documentElement.currentStyle&&i.currentStyle&&(e.top=parseInt(i.currentStyle.borderTopWidth,10)||0,e.bottom=parseInt(i.currentStyle.borderBottomWidth,10)||0,e.left=parseInt(i.currentStyle.borderLeftWidth,10)||0,e.right=parseInt(i.currentStyle.borderRightWidth,10)||0),e},r.prototype.onRemove=function(){this.div_&&(this.div_.parentNode.removeChild(this.div_),this.div_=null)},r.prototype.draw=function(){this.createInfoBoxDiv_();var t=this.getProjection().fromLatLngToDivPixel(this.position_);this.div_.style.left=t.x+this.pixelOffset_.width+"px",this.alignBottom_?this.div_.style.bottom=-(t.y+this.pixelOffset_.height)+"px":this.div_.style.top=t.y+this.pixelOffset_.height+"px",this.isHidden_?this.div_.style.visibility="hidden":this.div_.style.visibility="visible"},r.prototype.setOptions=function(t){"undefined"!=typeof t.boxClass&&(this.boxClass_=t.boxClass,this.setBoxStyle_()),"undefined"!=typeof t.boxStyle&&(this.boxStyle_=t.boxStyle,this.setBoxStyle_()),"undefined"!=typeof t.content&&this.setContent(t.content),"undefined"!=typeof t.disableAutoPan&&(this.disableAutoPan_=t.disableAutoPan),"undefined"!=typeof t.maxWidth&&(this.maxWidth_=t.maxWidth),"undefined"!=typeof t.pixelOffset&&(this.pixelOffset_=t.pixelOffset),"undefined"!=typeof t.alignBottom&&(this.alignBottom_=t.alignBottom),"undefined"!=typeof t.position&&this.setPosition(t.position),"undefined"!=typeof t.zIndex&&this.setZIndex(t.zIndex),"undefined"!=typeof t.closeBoxMargin&&(this.closeBoxMargin_=t.closeBoxMargin),"undefined"!=typeof t.closeBoxURL&&(this.closeBoxURL_=t.closeBoxURL),"undefined"!=typeof t.infoBoxClearance&&(this.infoBoxClearance_=t.infoBoxClearance),"undefined"!=typeof t.isHidden&&(this.isHidden_=t.isHidden),"undefined"!=typeof t.visible&&(this.isHidden_=!t.visible),"undefined"!=typeof t.enableEventPropagation&&(this.enableEventPropagation_=t.enableEventPropagation),this.div_&&this.draw()},r.prototype.setContent=function(t){this.content_=t,this.div_&&(this.closeListener_&&(google.maps.event.removeListener(this.closeListener_),this.closeListener_=null),this.fixedWidthSet_||(this.div_.style.width=""),"undefined"==typeof t.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+t:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(t)),this.fixedWidthSet_||(this.div_.style.width=this.div_.offsetWidth+"px","undefined"==typeof t.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+t:(this.div_.innerHTML=this.getCloseBoxImg_(),
this.div_.appendChild(t))),this.addClickHandler_()),google.maps.event.trigger(this,"content_changed")},r.prototype.setPosition=function(t){this.position_=t,this.div_&&this.draw(),google.maps.event.trigger(this,"position_changed")},r.prototype.setZIndex=function(t){this.zIndex_=t,this.div_&&(this.div_.style.zIndex=t),google.maps.event.trigger(this,"zindex_changed")},r.prototype.setVisible=function(t){this.isHidden_=!t,this.div_&&(this.div_.style.visibility=this.isHidden_?"hidden":"visible")},r.prototype.getContent=function(){return this.content_},r.prototype.getPosition=function(){return this.position_},r.prototype.getZIndex=function(){return this.zIndex_},r.prototype.getVisible=function(){var t;return t="undefined"!=typeof this.getMap()&&null!==this.getMap()&&!this.isHidden_},r.prototype.show=function(){this.isHidden_=!1,this.div_&&(this.div_.style.visibility="visible")},r.prototype.hide=function(){this.isHidden_=!0,this.div_&&(this.div_.style.visibility="hidden")},r.prototype.open=function(t,e){var i=this;e&&(this.position_=e.getPosition(),this.moveListener_=google.maps.event.addListener(e,"position_changed",function(){i.setPosition(this.getPosition())})),this.setMap(t),this.div_&&this.panBox_()},r.prototype.close=function(){var t;if(this.closeListener_&&(google.maps.event.removeListener(this.closeListener_),this.closeListener_=null),this.eventListeners_){for(t=0;t<this.eventListeners_.length;t++)google.maps.event.removeListener(this.eventListeners_[t]);this.eventListeners_=null}this.moveListener_&&(google.maps.event.removeListener(this.moveListener_),this.moveListener_=null),this.contextListener_&&(google.maps.event.removeListener(this.contextListener_),this.contextListener_=null),this.setMap(null)},function(){function e(t,e){var i=this,n=new google.maps.OverlayView;n.onAdd=function(){i.init_(t,e)},n.draw=function(){},n.onRemove=function(){},n.setMap(t),this.prjov_=n}var i=function(t){var e;switch(t){case"thin":e="2px";break;case"medium":e="4px";break;case"thick":e="6px";break;default:e=t}return e},n=function(t){var e,n={};if(document.defaultView&&document.defaultView.getComputedStyle){if(e=t.ownerDocument.defaultView.getComputedStyle(t,""))return n.top=parseInt(e.borderTopWidth,10)||0,n.bottom=parseInt(e.borderBottomWidth,10)||0,n.left=parseInt(e.borderLeftWidth,10)||0,n.right=parseInt(e.borderRightWidth,10)||0,n}else if(document.documentElement.currentStyle&&t.currentStyle)return n.top=parseInt(i(t.currentStyle.borderTopWidth),10)||0,n.bottom=parseInt(i(t.currentStyle.borderBottomWidth),10)||0,n.left=parseInt(i(t.currentStyle.borderLeftWidth),10)||0,n.right=parseInt(i(t.currentStyle.borderRightWidth),10)||0,n;return n.top=parseInt(t.style["border-top-width"],10)||0,n.bottom=parseInt(t.style["border-bottom-width"],10)||0,n.left=parseInt(t.style["border-left-width"],10)||0,n.right=parseInt(t.style["border-right-width"],10)||0,n},o={x:0,y:0},r=function(t){o.x="undefined"!=typeof document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft,o.y="undefined"!=typeof document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop};r();var s=function(e){var i=0,n=0;return e=e||t.event,"undefined"!=typeof e.pageX?(i=e.pageX,n=e.pageY):"undefined"!=typeof e.clientX&&(i=e.clientX+o.x,n=e.clientY+o.y),{left:i,top:n}},a=function(e){for(var i=e.offsetLeft,n=e.offsetTop,o=e.offsetParent;null!==o;){o!==document.body&&o!==document.documentElement&&(i-=o.scrollLeft,n-=o.scrollTop);var r=o,s=r.offsetLeft,a=r.offsetTop;if(!s&&!a&&t.getComputedStyle){var l=document.defaultView.getComputedStyle(r,null).MozTransform||document.defaultView.getComputedStyle(r,null).WebkitTransform;if(l&&"string"==typeof l){var u=l.split(",");s+=parseInt(u[4],10)||0,a+=parseInt(u[5],10)||0}}i+=s,n+=a,o=o.offsetParent}return{left:i,top:n}},l=function(t,e){if(t&&e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},u=function(t,e){"undefined"!=typeof e&&(t.style.opacity=e),"undefined"!=typeof t.style.opacity&&""!==t.style.opacity&&(t.style.filter="alpha(opacity="+100*t.style.opacity+")")};e.prototype.init_=function(e,i){var o,s=this;for(this.map_=e,i=i||{},this.key_=i.key||"shift",this.key_=this.key_.toLowerCase(),this.borderWidths_=n(this.map_.getDiv()),this.veilDiv_=[],o=0;o<4;o++)this.veilDiv_[o]=document.createElement("div"),this.veilDiv_[o].onselectstart=function(){return!1},l(this.veilDiv_[o].style,{backgroundColor:"gray",opacity:.25,cursor:"crosshair"}),l(this.veilDiv_[o].style,i.paneStyle),l(this.veilDiv_[o].style,i.veilStyle),l(this.veilDiv_[o].style,{position:"absolute",overflow:"hidden",display:"none"}),"shift"===this.key_&&(this.veilDiv_[o].style.MozUserSelect="none"),u(this.veilDiv_[o]),"transparent"===this.veilDiv_[o].style.backgroundColor&&(this.veilDiv_[o].style.backgroundColor="white",u(this.veilDiv_[o],0)),this.map_.getDiv().appendChild(this.veilDiv_[o]);this.noZoom_=i.noZoom||!1,this.visualEnabled_=i.visualEnabled||!1,this.visualClass_=i.visualClass||"",this.visualPosition_=i.visualPosition||google.maps.ControlPosition.LEFT_TOP,this.visualPositionOffset_=i.visualPositionOffset||new google.maps.Size(35,0),this.visualPositionIndex_=i.visualPositionIndex||null,this.visualSprite_=i.visualSprite||"http"+("https:"===document.location.protocol?"s":"")+"://maps.gstatic.com/mapfiles/ftr/controls/dragzoom_btn.png",this.visualSize_=i.visualSize||new google.maps.Size(20,20),this.visualTips_=i.visualTips||{},this.visualTips_.off=this.visualTips_.off||"Turn on drag zoom mode",this.visualTips_.on=this.visualTips_.on||"Turn off drag zoom mode",this.boxDiv_=document.createElement("div"),l(this.boxDiv_.style,{border:"4px solid #736AFF"}),l(this.boxDiv_.style,i.boxStyle),l(this.boxDiv_.style,{position:"absolute",display:"none"}),u(this.boxDiv_),this.map_.getDiv().appendChild(this.boxDiv_),this.boxBorderWidths_=n(this.boxDiv_),this.listeners_=[google.maps.event.addDomListener(document,"keydown",function(t){s.onKeyDown_(t)}),google.maps.event.addDomListener(document,"keyup",function(t){s.onKeyUp_(t)}),google.maps.event.addDomListener(this.veilDiv_[0],"mousedown",function(t){s.onMouseDown_(t)}),google.maps.event.addDomListener(this.veilDiv_[1],"mousedown",function(t){s.onMouseDown_(t)}),google.maps.event.addDomListener(this.veilDiv_[2],"mousedown",function(t){s.onMouseDown_(t)}),google.maps.event.addDomListener(this.veilDiv_[3],"mousedown",function(t){s.onMouseDown_(t)}),google.maps.event.addDomListener(document,"mousedown",function(t){s.onMouseDownDocument_(t)}),google.maps.event.addDomListener(document,"mousemove",function(t){s.onMouseMove_(t)}),google.maps.event.addDomListener(document,"mouseup",function(t){s.onMouseUp_(t)}),google.maps.event.addDomListener(t,"scroll",r)],this.hotKeyDown_=!1,this.mouseDown_=!1,this.dragging_=!1,this.startPt_=null,this.endPt_=null,this.mapWidth_=null,this.mapHeight_=null,this.mousePosn_=null,this.mapPosn_=null,this.visualEnabled_&&(this.buttonDiv_=this.initControl_(this.visualPositionOffset_),null!==this.visualPositionIndex_&&(this.buttonDiv_.index=this.visualPositionIndex_),this.map_.controls[this.visualPosition_].push(this.buttonDiv_),this.controlIndex_=this.map_.controls[this.visualPosition_].length-1)},e.prototype.initControl_=function(t){var e,i,n=this;return e=document.createElement("div"),e.className=this.visualClass_,e.style.position="relative",e.style.overflow="hidden",e.style.height=this.visualSize_.height+"px",e.style.width=this.visualSize_.width+"px",e.title=this.visualTips_.off,i=document.createElement("img"),i.src=this.visualSprite_,i.style.position="absolute",i.style.left=-(2*this.visualSize_.width)+"px",i.style.top="0px",e.appendChild(i),e.onclick=function(t){n.hotKeyDown_=!n.hotKeyDown_,n.hotKeyDown_?(n.buttonDiv_.firstChild.style.left=-(0*n.visualSize_.width)+"px",n.buttonDiv_.title=n.visualTips_.on,n.activatedByControl_=!0,google.maps.event.trigger(n,"activate")):(n.buttonDiv_.firstChild.style.left=-(2*n.visualSize_.width)+"px",n.buttonDiv_.title=n.visualTips_.off,google.maps.event.trigger(n,"deactivate")),n.onMouseMove_(t)},e.onmouseover=function(){n.buttonDiv_.firstChild.style.left=-(1*n.visualSize_.width)+"px"},e.onmouseout=function(){n.hotKeyDown_?(n.buttonDiv_.firstChild.style.left=-(0*n.visualSize_.width)+"px",n.buttonDiv_.title=n.visualTips_.on):(n.buttonDiv_.firstChild.style.left=-(2*n.visualSize_.width)+"px",n.buttonDiv_.title=n.visualTips_.off)},e.ondragstart=function(){return!1},l(e.style,{cursor:"pointer",marginTop:t.height+"px",marginLeft:t.width+"px"}),e},e.prototype.isHotKeyDown_=function(e){var i;if(e=e||t.event,i=e.shiftKey&&"shift"===this.key_||e.altKey&&"alt"===this.key_||e.ctrlKey&&"ctrl"===this.key_,!i)switch(e.keyCode){case 16:"shift"===this.key_&&(i=!0);break;case 17:"ctrl"===this.key_&&(i=!0);break;case 18:"alt"===this.key_&&(i=!0)}return i},e.prototype.isMouseOnMap_=function(){var t=this.mousePosn_;if(t){var e=this.mapPosn_,i=this.map_.getDiv();return t.left>e.left&&t.left<e.left+i.offsetWidth&&t.top>e.top&&t.top<e.top+i.offsetHeight}return!1},e.prototype.setVeilVisibility_=function(){var t;if(this.map_&&this.hotKeyDown_&&this.isMouseOnMap_()){var e=this.map_.getDiv();if(this.mapWidth_=e.offsetWidth-(this.borderWidths_.left+this.borderWidths_.right),this.mapHeight_=e.offsetHeight-(this.borderWidths_.top+this.borderWidths_.bottom),this.activatedByControl_){var i=parseInt(this.buttonDiv_.style.left,10)+this.visualPositionOffset_.width,n=parseInt(this.buttonDiv_.style.top,10)+this.visualPositionOffset_.height,o=this.visualSize_.width,r=this.visualSize_.height;for(this.veilDiv_[0].style.top="0px",this.veilDiv_[0].style.left="0px",this.veilDiv_[0].style.width=i+"px",this.veilDiv_[0].style.height=this.mapHeight_+"px",this.veilDiv_[1].style.top="0px",this.veilDiv_[1].style.left=i+o+"px",this.veilDiv_[1].style.width=this.mapWidth_-(i+o)+"px",this.veilDiv_[1].style.height=this.mapHeight_+"px",this.veilDiv_[2].style.top="0px",this.veilDiv_[2].style.left=i+"px",this.veilDiv_[2].style.width=o+"px",this.veilDiv_[2].style.height=n+"px",this.veilDiv_[3].style.top=n+r+"px",this.veilDiv_[3].style.left=i+"px",this.veilDiv_[3].style.width=o+"px",this.veilDiv_[3].style.height=this.mapHeight_-(n+r)+"px",t=0;t<this.veilDiv_.length;t++)this.veilDiv_[t].style.display="block"}else{for(this.veilDiv_[0].style.left="0px",this.veilDiv_[0].style.top="0px",this.veilDiv_[0].style.width=this.mapWidth_+"px",this.veilDiv_[0].style.height=this.mapHeight_+"px",t=1;t<this.veilDiv_.length;t++)this.veilDiv_[t].style.width="0px",this.veilDiv_[t].style.height="0px";for(t=0;t<this.veilDiv_.length;t++)this.veilDiv_[t].style.display="block"}}else for(t=0;t<this.veilDiv_.length;t++)this.veilDiv_[t].style.display="none"},e.prototype.onKeyDown_=function(t){this.map_&&!this.hotKeyDown_&&this.isHotKeyDown_(t)&&(this.mapPosn_=a(this.map_.getDiv()),this.hotKeyDown_=!0,this.activatedByControl_=!1,this.setVeilVisibility_(),google.maps.event.trigger(this,"activate"))},e.prototype.getMousePoint_=function(t){var e=s(t),i=new google.maps.Point;return i.x=e.left-this.mapPosn_.left-this.borderWidths_.left,i.y=e.top-this.mapPosn_.top-this.borderWidths_.top,i.x=Math.min(i.x,this.mapWidth_),i.y=Math.min(i.y,this.mapHeight_),i.x=Math.max(i.x,0),i.y=Math.max(i.y,0),i},e.prototype.onMouseDown_=function(t){if(this.map_&&this.hotKeyDown_){this.mapPosn_=a(this.map_.getDiv()),this.dragging_=!0,this.startPt_=this.endPt_=this.getMousePoint_(t),this.boxDiv_.style.width=this.boxDiv_.style.height="0px";var e=this.prjov_.getProjection(),i=e.fromContainerPixelToLatLng(this.startPt_);google.maps.event.trigger(this,"dragstart",i)}},e.prototype.onMouseDownDocument_=function(t){this.mouseDown_=!0},e.prototype.onMouseMove_=function(t){if(this.mousePosn_=s(t),this.dragging_){this.endPt_=this.getMousePoint_(t);var e=Math.min(this.startPt_.x,this.endPt_.x),i=Math.min(this.startPt_.y,this.endPt_.y),n=Math.abs(this.startPt_.x-this.endPt_.x),o=Math.abs(this.startPt_.y-this.endPt_.y),r=Math.max(0,n-(this.boxBorderWidths_.left+this.boxBorderWidths_.right)),l=Math.max(0,o-(this.boxBorderWidths_.top+this.boxBorderWidths_.bottom));this.veilDiv_[0].style.top="0px",this.veilDiv_[0].style.left="0px",this.veilDiv_[0].style.width=e+"px",this.veilDiv_[0].style.height=this.mapHeight_+"px",this.veilDiv_[1].style.top="0px",this.veilDiv_[1].style.left=e+n+"px",this.veilDiv_[1].style.width=this.mapWidth_-(e+n)+"px",this.veilDiv_[1].style.height=this.mapHeight_+"px",this.veilDiv_[2].style.top="0px",this.veilDiv_[2].style.left=e+"px",this.veilDiv_[2].style.width=n+"px",this.veilDiv_[2].style.height=i+"px",this.veilDiv_[3].style.top=i+o+"px",this.veilDiv_[3].style.left=e+"px",this.veilDiv_[3].style.width=n+"px",this.veilDiv_[3].style.height=this.mapHeight_-(i+o)+"px",this.boxDiv_.style.top=i+"px",this.boxDiv_.style.left=e+"px",this.boxDiv_.style.width=r+"px",this.boxDiv_.style.height=l+"px",this.boxDiv_.style.display="block",google.maps.event.trigger(this,"drag",new google.maps.Point(e,i+o),new google.maps.Point(e+n,i),this.prjov_.getProjection())}else this.mouseDown_||(this.mapPosn_=a(this.map_.getDiv()),this.setVeilVisibility_())},e.prototype.onMouseUp_=function(t){var e,i=this;if(this.mouseDown_=!1,this.dragging_){if(this.getMousePoint_(t).x===this.startPt_.x&&this.getMousePoint_(t).y===this.startPt_.y)return void this.onKeyUp_(t);var n=Math.min(this.startPt_.x,this.endPt_.x),o=Math.min(this.startPt_.y,this.endPt_.y),r=Math.abs(this.startPt_.x-this.endPt_.x),s=Math.abs(this.startPt_.y-this.endPt_.y),a=!0;a&&(n+=this.borderWidths_.left,o+=this.borderWidths_.top);var l=this.prjov_.getProjection(),u=l.fromContainerPixelToLatLng(new google.maps.Point(n,o+s)),p=l.fromContainerPixelToLatLng(new google.maps.Point(n+r,o)),h=new google.maps.LatLngBounds(u,p);if(this.noZoom_)this.boxDiv_.style.display="none";else{e=this.map_.getZoom(),this.map_.fitBounds(h),this.map_.getZoom()<e&&this.map_.setZoom(e);var c=l.fromLatLngToContainerPixel(u),d=l.fromLatLngToContainerPixel(p);a&&(c.x-=this.borderWidths_.left,c.y-=this.borderWidths_.top,d.x-=this.borderWidths_.left,d.y-=this.borderWidths_.top),this.boxDiv_.style.left=c.x+"px",this.boxDiv_.style.top=d.y+"px",this.boxDiv_.style.width=Math.abs(d.x-c.x)-(this.boxBorderWidths_.left+this.boxBorderWidths_.right)+"px",this.boxDiv_.style.height=Math.abs(d.y-c.y)-(this.boxBorderWidths_.top+this.boxBorderWidths_.bottom)+"px",setTimeout(function(){i.boxDiv_.style.display="none"},1e3)}this.dragging_=!1,this.onMouseMove_(t),google.maps.event.trigger(this,"dragend",h),this.isHotKeyDown_(t)||this.onKeyUp_(t)}},e.prototype.onKeyUp_=function(t){var e,i,n,o,r,s,a,l,u=null;if(this.map_&&this.hotKeyDown_){for(this.hotKeyDown_=!1,this.dragging_&&(this.boxDiv_.style.display="none",this.dragging_=!1,i=Math.min(this.startPt_.x,this.endPt_.x),n=Math.min(this.startPt_.y,this.endPt_.y),o=Math.abs(this.startPt_.x-this.endPt_.x),r=Math.abs(this.startPt_.y-this.endPt_.y),s=this.prjov_.getProjection(),a=s.fromContainerPixelToLatLng(new google.maps.Point(i,n+r)),l=s.fromContainerPixelToLatLng(new google.maps.Point(i+o,n)),u=new google.maps.LatLngBounds(a,l)),e=0;e<this.veilDiv_.length;e++)this.veilDiv_[e].style.display="none";this.visualEnabled_&&(this.buttonDiv_.firstChild.style.left=-(2*this.visualSize_.width)+"px",this.buttonDiv_.title=this.visualTips_.off,this.buttonDiv_.style.display=""),google.maps.event.trigger(this,"deactivate",u)}},google.maps.Map.prototype.enableKeyDragZoom=function(t){this.dragZoom_=new e(this,t)},google.maps.Map.prototype.disableKeyDragZoom=function(){var t,e=this.dragZoom_;if(e){for(t=0;t<e.listeners_.length;++t)google.maps.event.removeListener(e.listeners_[t]);for(this.getDiv().removeChild(e.boxDiv_),t=0;t<e.veilDiv_.length;t++)this.getDiv().removeChild(e.veilDiv_[t]);e.visualEnabled_&&this.controls[e.visualPosition_].removeAt(e.controlIndex_),e.prjov_.setMap(null),this.dragZoom_=null}},google.maps.Map.prototype.keyDragZoomEnabled=function(){return null!==this.dragZoom_},google.maps.Map.prototype.getDragZoomObject=function(){return this.dragZoom_}}(),s(a,google.maps.OverlayView),a.getSharedCross=function(t){var e;return"undefined"==typeof a.getSharedCross.crossDiv&&(e=document.createElement("img"),e.style.cssText="position: absolute; z-index: 1000002; display: none;",e.style.marginLeft="-8px",e.style.marginTop="-9px",e.src=t,a.getSharedCross.crossDiv=e),a.getSharedCross.crossDiv},a.prototype.onAdd=function(){var t,e,i,n,o,r,s,l=this,u=!1,p=!1,h=20,c="url("+this.handCursorURL_+")",d=function(t){t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()},g=function(){l.marker_.setAnimation(null)};this.getPanes().overlayImage.appendChild(this.labelDiv_),this.getPanes().overlayMouseTarget.appendChild(this.eventDiv_),"undefined"==typeof a.getSharedCross.processed&&(this.getPanes().overlayImage.appendChild(this.crossDiv_),a.getSharedCross.processed=!0),this.listeners_=[google.maps.event.addDomListener(this.eventDiv_,"mouseover",function(t){(l.marker_.getDraggable()||l.marker_.getClickable())&&(this.style.cursor="pointer",google.maps.event.trigger(l.marker_,"mouseover",t))}),google.maps.event.addDomListener(this.eventDiv_,"mouseout",function(t){!l.marker_.getDraggable()&&!l.marker_.getClickable()||p||(this.style.cursor=l.marker_.getCursor(),google.maps.event.trigger(l.marker_,"mouseout",t))}),google.maps.event.addDomListener(this.eventDiv_,"mousedown",function(t){p=!1,l.marker_.getDraggable()&&(u=!0,this.style.cursor=c),(l.marker_.getDraggable()||l.marker_.getClickable())&&(google.maps.event.trigger(l.marker_,"mousedown",t),d(t))}),google.maps.event.addDomListener(document,"mouseup",function(e){var i;if(u&&(u=!1,l.eventDiv_.style.cursor="pointer",google.maps.event.trigger(l.marker_,"mouseup",e)),p){if(o){i=l.getProjection().fromLatLngToDivPixel(l.marker_.getPosition()),i.y+=h,l.marker_.setPosition(l.getProjection().fromDivPixelToLatLng(i));try{l.marker_.setAnimation(google.maps.Animation.BOUNCE),setTimeout(g,1406)}catch(r){}}l.crossDiv_.style.display="none",l.marker_.setZIndex(t),n=!0,p=!1,e.latLng=l.marker_.getPosition(),google.maps.event.trigger(l.marker_,"dragend",e)}}),google.maps.event.addListener(l.marker_.getMap(),"mousemove",function(n){var a;u&&(p?(n.latLng=new google.maps.LatLng(n.latLng.lat()-e,n.latLng.lng()-i),a=l.getProjection().fromLatLngToDivPixel(n.latLng),o&&(l.crossDiv_.style.left=a.x+"px",l.crossDiv_.style.top=a.y+"px",l.crossDiv_.style.display="",a.y-=h),l.marker_.setPosition(l.getProjection().fromDivPixelToLatLng(a)),o&&(l.eventDiv_.style.top=a.y+h+"px"),google.maps.event.trigger(l.marker_,"drag",n)):(e=n.latLng.lat()-l.marker_.getPosition().lat(),i=n.latLng.lng()-l.marker_.getPosition().lng(),t=l.marker_.getZIndex(),r=l.marker_.getPosition(),s=l.marker_.getMap().getCenter(),o=l.marker_.get("raiseOnDrag"),p=!0,l.marker_.setZIndex(1e6),n.latLng=l.marker_.getPosition(),google.maps.event.trigger(l.marker_,"dragstart",n)))}),google.maps.event.addDomListener(document,"keydown",function(t){p&&27===t.keyCode&&(o=!1,l.marker_.setPosition(r),l.marker_.getMap().setCenter(s),google.maps.event.trigger(document,"mouseup",t))}),google.maps.event.addDomListener(this.eventDiv_,"click",function(t){(l.marker_.getDraggable()||l.marker_.getClickable())&&(n?n=!1:(google.maps.event.trigger(l.marker_,"click",t),d(t)))}),google.maps.event.addDomListener(this.eventDiv_,"dblclick",function(t){(l.marker_.getDraggable()||l.marker_.getClickable())&&(google.maps.event.trigger(l.marker_,"dblclick",t),d(t))}),google.maps.event.addListener(this.marker_,"dragstart",function(t){p||(o=this.get("raiseOnDrag"))}),google.maps.event.addListener(this.marker_,"drag",function(t){p||o&&(l.setPosition(h),l.labelDiv_.style.zIndex=1e6+(this.get("labelInBackground")?-1:1))}),google.maps.event.addListener(this.marker_,"dragend",function(t){p||o&&l.setPosition(0)}),google.maps.event.addListener(this.marker_,"position_changed",function(){l.setPosition()}),google.maps.event.addListener(this.marker_,"zindex_changed",function(){l.setZIndex()}),google.maps.event.addListener(this.marker_,"visible_changed",function(){l.setVisible()}),google.maps.event.addListener(this.marker_,"labelvisible_changed",function(){l.setVisible()}),google.maps.event.addListener(this.marker_,"title_changed",function(){l.setTitle()}),google.maps.event.addListener(this.marker_,"labelcontent_changed",function(){l.setContent()}),google.maps.event.addListener(this.marker_,"labelanchor_changed",function(){l.setAnchor()}),google.maps.event.addListener(this.marker_,"labelclass_changed",function(){l.setStyles()}),google.maps.event.addListener(this.marker_,"labelstyle_changed",function(){l.setStyles()})]},a.prototype.onRemove=function(){var t;for(this.labelDiv_.parentNode.removeChild(this.labelDiv_),this.eventDiv_.parentNode.removeChild(this.eventDiv_),t=0;t<this.listeners_.length;t++)google.maps.event.removeListener(this.listeners_[t])},a.prototype.draw=function(){this.setContent(),this.setTitle(),this.setStyles()},a.prototype.setContent=function(){var t=this.marker_.get("labelContent");"undefined"==typeof t.nodeType?(this.labelDiv_.innerHTML=t,this.eventDiv_.innerHTML=this.labelDiv_.innerHTML):(this.labelDiv_.innerHTML="",this.labelDiv_.appendChild(t),t=t.cloneNode(!0),this.eventDiv_.innerHTML="",this.eventDiv_.appendChild(t))},a.prototype.setTitle=function(){this.eventDiv_.title=this.marker_.getTitle()||""},a.prototype.setStyles=function(){var t,e;this.labelDiv_.className=this.marker_.get("labelClass"),this.eventDiv_.className=this.labelDiv_.className,this.labelDiv_.style.cssText="",this.eventDiv_.style.cssText="",e=this.marker_.get("labelStyle");for(t in e)e.hasOwnProperty(t)&&(this.labelDiv_.style[t]=e[t],this.eventDiv_.style[t]=e[t]);this.setMandatoryStyles()},a.prototype.setMandatoryStyles=function(){this.labelDiv_.style.position="absolute",this.labelDiv_.style.overflow="hidden","undefined"!=typeof this.labelDiv_.style.opacity&&""!==this.labelDiv_.style.opacity&&(this.labelDiv_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(opacity='+100*this.labelDiv_.style.opacity+')"',this.labelDiv_.style.filter="alpha(opacity="+100*this.labelDiv_.style.opacity+")"),this.eventDiv_.style.position=this.labelDiv_.style.position,this.eventDiv_.style.overflow=this.labelDiv_.style.overflow,this.eventDiv_.style.opacity=.01,this.eventDiv_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(opacity=1)"',this.eventDiv_.style.filter="alpha(opacity=1)",this.setAnchor(),this.setPosition(),this.setVisible()},a.prototype.setAnchor=function(){var t=this.marker_.get("labelAnchor");this.labelDiv_.style.marginLeft=-t.x+"px",this.labelDiv_.style.marginTop=-t.y+"px",this.eventDiv_.style.marginLeft=-t.x+"px",this.eventDiv_.style.marginTop=-t.y+"px"},a.prototype.setPosition=function(t){var e=this.getProjection().fromLatLngToDivPixel(this.marker_.getPosition());"undefined"==typeof t&&(t=0),this.labelDiv_.style.left=Math.round(e.x)+"px",this.labelDiv_.style.top=Math.round(e.y-t)+"px",this.eventDiv_.style.left=this.labelDiv_.style.left,this.eventDiv_.style.top=this.labelDiv_.style.top,this.setZIndex()},a.prototype.setZIndex=function(){var t=this.marker_.get("labelInBackground")?-1:1;"undefined"==typeof this.marker_.getZIndex()?(this.labelDiv_.style.zIndex=parseInt(this.labelDiv_.style.top,10)+t,this.eventDiv_.style.zIndex=this.labelDiv_.style.zIndex):(this.labelDiv_.style.zIndex=this.marker_.getZIndex()+t,this.eventDiv_.style.zIndex=this.labelDiv_.style.zIndex)},a.prototype.setVisible=function(){this.marker_.get("labelVisible")?this.labelDiv_.style.display=this.marker_.getVisible()?"block":"none":this.labelDiv_.style.display="none",this.eventDiv_.style.display=this.labelDiv_.style.display},s(l,google.maps.Marker),l.prototype.setMap=function(t){google.maps.Marker.prototype.setMap.apply(this,arguments),this.label.setMap(t)},u.prototype=new google.maps.OverlayView,t.RichMarker=u,u.prototype.getVisible=function(){return this.get("visible")},u.prototype.getVisible=u.prototype.getVisible,u.prototype.setVisible=function(t){this.set("visible",t)},u.prototype.setVisible=u.prototype.setVisible,u.prototype.visible_changed=function(){this.ready_&&(this.markerWrapper_.style.display=this.getVisible()?"":"none",this.draw())},u.prototype.visible_changed=u.prototype.visible_changed,u.prototype.setFlat=function(t){this.set("flat",!!t)},u.prototype.setFlat=u.prototype.setFlat,u.prototype.getFlat=function(){return this.get("flat")},u.prototype.getFlat=u.prototype.getFlat,u.prototype.getWidth=function(){return this.get("width")},u.prototype.getWidth=u.prototype.getWidth,u.prototype.getHeight=function(){return this.get("height")},u.prototype.getHeight=u.prototype.getHeight,u.prototype.setShadow=function(t){this.set("shadow",t),this.flat_changed()},u.prototype.setShadow=u.prototype.setShadow,u.prototype.getShadow=function(){return this.get("shadow")},u.prototype.getShadow=u.prototype.getShadow,u.prototype.flat_changed=function(){this.ready_&&(this.markerWrapper_.style.boxShadow=this.markerWrapper_.style.webkitBoxShadow=this.markerWrapper_.style.MozBoxShadow=this.getFlat()?"":this.getShadow())},u.prototype.flat_changed=u.prototype.flat_changed,u.prototype.setZIndex=function(t){this.set("zIndex",t)},u.prototype.setZIndex=u.prototype.setZIndex,u.prototype.getZIndex=function(){return this.get("zIndex")},u.prototype.getZIndex=u.prototype.getZIndex,u.prototype.zIndex_changed=function(){this.getZIndex()&&this.ready_&&(this.markerWrapper_.style.zIndex=this.getZIndex())},u.prototype.zIndex_changed=u.prototype.zIndex_changed,u.prototype.getDraggable=function(){return this.get("draggable")},u.prototype.getDraggable=u.prototype.getDraggable,u.prototype.setDraggable=function(t){this.set("draggable",!!t)},u.prototype.setDraggable=u.prototype.setDraggable,u.prototype.draggable_changed=function(){this.ready_&&(this.getDraggable()?this.addDragging_(this.markerWrapper_):this.removeDragListeners_())},u.prototype.draggable_changed=u.prototype.draggable_changed,u.prototype.getPosition=function(){return this.get("position")},u.prototype.getPosition=u.prototype.getPosition,u.prototype.setPosition=function(t){this.set("position",t)},u.prototype.setPosition=u.prototype.setPosition,u.prototype.position_changed=function(){this.draw()},u.prototype.position_changed=u.prototype.position_changed,u.prototype.getAnchor=function(){return this.get("anchor")},u.prototype.getAnchor=u.prototype.getAnchor,u.prototype.setAnchor=function(t){this.set("anchor",t)},u.prototype.setAnchor=u.prototype.setAnchor,u.prototype.anchor_changed=function(){this.draw()},u.prototype.anchor_changed=u.prototype.anchor_changed,u.prototype.htmlToDocumentFragment_=function(t){var e=document.createElement("DIV");if(e.innerHTML=t,1==e.childNodes.length)return e.removeChild(e.firstChild);for(var i=document.createDocumentFragment();e.firstChild;)i.appendChild(e.firstChild);return i},u.prototype.removeChildren_=function(t){if(t)for(var e;e=t.firstChild;)t.removeChild(e)},u.prototype.setContent=function(t){this.set("content",t)},u.prototype.setContent=u.prototype.setContent,u.prototype.getContent=function(){return this.get("content")},u.prototype.getContent=u.prototype.getContent,u.prototype.content_changed=function(){if(this.markerContent_){this.removeChildren_(this.markerContent_);var t=this.getContent();if(t){"string"==typeof t&&(t=t.replace(/^\s*([\S\s]*)\b\s*$/,"$1"),t=this.htmlToDocumentFragment_(t)),this.markerContent_.appendChild(t);for(var e,i=this,n=this.markerContent_.getElementsByTagName("IMG"),o=0;e=n[o];o++)google.maps.event.addDomListener(e,"mousedown",function(t){i.getDraggable()&&(t.preventDefault&&t.preventDefault(),t.returnValue=!1)}),google.maps.event.addDomListener(e,"load",function(){i.draw()});google.maps.event.trigger(this,"domready")}this.ready_&&this.draw()}},u.prototype.content_changed=u.prototype.content_changed,u.prototype.setCursor_=function(t){if(this.ready_){var e="";navigator.userAgent.indexOf("Gecko/")!==-1?("dragging"==t&&(e="-moz-grabbing"),"dragready"==t&&(e="-moz-grab"),"draggable"==t&&(e="pointer")):("dragging"!=t&&"dragready"!=t||(e="move"),"draggable"==t&&(e="pointer")),this.markerWrapper_.style.cursor!=e&&(this.markerWrapper_.style.cursor=e)}},u.prototype.startDrag=function(t){if(this.getDraggable()&&!this.dragging_){this.dragging_=!0;var e=this.getMap();this.mapDraggable_=e.get("draggable"),e.set("draggable",!1),this.mouseX_=t.clientX,this.mouseY_=t.clientY,this.setCursor_("dragready"),this.markerWrapper_.style.MozUserSelect="none",this.markerWrapper_.style.KhtmlUserSelect="none",this.markerWrapper_.style.WebkitUserSelect="none",this.markerWrapper_.unselectable="on",this.markerWrapper_.onselectstart=function(){return!1},this.addDraggingListeners_(),google.maps.event.trigger(this,"dragstart")}},u.prototype.stopDrag=function(){this.getDraggable()&&this.dragging_&&(this.dragging_=!1,this.getMap().set("draggable",this.mapDraggable_),this.mouseX_=this.mouseY_=this.mapDraggable_=null,this.markerWrapper_.style.MozUserSelect="",this.markerWrapper_.style.KhtmlUserSelect="",this.markerWrapper_.style.WebkitUserSelect="",this.markerWrapper_.unselectable="off",this.markerWrapper_.onselectstart=function(){},this.removeDraggingListeners_(),this.setCursor_("draggable"),google.maps.event.trigger(this,"dragend"),this.draw())},u.prototype.drag=function(t){if(!this.getDraggable()||!this.dragging_)return void this.stopDrag();var e=this.mouseX_-t.clientX,i=this.mouseY_-t.clientY;this.mouseX_=t.clientX,this.mouseY_=t.clientY;var n=parseInt(this.markerWrapper_.style.left,10)-e,o=parseInt(this.markerWrapper_.style.top,10)-i;this.markerWrapper_.style.left=n+"px",this.markerWrapper_.style.top=o+"px";var r=this.getOffset_(),s=new google.maps.Point(n-r.width,o-r.height),a=this.getProjection();this.setPosition(a.fromDivPixelToLatLng(s)),this.setCursor_("dragging"),google.maps.event.trigger(this,"drag")},u.prototype.removeDragListeners_=function(){this.draggableListener_&&(google.maps.event.removeListener(this.draggableListener_),delete this.draggableListener_),this.setCursor_("")},u.prototype.addDragging_=function(t){if(t){var e=this;this.draggableListener_=google.maps.event.addDomListener(t,"mousedown",function(t){e.startDrag(t)}),this.setCursor_("draggable")}},u.prototype.addDraggingListeners_=function(){var e=this;this.markerWrapper_.setCapture?(this.markerWrapper_.setCapture(!0),this.draggingListeners_=[google.maps.event.addDomListener(this.markerWrapper_,"mousemove",function(t){e.drag(t)},!0),google.maps.event.addDomListener(this.markerWrapper_,"mouseup",function(){e.stopDrag(),e.markerWrapper_.releaseCapture()},!0)]):this.draggingListeners_=[google.maps.event.addDomListener(t,"mousemove",function(t){e.drag(t)},!0),google.maps.event.addDomListener(t,"mouseup",function(){e.stopDrag()},!0)]},u.prototype.removeDraggingListeners_=function(){if(this.draggingListeners_){for(var t,e=0;t=this.draggingListeners_[e];e++)google.maps.event.removeListener(t);this.draggingListeners_.length=0}},u.prototype.getOffset_=function(){var t=this.getAnchor();if("object"==typeof t)return t;var e=new google.maps.Size(0,0);if(!this.markerContent_)return e;var i=this.markerContent_.offsetWidth,n=this.markerContent_.offsetHeight;switch(t){case p.TOP_LEFT:break;case p.TOP:e.width=-i/2;break;case p.TOP_RIGHT:e.width=-i;break;case p.LEFT:e.height=-n/2;break;case p.MIDDLE:e.width=-i/2,e.height=-n/2;break;case p.RIGHT:e.width=-i,e.height=-n/2;break;case p.BOTTOM_LEFT:e.height=-n;break;case p.BOTTOM:e.width=-i/2,e.height=-n;break;case p.BOTTOM_RIGHT:e.width=-i,e.height=-n}return e},u.prototype.onAdd=function(){if(this.markerWrapper_||(this.markerWrapper_=document.createElement("DIV"),this.markerWrapper_.style.position="absolute"),this.getZIndex()&&(this.markerWrapper_.style.zIndex=this.getZIndex()),this.markerWrapper_.style.display=this.getVisible()?"":"none",!this.markerContent_){this.markerContent_=document.createElement("DIV"),this.markerWrapper_.appendChild(this.markerContent_);var t=this;google.maps.event.addDomListener(this.markerContent_,"click",function(e){google.maps.event.trigger(t,"click")}),google.maps.event.addDomListener(this.markerContent_,"mouseover",function(e){
google.maps.event.trigger(t,"mouseover")}),google.maps.event.addDomListener(this.markerContent_,"mouseout",function(e){google.maps.event.trigger(t,"mouseout")})}this.ready_=!0,this.content_changed(),this.flat_changed(),this.draggable_changed();var e=this.getPanes();e&&e.overlayMouseTarget.appendChild(this.markerWrapper_),google.maps.event.trigger(this,"ready")},u.prototype.onAdd=u.prototype.onAdd,u.prototype.draw=function(){if(this.ready_&&!this.dragging_){var t=this.getProjection();if(t){var e=this.get("position"),i=t.fromLatLngToDivPixel(e),n=this.getOffset_();this.markerWrapper_.style.top=i.y+n.height+"px",this.markerWrapper_.style.left=i.x+n.width+"px";var o=this.markerContent_.offsetHeight,r=this.markerContent_.offsetWidth;r!=this.get("width")&&this.set("width",r),o!=this.get("height")&&this.set("height",o)}}},u.prototype.draw=u.prototype.draw,u.prototype.onRemove=function(){this.markerWrapper_&&this.markerWrapper_.parentNode&&this.markerWrapper_.parentNode.removeChild(this.markerWrapper_),this.removeDragListeners_()},u.prototype.onRemove=u.prototype.onRemove;var p={TOP_LEFT:1,TOP:2,TOP_RIGHT:3,LEFT:4,MIDDLE:5,RIGHT:6,BOTTOM_LEFT:7,BOTTOM:8,BOTTOM_RIGHT:9};t.RichMarkerPosition=p,t.InfoBox=r,t.Cluster=n,t.ClusterIcon=e,t.MarkerClusterer=o,t.MarkerLabel_=a,t.MarkerWithLabel=l,t.RichMarker=u}()})}}),function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,i,n){e.module("uiGmapgoogle-maps.wrapped").service("uiGmapDataStructures",function(){return{Graph:n(1).Graph,Queue:n(1).Queue}})},function(t,e,i){(function(){t.exports={Graph:i(2),Heap:i(3),LinkedList:i(4),Map:i(5),Queue:i(6),RedBlackTree:i(7),Trie:i(8)}}).call(this)},function(t,e){(function(){var e,i={}.hasOwnProperty;e=function(){function t(){this._nodes={},this.nodeSize=0,this.edgeSize=0}return t.prototype.addNode=function(t){if(!this._nodes[t])return this.nodeSize++,this._nodes[t]={_outEdges:{},_inEdges:{}}},t.prototype.getNode=function(t){return this._nodes[t]},t.prototype.removeNode=function(t){var e,n,o,r,s;if(n=this._nodes[t]){r=n._outEdges;for(o in r)i.call(r,o)&&this.removeEdge(t,o);s=n._inEdges;for(e in s)i.call(s,e)&&this.removeEdge(e,t);return this.nodeSize--,delete this._nodes[t],n}},t.prototype.addEdge=function(t,e,i){var n,o,r;if(null==i&&(i=1),!this.getEdge(t,e)&&(o=this._nodes[t],r=this._nodes[e],o&&r))return n={weight:i},o._outEdges[e]=n,r._inEdges[t]=n,this.edgeSize++,n},t.prototype.getEdge=function(t,e){var i,n;if(i=this._nodes[t],n=this._nodes[e],i&&n)return i._outEdges[e]},t.prototype.removeEdge=function(t,e){var i,n,o;if(n=this._nodes[t],o=this._nodes[e],i=this.getEdge(t,e))return delete n._outEdges[e],delete o._inEdges[t],this.edgeSize--,i},t.prototype.getInEdgesOf=function(t){var e,n,o,r;o=this._nodes[t],n=[],r=null!=o?o._inEdges:void 0;for(e in r)i.call(r,e)&&n.push(this.getEdge(e,t));return n},t.prototype.getOutEdgesOf=function(t){var e,n,o,r;e=this._nodes[t],n=[],r=null!=e?e._outEdges:void 0;for(o in r)i.call(r,o)&&n.push(this.getEdge(t,o));return n},t.prototype.getAllEdgesOf=function(t){var e,i,n,o,r,s,a;if(i=this.getInEdgesOf(t),n=this.getOutEdgesOf(t),0===i.length)return n;for(o=this.getEdge(t,t),e=r=0,s=i.length;0<=s?r<s:r>s;e=0<=s?++r:--r)if(i[e]===o){a=[i[i.length-1],i[e]],i[e]=a[0],i[i.length-1]=a[1],i.pop();break}return i.concat(n)},t.prototype.forEachNode=function(t){var e,n,o;o=this._nodes;for(e in o)i.call(o,e)&&(n=o[e],t(n,e))},t.prototype.forEachEdge=function(t){var e,n,o,r,s,a;s=this._nodes;for(n in s)if(i.call(s,n)){o=s[n],a=o._outEdges;for(r in a)i.call(a,r)&&(e=a[r],t(e))}},t}(),t.exports=e}).call(this)},function(t,e){(function(){var e,i,n,o;e=function(){function t(t){var e,i,n,o,r,s;for(null==t&&(t=[]),this._data=[void 0],n=0,r=t.length;n<r;n++)i=t[n],null!=i&&this._data.push(i);if(this._data.length>1)for(e=o=2,s=this._data.length;2<=s?o<s:o>s;e=2<=s?++o:--o)this._upHeap(e);this.size=this._data.length-1}return t.prototype.add=function(t){if(null!=t)return this._data.push(t),this._upHeap(this._data.length-1),this.size++,t},t.prototype.removeMin=function(){var t;if(1!==this._data.length)return this.size--,2===this._data.length?this._data.pop():(t=this._data[1],this._data[1]=this._data.pop(),this._downHeap(),t)},t.prototype.peekMin=function(){return this._data[1]},t.prototype._upHeap=function(t){var e,i;for(e=this._data[t];this._data[t]<this._data[n(t)]&&t>1;)i=[this._data[n(t)],this._data[t]],this._data[t]=i[0],this._data[n(t)]=i[1],t=n(t)},t.prototype._downHeap=function(){var t,e,n;for(t=1;i(t<this._data.length)&&(e=i(t),e<this._data.length-1&&this._data[o(t)]<this._data[e]&&(e=o(t)),this._data[e]<this._data[t]);)n=[this._data[t],this._data[e]],this._data[e]=n[0],this._data[t]=n[1],t=e},t}(),n=function(t){return t>>1},i=function(t){return t<<1},o=function(t){return(t<<1)+1},t.exports=e}).call(this)},function(t,e){(function(){var e;e=function(){function t(t){var e,i,n;for(null==t&&(t=[]),this.head={prev:void 0,value:void 0,next:void 0},this.tail={prev:void 0,value:void 0,next:void 0},this.size=0,i=0,n=t.length;i<n;i++)e=t[i],this.add(e)}return t.prototype.at=function(t){var e,i,n,o,r;if(-this.size<=t&&t<this.size){if(t=this._adjust(t),2*t<this.size)for(e=this.head,i=n=1;n<=t;i=n+=1)e=e.next;else for(e=this.tail,i=o=1,r=this.size-t-1;o<=r;i=o+=1)e=e.prev;return e}},t.prototype.add=function(t,e){var i,n,o,r,s;if(null==e&&(e=this.size),-this.size<=e&&e<=this.size)return n={value:t},e=this._adjust(e),0===this.size?this.head=n:0===e?(o=[n,this.head,n],this.head.prev=o[0],n.next=o[1],this.head=o[2]):(i=this.at(e-1),r=[i.next,n,n,i],n.next=r[0],null!=(s=i.next)?s.prev=r[1]:void 0,i.next=r[2],n.prev=r[3]),e===this.size&&(this.tail=n),this.size++,t},t.prototype.removeAt=function(t){var e,i,n;if(null==t&&(t=this.size-1),-this.size<=t&&t<this.size&&0!==this.size)return t=this._adjust(t),1===this.size?(i=this.head.value,this.head.value=this.tail.value=void 0):0===t?(i=this.head.value,this.head=this.head.next,this.head.prev=void 0):(e=this.at(t),i=e.value,e.prev.next=e.next,null!=(n=e.next)&&(n.prev=e.prev),t===this.size-1&&(this.tail=e.prev)),this.size--,i},t.prototype.remove=function(t){var e;if(null!=t){for(e=this.head;e&&e.value!==t;)e=e.next;if(e)return 1===this.size?this.head.value=this.tail.value=void 0:e===this.head?(this.head=this.head.next,this.head.prev=void 0):e===this.tail?(this.tail=this.tail.prev,this.tail.next=void 0):(e.prev.next=e.next,e.next.prev=e.prev),this.size--,t}},t.prototype.indexOf=function(t,e){var i,n;if(null==e&&(e=0),null==this.head.value&&!this.head.next||e>=this.size)return-1;for(e=Math.max(0,this._adjust(e)),i=this.at(e),n=e;i&&i.value!==t;)i=i.next,n++;return n===this.size?-1:n},t.prototype._adjust=function(t){return t<0?this.size+t:t},t}(),t.exports=e}).call(this)},function(t,e){(function(){var e,i,n,o,r={}.hasOwnProperty;i="_mapId_",e=function(){function t(e){var i,n;this._content={},this._itemId=0,this._id=t._newMapId(),this.size=0;for(i in e)r.call(e,i)&&(n=e[i],this.set(i,n))}return t._mapIdTracker=0,t._newMapId=function(){return this._mapIdTracker++},t.prototype.hash=function(t,e){var r,s;return null==e&&(e=!1),s=n(t),o(t)?(r=i+this._id,e&&!t[r]&&(t[r]=this._itemId++),r+"_"+t[r]):s+"_"+t},t.prototype.set=function(t,e){return this.has(t)||this.size++,this._content[this.hash(t,!0)]=[e,t],e},t.prototype.get=function(t){var e;return null!=(e=this._content[this.hash(t)])?e[0]:void 0},t.prototype.has=function(t){return this.hash(t)in this._content},t.prototype["delete"]=function(t){var e;return e=this.hash(t),e in this._content&&(delete this._content[e],o(t)&&delete t[i+this._id],this.size--,!0)},t.prototype.forEach=function(t){var e,i,n;n=this._content;for(e in n)r.call(n,e)&&(i=n[e],t(i[1],i[0]))},t}(),o=function(t){var e,i,o,r,s;for(e=["Boolean","Number","String","Undefined","Null","RegExp","Function"],o=n(t),r=0,s=e.length;r<s;r++)if(i=e[r],o===i)return!1;return!0},n=function(t){return Object.prototype.toString.apply(t).match(/\[object (.+)\]/)[1]},t.exports=e}).call(this)},function(t,e){(function(){var e;e=function(){function t(t){null==t&&(t=[]),this._content=t,this._dequeueIndex=0,this.size=this._content.length}return t.prototype.enqueue=function(t){return this.size++,this._content.push(t),t},t.prototype.dequeue=function(){var t;if(0!==this.size)return this.size--,t=this._content[this._dequeueIndex],this._dequeueIndex++,2*this._dequeueIndex>this._content.length&&(this._content=this._content.slice(this._dequeueIndex),this._dequeueIndex=0),t},t.prototype.peek=function(){return this._content[this._dequeueIndex]},t}(),t.exports=e}).call(this)},function(t,e){(function(){var e,i,n,o,r,s,a,l,u,p,h,c,d,g,f;i=0,n=1,o=2,a=3,r=1,e=2,s=function(){function t(t){var e,i,n;for(null==t&&(t=[]),this._root,this.size=0,i=0,n=t.length;i<n;i++)e=t[i],null!=e&&this.add(e)}return t.prototype.add=function(t){var s,h,c,d;if(null!=t){if(this.size++,c={value:t,_color:r},this._root){if(h=l(this._root,function(e){return t===e.value?i:t<e.value?e._left?n:(c._parent=e,e._left=c,a):e._right?o:(c._parent=e,e._right=c,a)}),null!=h)return}else this._root=c;for(s=c;;){if(s===this._root){s._color=e;break}if(s._parent._color===e)break;{if((null!=(d=f(s))?d._color:void 0)!==r){!p(s)&&p(s._parent)?(this._rotateLeft(s._parent),s=s._left):p(s)&&!p(s._parent)&&(this._rotateRight(s._parent),s=s._right),s._parent._color=e,u(s)._color=r,p(s)?this._rotateRight(u(s)):this._rotateLeft(u(s));break}s._parent._color=e,f(s)._color=e,u(s)._color=r,s=u(s)}}return t}},t.prototype.has=function(t){var e;return e=l(this._root,function(e){return t===e.value?i:t<e.value?n:o}),!!e},t.prototype.peekMin=function(){var t;return null!=(t=d(this._root))?t.value:void 0},t.prototype.peekMax=function(){var t;return null!=(t=c(this._root))?t.value:void 0},t.prototype.remove=function(t){var e;if(e=l(this._root,function(e){return t===e.value?i:t<e.value?n:o}))return this._removeNode(this._root,e),this.size--,t},t.prototype.removeMin=function(){var t,e;if(t=d(this._root))return e=t.value,this._removeNode(this._root,t),e},t.prototype.removeMax=function(){var t,e;if(t=c(this._root))return e=t.value,this._removeNode(this._root,t),e},t.prototype._removeNode=function(t,i){var n,o,s,a,l,u,c,f,m,v;if(i._left&&i._right&&(o=d(i._right),i.value=o.value,i=o),o=i._left||i._right,o||(o={color:e,_right:void 0,_left:void 0,isLeaf:!0}),o._parent=i._parent,null!=(s=i._parent)&&(s[h(i)]=o),i._color===e)if(o._color===r)o._color=e,o._parent||(this._root=o);else for(;;){if(!o._parent){o.isLeaf?this._root=void 0:this._root=o;break}if(n=g(o),(null!=n?n._color:void 0)===r&&(o._parent._color=r,n._color=e,p(o)?this._rotateLeft(o._parent):this._rotateRight(o._parent)),n=g(o),o._parent._color!==e||n&&(n._color!==e||n._left&&n._left._color!==e||n._right&&n._right._color!==e)){if(!(o._parent._color!==r||n&&(n._color!==e||n._left&&(null!=(a=n._left)?a._color:void 0)!==e||n._right&&(null!=(l=n._right)?l._color:void 0)!==e))){null!=n&&(n._color=r),o._parent._color=e;break}if((null!=n?n._color:void 0)===e){!p(o)||n._right&&n._right._color!==e||(null!=(u=n._left)?u._color:void 0)!==r?p(o)||n._left&&n._left._color!==e||(null!=(f=n._right)?f._color:void 0)!==r||(n._color=r,null!=(m=n._right)&&(m._color=e),this._rotateLeft(n)):(n._color=r,null!=(c=n._left)&&(c._color=e),this._rotateRight(n));break}n=g(o),n._color=o._parent._color,p(o)?(n._right._color=e,this._rotateRight(o._parent)):(n._left._color=e,this._rotateLeft(o._parent))}else null!=n&&(n._color=r),o.isLeaf&&(o._parent[h(o)]=void 0),o=o._parent}if(o.isLeaf)return null!=(v=o._parent)?v[h(o)]=void 0:void 0},t.prototype._rotateLeft=function(t){var e,i;if(null!=(e=t._parent)&&(e[h(t)]=t._right),t._right._parent=t._parent,t._parent=t._right,t._right=t._right._left,t._parent._left=t,null!=(i=t._right)&&(i._parent=t),null==t._parent._parent)return this._root=t._parent},t.prototype._rotateRight=function(t){var e,i;if(null!=(e=t._parent)&&(e[h(t)]=t._left),t._left._parent=t._parent,t._parent=t._left,t._left=t._left._right,t._parent._right=t,null!=(i=t._left)&&(i._parent=t),null==t._parent._parent)return this._root=t._parent},t}(),p=function(t){return t===t._parent._left},h=function(t){return p(t)?"_left":"_right"},l=function(t,e){var r,s,l;for(s=t,l=void 0;s;){if(r=e(s),r===i){l=s;break}if(r===n)s=s._left;else if(r===o)s=s._right;else if(r===a)break}return l},d=function(t){return l(t,function(t){return t._left?n:i})},c=function(t){return l(t,function(t){return t._right?o:i})},u=function(t){var e;return null!=(e=t._parent)?e._parent:void 0},f=function(t){if(u(t))return p(t._parent)?u(t)._right:u(t)._left},g=function(t){return p(t)?t._parent._right:t._parent._left},t.exports=s}).call(this)},function(t,e,i){(function(){var e,n,o,r,s={}.hasOwnProperty;e=i(6),o="end",n=function(){function t(t){var e,i,n;for(null==t&&(t=[]),this._root={},this.size=0,i=0,n=t.length;i<n;i++)e=t[i],this.add(e)}return t.prototype.add=function(t){var e,i,n,r;if(null!=t){for(this.size++,e=this._root,n=0,r=t.length;n<r;n++)i=t[n],null==e[i]&&(e[i]={}),e=e[i];return e[o]=!0,t}},t.prototype.has=function(t){var e,i,n,r;if(null==t)return!1;for(e=this._root,n=0,r=t.length;n<r;n++){if(i=t[n],null==e[i])return!1;e=e[i]}return!!e[o]},t.prototype.longestPrefixOf=function(t){var e,i,n,o,r;if(null==t)return"";for(e=this._root,n="",o=0,r=t.length;o<r&&(i=t[o],null!=e[i]);o++)n+=i,e=e[i];return n},t.prototype.wordsWithPrefix=function(t){var i,n,r,a,l,u,p,h,c,d;if(null==t)return[];for(null!=t||(t=""),p=[],n=this._root,h=0,c=t.length;h<c;h++)if(r=t[h],n=n[r],null==n)return[];for(l=new e,l.enqueue([n,""]);0!==l.size;){d=l.dequeue(),a=d[0],i=d[1],a[o]&&p.push(t+i);for(r in a)s.call(a,r)&&(u=a[r],l.enqueue([u,i+r]))}return p},t.prototype.remove=function(t){var e,i,n,s,a,l,u,p;if(null!=t){for(e=this._root,s=[],a=0,u=t.length;a<u;a++){if(n=t[a],null==e[n])return;e=e[n],s.push([n,e])}if(e[o]){if(this.size--,delete e[o],r(e,1))return t;for(i=l=p=s.length-1;(p<=1?l<=1:l>=1)&&!r(s[i][1],1);i=p<=1?++l:--l)delete s[i-1][1][s[i][0]];return r(this._root[s[0][0]],1)||delete this._root[s[0][0]],t}}},t}(),r=function(t,e){var i,n;if(0===e)return!0;n=0;for(i in t)if(s.call(t,i)&&(n++,n>=e))return!0;return!1},t.exports=n}).call(this)}]),e.module("uiGmapgoogle-maps.wrapped").service("uiGmapMarkerSpiderfier",["uiGmapGoogleMapApi",function(e){var i=this;return+function(){var e={}.hasOwnProperty,i=[].slice;this.OverlappingMarkerSpiderfier=function(){function n(t,i){var n,r,s,a,l,u;this.map=t,null==i&&(i={});for(r in i)e.call(i,r)&&(u=i[r],this[r]=u);for(this.projHelper=new this.constructor.ProjHelper(this.map),this.initMarkerArrays(),this.listeners={},l=["click","zoom_changed","maptypeid_changed"],s=0,a=l.length;s<a;s++)n=l[s],o.addListener(this.map,n,function(t){return function(){return t.unspiderfy()}}(this))}var o,r,s,a,l,u,p,h,c,d,g;for(h=n.prototype,c=[n,h],s=0,u=c.length;s<u;s++)g=c[s],g.VERSION="0.3.3";return r=void 0,o=void 0,p=void 0,d=2*Math.PI,h.keepSpiderfied=!1,h.markersWontHide=!1,h.markersWontMove=!1,h.nearbyDistance=20,h.circleSpiralSwitchover=9,h.circleFootSeparation=23,h.circleStartAngle=d/12,h.spiralFootSeparation=26,h.spiralLengthStart=11,h.spiralLengthFactor=4,h.spiderfiedZIndex=1e3,h.usualLegZIndex=10,h.highlightedLegZIndex=20,h.event="click",h.minZoomLevel=!1,h.legWeight=1.5,h.legColors={usual:{},highlighted:{}},l=h.legColors.usual,a=h.legColors.highlighted,n.initializeGoogleMaps=function(t){return r=t.maps,o=r.event,p=r.MapTypeId,l[p.HYBRID]=l[p.SATELLITE]="#fff",a[p.HYBRID]=a[p.SATELLITE]="#f00",l[p.TERRAIN]=l[p.ROADMAP]="#444",a[p.TERRAIN]=a[p.ROADMAP]="#f00",this.ProjHelper=function(t){return this.setMap(t)},this.ProjHelper.prototype=new r.OverlayView,this.ProjHelper.prototype.draw=function(){}},h.initMarkerArrays=function(){return this.markers=[],this.markerListenerRefs=[]},h.addMarker=function(t){var e;return null!=t._oms?this:(t._oms=!0,e=[o.addListener(t,this.event,function(e){return function(i){return e.spiderListener(t,i)}}(this))],this.markersWontHide||e.push(o.addListener(t,"visible_changed",function(e){return function(){return e.markerChangeListener(t,!1)}}(this))),this.markersWontMove||e.push(o.addListener(t,"position_changed",function(e){return function(){return e.markerChangeListener(t,!0)}}(this))),this.markerListenerRefs.push(e),this.markers.push(t),this)},h.markerChangeListener=function(t,e){if(null!=t._omsData&&(e||!t.getVisible())&&null==this.spiderfying&&null==this.unspiderfying)return this.unspiderfy(e?t:null)},h.getMarkers=function(){return this.markers.slice(0)},h.removeMarker=function(t){var e,i,n,r,s;if(null!=t._omsData&&this.unspiderfy(),e=this.arrIndexOf(this.markers,t),e<0)return this;for(s=this.markerListenerRefs.splice(e,1)[0],i=0,n=s.length;i<n;i++)r=s[i],o.removeListener(r);return delete t._oms,this.markers.splice(e,1),this},h.clearMarkers=function(){var t,e,i,n,r,s,a,l,u;for(this.unspiderfy(),u=this.markers,t=e=0,i=u.length;e<i;t=++e){for(a=u[t],s=this.markerListenerRefs[t],l=0,n=s.length;l<n;l++)r=s[l],o.removeListener(r);delete a._oms}return this.initMarkerArrays(),this},h.addListener=function(t,e){var i;return(null!=(i=this.listeners)[t]?i[t]:i[t]=[]).push(e),this},h.removeListener=function(t,e){var i;return i=this.arrIndexOf(this.listeners[t],e),i<0||this.listeners[t].splice(i,1),this},h.clearListeners=function(t){return this.listeners[t]=[],this},h.trigger=function(){var t,e,n,o,r,s,a,l;for(e=arguments[0],t=2<=arguments.length?i.call(arguments,1):[],a=null!=(s=this.listeners[e])?s:[],l=[],o=0,r=a.length;o<r;o++)n=a[o],l.push(n.apply(null,t));return l},h.generatePtsCircle=function(t,e){var i,n,o,s,a,l,u,p;for(o=this.circleFootSeparation*(2+t),l=o/d,n=d/t,p=[],s=a=0,u=t;0<=u?a<u:a>u;s=0<=u?++a:--a)i=this.circleStartAngle+s*n,p.push(new r.Point(e.x+l*Math.cos(i),e.y+l*Math.sin(i)));return p},h.generatePtsSpiral=function(t,e){var i,n,o,s,a,l,u;for(s=this.spiralLengthStart,i=0,u=[],n=o=0,l=t;0<=l?o<l:o>l;n=0<=l?++o:--o)i+=this.spiralFootSeparation/s+5e-4*n,a=new r.Point(e.x+s*Math.cos(i),e.y+s*Math.sin(i)),s+=d*this.spiralLengthFactor/i,u.push(a);return u},h.spiderListener=function(e,i){var n,o,r,s,a,l,u,p,c,d,g,f,m;if(p=null!=e._omsData,p&&this.keepSpiderfied||("mouseover"===this.event?(n=this,o=function(){return n.unspiderfy()},t.clearTimeout(h.timeout),h.timeout=setTimeout(o,3e3)):this.unspiderfy()),p||this.map.getStreetView().getVisible()||"GoogleEarthAPI"===this.map.getMapTypeId())return this.trigger("click",e,i);for(d=[],g=[],c=this.nearbyDistance,f=c*c,u=this.llToPt(e.position),m=this.markers,r=0,s=m.length;r<s;r++)a=m[r],null!=a.map&&a.getVisible()&&(l=this.llToPt(a.position),this.ptDistanceSq(l,u)<f?d.push({marker:a,markerPt:l}):g.push(a));return 1===d.length?this.trigger("click",e,i):this.spiderfy(d,g)},h.markersNearMarker=function(t,e){var i,n,o,r,s,a,l,u,p,h,c;if(null==e&&(e=!1),null==this.projHelper.getProjection())throw"Must wait for 'idle' event on map before calling markersNearMarker";for(l=this.nearbyDistance,u=l*l,s=this.llToPt(t.position),a=[],p=this.markers,i=0,n=p.length;i<n&&(o=p[i],!(o!==t&&null!=o.map&&o.getVisible()&&(r=this.llToPt(null!=(h=null!=(c=o._omsData)?c.usualPosition:void 0)?h:o.position),this.ptDistanceSq(r,s)<u&&(a.push(o),e))));i++);return a},h.markersNearAnyOtherMarker=function(){var t,e,i,n,o,r,s,a,l,u,p,h,c,d,g,f,m,v,y,_,b;if(null==this.projHelper.getProjection())throw"Must wait for 'idle' event on map before calling markersNearAnyOtherMarker";for(g=this.nearbyDistance,f=g*g,c=function(){var t,e,i,n,o,r;for(i=this.markers,r=[],t=0,e=i.length;t<e;t++)a=i[t],r.push({pt:this.llToPt(null!=(n=null!=(o=a._omsData)?o.usualPosition:void 0)?n:a.position),willSpiderfy:!1});return r}.call(this),v=this.markers,e=n=0,o=v.length;n<o;e=++n)if(l=v[e],null!=l.map&&l.getVisible()&&(u=c[e],!u.willSpiderfy))for(y=this.markers,i=d=0,r=y.length;d<r;i=++d)if(p=y[i],i!==e&&null!=p.map&&p.getVisible()&&(h=c[i],(!(i<e)||h.willSpiderfy)&&this.ptDistanceSq(u.pt,h.pt)<f)){u.willSpiderfy=h.willSpiderfy=!0;break}for(_=this.markers,b=[],t=m=0,s=_.length;m<s;t=++m)a=_[t],c[t].willSpiderfy&&b.push(a);return b},h.makeHighlightListenerFuncs=function(t){return{highlight:function(e){return function(){return t._omsData.leg.setOptions({strokeColor:e.legColors.highlighted[e.map.mapTypeId],zIndex:e.highlightedLegZIndex})}}(this),unhighlight:function(e){return function(){return t._omsData.leg.setOptions({strokeColor:e.legColors.usual[e.map.mapTypeId],zIndex:e.usualLegZIndex})}}(this)}},h.spiderfy=function(t,e){var i,n,s,a,l,u,p,h,c,d,g;return!(this.minZoomLevel&&this.map.getZoom()<this.minZoomLevel)&&(this.spiderfying=!0,d=t.length,i=this.ptAverage(function(){var e,i,n;for(n=[],e=0,i=t.length;e<i;e++)h=t[e],n.push(h.markerPt);return n}()),a=d>=this.circleSpiralSwitchover?this.generatePtsSpiral(d,i).reverse():this.generatePtsCircle(d,i),g=function(){var e,i,h;for(h=[],e=0,i=a.length;e<i;e++)s=a[e],n=this.ptToLl(s),c=this.minExtract(t,function(t){return function(e){return t.ptDistanceSq(e.markerPt,s)}}(this)),p=c.marker,u=new r.Polyline({map:this.map,path:[p.position,n],strokeColor:this.legColors.usual[this.map.mapTypeId],strokeWeight:this.legWeight,zIndex:this.usualLegZIndex}),p._omsData={usualPosition:p.position,leg:u},this.legColors.highlighted[this.map.mapTypeId]!==this.legColors.usual[this.map.mapTypeId]&&(l=this.makeHighlightListenerFuncs(p),p._omsData.hightlightListeners={highlight:o.addListener(p,"mouseover",l.highlight),unhighlight:o.addListener(p,"mouseout",l.unhighlight)}),p.setPosition(n),p.setZIndex(Math.round(this.spiderfiedZIndex+s.y)),h.push(p);return h}.call(this),delete this.spiderfying,this.spiderfied=!0,this.trigger("spiderfy",g,e))},h.unspiderfy=function(t){var e,i,n,r,s,a,l;if(null==t&&(t=null),null==this.spiderfied)return this;for(this.unspiderfying=!0,l=[],s=[],a=this.markers,e=0,i=a.length;e<i;e++)r=a[e],null!=r._omsData?(r._omsData.leg.setMap(null),r!==t&&r.setPosition(r._omsData.usualPosition),r.setZIndex(null),n=r._omsData.hightlightListeners,null!=n&&(o.removeListener(n.highlight),o.removeListener(n.unhighlight)),delete r._omsData,l.push(r)):s.push(r);return delete this.unspiderfying,delete this.spiderfied,this.trigger("unspiderfy",l,s),this},h.ptDistanceSq=function(t,e){var i,n;return i=t.x-e.x,n=t.y-e.y,i*i+n*n},h.ptAverage=function(t){var e,i,n,o,s,a;for(s=a=0,e=0,i=t.length;e<i;e++)o=t[e],s+=o.x,a+=o.y;return n=t.length,new r.Point(s/n,a/n)},h.llToPt=function(t){return this.projHelper.getProjection().fromLatLngToDivPixel(t)},h.ptToLl=function(t){return this.projHelper.getProjection().fromDivPixelToLatLng(t)},h.minExtract=function(t,e){var i,n,o,r,s,a,l;for(o=s=0,a=t.length;s<a;o=++s)r=t[o],l=e(r),("undefined"==typeof i||null===i||l<n)&&(n=l,i=o);return t.splice(i,1)[0]},h.arrIndexOf=function(t,e){var i,n,o,r;if(null!=t.indexOf)return t.indexOf(e);for(i=n=0,o=t.length;n<o;i=++n)if(r=t[i],r===e)return i;return-1},n}()}.apply(i),e.then(function(){i.OverlappingMarkerSpiderfier.initializeGoogleMaps(t.google)}),this.OverlappingMarkerSpiderfier}]),e.module("uiGmapgoogle-maps.extensions").service("uiGmapExtendMarkerClusterer",["uiGmapLodash","uiGmapPropMap",function(e,i){return{init:_.once(function(){(function(){var n={}.hasOwnProperty,o=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t.NgMapCluster=function(t){function n(t){n.__super__.constructor.call(this,t),this.markers_=new i}return o(n,t),n.prototype.addMarker=function(t){var e,i;if(this.isMarkerAlreadyAdded_(t)){var n=this.markers_.get(t.key);if(n.getPosition().lat()==t.getPosition().lat()&&n.getPosition().lon()==t.getPosition().lon())return!1}if(this.center_){if(this.averageCenter_){var o=this.markers_.length+1,r=(this.center_.lat()*(o-1)+t.getPosition().lat())/o,s=(this.center_.lng()*(o-1)+t.getPosition().lng())/o;this.center_=new google.maps.LatLng(r,s),this.calculateBounds_()}}else this.center_=t.getPosition(),this.calculateBounds_();return t.isAdded=!0,this.markers_.push(t),e=this.markers_.length,i=this.markerClusterer_.getMaxZoom(),null!==i&&this.map_.getZoom()>i?t.getMap()!==this.map_&&t.setMap(this.map_):e<this.minClusterSize_?t.getMap()!==this.map_&&t.setMap(this.map_):e===this.minClusterSize_?this.markers_.each(function(t){t.setMap(null)}):t.setMap(null),!0},n.prototype.isMarkerAlreadyAdded_=function(t){return e.isNullOrUndefined(this.markers_.get(t.key))},n.prototype.getBounds=function(){var t=new google.maps.LatLngBounds(this.center_,this.center_);return this.getMarkers().each(function(e){t.extend(e.getPosition())}),t},n.prototype.remove=function(){this.clusterIcon_.setMap(null),this.markers_=new i,delete this.markers_},n}(Cluster),t.NgMapMarkerClusterer=function(t){function e(t,n,o){e.__super__.constructor.call(this,t,n,o),this.markers_=new i}return o(e,t),e.prototype.clearMarkers=function(){this.resetViewport_(!0),this.markers_=new i},e.prototype.removeMarker_=function(t){return!!this.markers_.get(t.key)&&(t.setMap(null),this.markers_.remove(t.key),!0)},e.prototype.createClusters_=function(t){var e,i,n,o=this;if(this.ready_){0===t&&(google.maps.event.trigger(this,"clusteringbegin",this),"undefined"!=typeof this.timerRefStatic&&(clearTimeout(this.timerRefStatic),delete this.timerRefStatic)),n=this.getMap().getZoom()>3?new google.maps.LatLngBounds(this.getMap().getBounds().getSouthWest(),this.getMap().getBounds().getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,(-178.48388434375)),new google.maps.LatLng((-85.08136444384544),178.00048865625));var r=this.getExtendedBounds(n),s=Math.min(t+this.batchSize_,this.markers_.length),a=this.markers_.values();for(e=t;e<s;e++)i=a[e],!i.isAdded&&this.isMarkerInBounds_(i,r)&&(!this.ignoreHidden_||this.ignoreHidden_&&i.getVisible())&&this.addToClosestCluster_(i);if(s<this.markers_.length)this.timerRefStatic=setTimeout(function(){o.createClusters_(s)},0);else{for(e=0;e<this.clusters_.length;e++)this.clusters_[e].updateIcon_();delete this.timerRefStatic,google.maps.event.trigger(this,"clusteringend",this)}}},e.prototype.addToClosestCluster_=function(t){var e,i,n,o,r=4e4,s=null;for(e=0;e<this.clusters_.length;e++)n=this.clusters_[e],o=n.getCenter(),o&&(i=this.distanceBetweenPoints_(o,t.getPosition()),i<r&&(r=i,s=n));s&&s.isMarkerInClusterBounds(t)?s.addMarker(t):(n=new NgMapCluster(this),n.addMarker(t),this.clusters_.push(n))},e.prototype.redraw_=function(){this.createClusters_(0)},e.prototype.resetViewport_=function(t){var e;for(e=0;e<this.clusters_.length;e++)this.clusters_[e].remove();this.clusters_=[],this.markers_.each(function(e){e.isAdded=!1,t&&e.setMap(null)})},e.prototype.extend=function(t,e){return function(t){var e;for(e in t.prototype)"constructor"!==e&&(this.prototype[e]=t.prototype[e]);return this}.apply(t,[e])},ClusterIcon.prototype.show=function(){if(this.div_){var t="",e=this.backgroundPosition_.split(" "),i=parseInt(e[0].trim(),10),n=parseInt(e[1].trim(),10),o=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(o),t="<img src='"+this.url_+"' style='position: absolute; top: "+n+"px; left: "+i+"px; ",t+=this.cluster_.getMarkerClusterer().enableRetinaIcons_?"width: "+this.width_+"px;height: "+this.height_+"px;":"clip: rect("+-1*n+"px, "+(-1*i+this.width_)+"px, "+(-1*n+this.height_)+"px, "+-1*i+"px);",t+="'>",this.div_.innerHTML=t+"<div style='position: absolute;top: "+this.anchorText_[0]+"px;left: "+this.anchorText_[1]+"px;color: "+this.textColor_+";font-size: "+this.textSize_+"px;font-family: "+this.fontFamily_+";font-weight: "+this.fontWeight_+";font-style: "+this.fontStyle_+";text-decoration: "+this.textDecoration_+";text-align: center;width: "+this.width_+"px;line-height:"+this.height_+"px;'>"+this.sums_.text+"</div>","undefined"==typeof this.sums_.title||""===this.sums_.title?this.div_.title=this.cluster_.getMarkerClusterer().getTitle():this.div_.title=this.sums_.title,this.div_.style.display=""}this.visible_=!0},e}(MarkerClusterer)}).call(this)})}}])}(window,angular);